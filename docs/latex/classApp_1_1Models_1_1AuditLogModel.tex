\doxysection{App\textbackslash{}Models\textbackslash{}Audit\+Log\+Model Class Reference}
\hypertarget{classApp_1_1Models_1_1AuditLogModel}{}\label{classApp_1_1Models_1_1AuditLogModel}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}


Inheritance diagram for App\textbackslash{}Models\textbackslash{}Audit\+Log\+Model\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classApp_1_1Models_1_1AuditLogModel__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for App\textbackslash{}Models\textbackslash{}Audit\+Log\+Model\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=229pt]{classApp_1_1Models_1_1AuditLogModel__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_abdb504bdcf448a4f7f51099bdb27694c}{update}} (\$id=null, \$data=null)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a5a131826e94fe9efc545712b3764f0d7}{delete}} (\$id=null, bool \$purge=false)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a1e11cfb4e688e820d16fad6a7f6c4906}{save}} (\$data)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a288131cc79fcc727750f518b1d23e688}{insert\+Audit\+Log}} (\mbox{\hyperlink{classApp_1_1Entities_1_1AuditLog}{Audit\+Log}} \$audit\+Log)
\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions inherited from \mbox{\hyperlink{classApp_1_1Models_1_1BaseModel}{App\textbackslash{}\+Models\textbackslash{}\+Base\+Model}}}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a520a32fbcc043cef1d4546c95a39fdd6}{find\+Active\+By\+Id}} (int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}null \$id)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_adf863f20d1743aae9bd51d6e38d82dbd}{archive}} (int\texorpdfstring{$\vert$}{|}string \$id)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_ae337a05eb88d4d9916e0279a9d974651}{restore}} (int\texorpdfstring{$\vert$}{|}string \$id)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a4de323dc9982ad34f14b0858f3e4b9af}{update\+If\+Changed}} (int\texorpdfstring{$\vert$}{|}string\texorpdfstring{$\vert$}{|}null \$id=null, array \$data=\mbox{[}$\,$\mbox{]})
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a3c72ad44ad5b528ce9efc1bb3ce7fa5c}{bulk\+Update}} (array \$ids, array \$data)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_af601ce718f1fdf9132383c1eeca757e3}{count\+Active}} ()
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a9557cfc80300e9f9d5022bad0d7ad854}{validate\+Data}} (array \$data)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_afae424bb1bd922e537406dc224bd14f6}{scope\+By\+Admin}} (Base\+Builder \$builder, ?int \$admin\+Id)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a89853f8d7a9e506e37d10d65d981e10d}{scope\+By\+Action\+Type}} (Base\+Builder \$builder, string \$action\+Type)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a47edb3c5ed5f37dbae86e4cb9824c70d}{scope\+By\+Entity\+Type}} (Base\+Builder \$builder, string \$entity\+Type)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a0a675880fe77dd512269afdcf799812f}{scope\+By\+Entity\+Id}} (Base\+Builder \$builder, int \$entity\+Id)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_ab1ad064e70e1db17845fdb014387d310}{scope\+By\+Date\+Range}} (Base\+Builder \$builder, string \$start\+Date, string \$end\+Date)
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_aede5c0df3b64e157331fefc67552f36f}{scope\+Recent\+Days}} (Base\+Builder \$builder, int \$days)
\end{DoxyCompactItemize}
\doxysubsubsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a7109bac7d15012023a05336e8cdccd42}{\$table}} = \textquotesingle{}audit\+\_\+logs\textquotesingle{}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a31f5a0c90a2eb4950e94615512c33e45}{\$primary\+Key}} = \textquotesingle{}id\textquotesingle{}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_ae04f302e63ecf9dc9d50996deb87e73d}{\$return\+Type}} = Audit\+Log\+::class
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a3ae252ed7e90ac77ace31690cf92eee6}{\$use\+Soft\+Deletes}} = false
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_a6909c0a38572a08644f1564488823036}{\$use\+Timestamps}} = false
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_ab73a1e0da2397722227aaebe4588891d}{\$allowed\+Fields}}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_abefd1ee916d5822da34963464a1808ec}{\$validation\+Rules}}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_aef857de317915dfbaabe629ed0d4e8cd}{\$validation\+Messages}}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1AuditLogModel_aed74529c0ae5d6bdcee00f14c94d499f}{\$skip\+Validation}} = false
\end{DoxyCompactItemize}
\doxysubsection*{Protected Attributes inherited from \mbox{\hyperlink{classApp_1_1Models_1_1BaseModel}{App\textbackslash{}\+Models\textbackslash{}\+Base\+Model}}}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a65198a8d2123c142c654ef9f21f57090}{DEFAULT\+\_\+\+CACHE\+\_\+\+TTL}} = 3600
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a8bc39ec7a754e85b5cbe45cea47f9c5d}{\$use\+Soft\+Deletes}} = true
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a2b6a956723885b813bdb5c28fa4a91c8}{\$use\+Timestamps}} = true
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a76ed9b9cd6c48ea935c0593ba224df49}{\$created\+Field}} = \textquotesingle{}created\+\_\+at\textquotesingle{}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a567094feb29383fe42a4178f3fceab5b}{\$updated\+Field}} = \textquotesingle{}updated\+\_\+at\textquotesingle{}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_ae49e9220f67b7fa0acfc28ad8e077bb9}{\$deleted\+Field}} = \textquotesingle{}deleted\+\_\+at\textquotesingle{}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a213de2a8ea7fa54c300c2c1ec0a1f03c}{\$validation\+Rules}} = \mbox{[}$\,$\mbox{]}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a6a119a1ad59e2739d27843730b7990ee}{\$validation\+Messages}} = \mbox{[}$\,$\mbox{]}
\item 
\mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_ab3db9405c68a5a3d595e1a09a7fa9fc4}{\$skip\+Validation}} = false
\end{DoxyCompactItemize}


\label{doc-func-members}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_doc-func-members}
\doxysubsection{Member Function Documentation}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a5a131826e94fe9efc545712b3764f0d7}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!delete@{delete}}
\index{delete@{delete}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{delete()}{delete()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a5a131826e94fe9efc545712b3764f0d7} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::delete (\begin{DoxyParamCaption}\item[{}]{\$id}{ = {\ttfamily null}, }\item[{bool}]{\$purge}{ = {\ttfamily false}}\end{DoxyParamCaption})}

Override delete method -\/ Audit logs are IMMUTABLE


\begin{DoxyParams}[1]{Parameters}
int | string | array | null & {\em \$id} & \\
\hline
bool & {\em \$purge} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Runtime\+Exception} & Always throws exception for audit logs \\
\hline
\end{DoxyExceptions}


Reimplemented from \mbox{\hyperlink{classApp_1_1Models_1_1BaseModel_a0a8bd9bb1bf591c97e19bd41a698641e}{App\textbackslash{}\+Models\textbackslash{}\+Base\+Model}}.

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a288131cc79fcc727750f518b1d23e688}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!insertAuditLog@{insertAuditLog}}
\index{insertAuditLog@{insertAuditLog}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{insertAuditLog()}{insertAuditLog()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a288131cc79fcc727750f518b1d23e688} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::insert\+Audit\+Log (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classApp_1_1Entities_1_1AuditLog}{Audit\+Log}}}]{\$audit\+Log}{}\end{DoxyParamCaption})}

Insert audit log with automatic timestamp


\begin{DoxyParams}[1]{Parameters}
Audit\+Log & {\em \$audit\+Log} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classApp_1_1Models_1_1AuditLogModel_a288131cc79fcc727750f518b1d23e688_cgraph}
\end{center}
\end{figure}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a1e11cfb4e688e820d16fad6a7f6c4906}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!save@{save}}
\index{save@{save}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{save()}{save()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a1e11cfb4e688e820d16fad6a7f6c4906} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::save (\begin{DoxyParamCaption}\item[{}]{\$data}{}\end{DoxyParamCaption})}

Override save method -\/ Only allow inserts, no updates


\begin{DoxyParams}[1]{Parameters}
array | object & {\em \$data} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Runtime\+Exception} & If trying to update existing record \\
\hline
\end{DoxyExceptions}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a89853f8d7a9e506e37d10d65d981e10d}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeByActionType@{scopeByActionType}}
\index{scopeByActionType@{scopeByActionType}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeByActionType()}{scopeByActionType()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a89853f8d7a9e506e37d10d65d981e10d} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+By\+Action\+Type (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{string}]{\$action\+Type}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by action type


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
string & {\em \$action\+Type} & Action type (create, update, delete, etc.) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_afae424bb1bd922e537406dc224bd14f6}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeByAdmin@{scopeByAdmin}}
\index{scopeByAdmin@{scopeByAdmin}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeByAdmin()}{scopeByAdmin()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_afae424bb1bd922e537406dc224bd14f6} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+By\+Admin (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{?int}]{\$admin\+Id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by admin ID


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
int | null & {\em \$admin\+Id} & Admin ID (null for system actions) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_ab1ad064e70e1db17845fdb014387d310}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeByDateRange@{scopeByDateRange}}
\index{scopeByDateRange@{scopeByDateRange}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeByDateRange()}{scopeByDateRange()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_ab1ad064e70e1db17845fdb014387d310} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+By\+Date\+Range (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{string}]{\$start\+Date}{, }\item[{string}]{\$end\+Date}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by date range


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
string & {\em \$start\+Date} & Start date (Y-\/m-\/d H\+:i\+:s) \\
\hline
string & {\em \$end\+Date} & End date (Y-\/m-\/d H\+:i\+:s) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a0a675880fe77dd512269afdcf799812f}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeByEntityId@{scopeByEntityId}}
\index{scopeByEntityId@{scopeByEntityId}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeByEntityId()}{scopeByEntityId()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a0a675880fe77dd512269afdcf799812f} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+By\+Entity\+Id (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{int}]{\$entity\+Id}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by entity ID


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
int & {\em \$entity\+Id} & Entity ID \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a47edb3c5ed5f37dbae86e4cb9824c70d}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeByEntityType@{scopeByEntityType}}
\index{scopeByEntityType@{scopeByEntityType}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeByEntityType()}{scopeByEntityType()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a47edb3c5ed5f37dbae86e4cb9824c70d} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+By\+Entity\+Type (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{string}]{\$entity\+Type}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by entity type


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
string & {\em \$entity\+Type} & Entity type (Product, Category, etc.) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_aede5c0df3b64e157331fefc67552f36f}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!scopeRecentDays@{scopeRecentDays}}
\index{scopeRecentDays@{scopeRecentDays}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{scopeRecentDays()}{scopeRecentDays()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_aede5c0df3b64e157331fefc67552f36f} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::scope\+Recent\+Days (\begin{DoxyParamCaption}\item[{Base\+Builder}]{\$builder}{, }\item[{int}]{\$days}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}}

Scope\+: Filter by recent activity (last N days)


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
int & {\em \$days} & Number of days \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder 
\end{DoxyReturn}
Scope\+: Join with admins table to get admin info


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder
\end{DoxyReturn}
Scope\+: Filter by IP address


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
string & {\em \$ip\+Address} & IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder
\end{DoxyReturn}
Scope\+: Filter by changes summary containing text


\begin{DoxyParams}[1]{Parameters}
Base\+Builder & {\em \$builder} & \\
\hline
string & {\em \$search\+Text} & Text to search in changes\+\_\+summary \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Base\+Builder
\end{DoxyReturn}
Find audit logs for specific entity


\begin{DoxyParams}[1]{Parameters}
string & {\em \$entity\+Type} & \\
\hline
int & {\em \$entity\+Id} & \\
\hline
int & {\em \$limit} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$\+Audit\+Log$>$
\end{DoxyReturn}
Find audit logs by admin


\begin{DoxyParams}[1]{Parameters}
int & {\em \$admin\+Id} & \\
\hline
int & {\em \$limit} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$\+Audit\+Log$>$
\end{DoxyReturn}
Find audit logs by action type


\begin{DoxyParams}[1]{Parameters}
string & {\em \$action\+Type} & \\
\hline
int & {\em \$limit} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$\+Audit\+Log$>$
\end{DoxyReturn}
Find recent audit logs (last N days)


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days \\
\hline
int & {\em \$limit} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$\+Audit\+Log$>$
\end{DoxyReturn}
Search audit logs with multiple criteria


\begin{DoxyParams}[1]{Parameters}
 & {\em array$<$string,mixed$>$} & \$criteria Search criteria \\
\hline
int & {\em \$limit} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$\+Audit\+Log$>$
\end{DoxyReturn}
Get audit log statistics


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days for statistics \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$string, mixed$>$
\end{DoxyReturn}
Get action type distribution


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$string, int$>$
\end{DoxyReturn}
Get entity type distribution


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array$<$string, int$>$
\end{DoxyReturn}
Get daily activity for charting


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}array\{date\+: string, count\+: int\}\texorpdfstring{$>$}{>}
\end{DoxyReturn}
Get admin activity statistics


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days} & Number of days \\
\hline
int & {\em \$limit} & Top N admins \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\texorpdfstring{$<$}{<}array\{admin\+\_\+id\+: int, username\+: string, name\+: string, action\+\_\+count\+: int\}\texorpdfstring{$>$}{>}
\end{DoxyReturn}
Get entity audit trail with pagination


\begin{DoxyParams}[1]{Parameters}
string & {\em \$entity\+Type} & \\
\hline
int & {\em \$entity\+Id} & \\
\hline
int & {\em \$page} & \\
\hline
int & {\em \$per\+Page} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\{logs\+: array$<$\+Audit\+Log$>$, total\+: int, pages\+: int\}
\end{DoxyReturn}
Cleanup old audit logs (archive/delete logs older than N days) WARNING\+: This should only be run by system administrators


\begin{DoxyParams}[1]{Parameters}
int & {\em \$days\+Older\+Than} & Delete logs older than N days \\
\hline
bool & {\em \$archive\+First} & Whether to archive before deletion \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int Number of records deleted
\end{DoxyReturn}
Get query signature for caching (L2 Cache Strategy) Note\+: Audit logs are rarely cached due to real-\/time nature


\begin{DoxyParams}[1]{Parameters}
Query | Base\+Builder & {\em \$query} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string
\end{DoxyReturn}
Validate audit log data before insert


\begin{DoxyParams}{Parameters}
{\em array$<$string,mixed$>$} & \$data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array\{valid\+: bool, errors\+: array$<$string$>$\}
\end{DoxyReturn}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_abdb504bdcf448a4f7f51099bdb27694c}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!update@{update}}
\index{update@{update}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_abdb504bdcf448a4f7f51099bdb27694c} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::update (\begin{DoxyParamCaption}\item[{}]{\$id}{ = {\ttfamily null}, }\item[{}]{\$data}{ = {\ttfamily null}}\end{DoxyParamCaption})}

Override update method -\/ Audit logs are IMMUTABLE


\begin{DoxyParams}[1]{Parameters}
int | string | array | null & {\em \$id} & \\
\hline
array | null & {\em \$data} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool 
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em Runtime\+Exception} & Always throws exception for audit logs \\
\hline
\end{DoxyExceptions}


\label{doc-variable-members}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_doc-variable-members}
\doxysubsection{Member Data Documentation}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_ab73a1e0da2397722227aaebe4588891d}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$allowedFields@{\$allowedFields}}
\index{\$allowedFields@{\$allowedFields}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$allowedFields}{\$allowedFields}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_ab73a1e0da2397722227aaebe4588891d} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$allowed\+Fields\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'admin\_id'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'action\_type'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_type'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_id'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'old\_values'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'new\_values'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'changes\_summary'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'ip\_address'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'user\_agent'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'performed\_at'}}
\DoxyCodeLine{\ \ \ \ ]}

\end{DoxyCode}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a31f5a0c90a2eb4950e94615512c33e45}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$primaryKey@{\$primaryKey}}
\index{\$primaryKey@{\$primaryKey}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$primaryKey}{\$primaryKey}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a31f5a0c90a2eb4950e94615512c33e45} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$primary\+Key = \textquotesingle{}id\textquotesingle{}\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_ae04f302e63ecf9dc9d50996deb87e73d}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$returnType@{\$returnType}}
\index{\$returnType@{\$returnType}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$returnType}{\$returnType}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_ae04f302e63ecf9dc9d50996deb87e73d} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$return\+Type = Audit\+Log\+::class\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_aed74529c0ae5d6bdcee00f14c94d499f}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$skipValidation@{\$skipValidation}}
\index{\$skipValidation@{\$skipValidation}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$skipValidation}{\$skipValidation}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_aed74529c0ae5d6bdcee00f14c94d499f} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$skip\+Validation = false\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a7109bac7d15012023a05336e8cdccd42}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$table@{\$table}}
\index{\$table@{\$table}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$table}{\$table}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a7109bac7d15012023a05336e8cdccd42} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$table = \textquotesingle{}audit\+\_\+logs\textquotesingle{}\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a3ae252ed7e90ac77ace31690cf92eee6}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$useSoftDeletes@{\$useSoftDeletes}}
\index{\$useSoftDeletes@{\$useSoftDeletes}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$useSoftDeletes}{\$useSoftDeletes}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a3ae252ed7e90ac77ace31690cf92eee6} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$use\+Soft\+Deletes = false\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_a6909c0a38572a08644f1564488823036}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$useTimestamps@{\$useTimestamps}}
\index{\$useTimestamps@{\$useTimestamps}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$useTimestamps}{\$useTimestamps}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_a6909c0a38572a08644f1564488823036} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$use\+Timestamps = false\hspace{0.3cm}{\ttfamily [protected]}}

\Hypertarget{classApp_1_1Models_1_1AuditLogModel_aef857de317915dfbaabe629ed0d4e8cd}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$validationMessages@{\$validationMessages}}
\index{\$validationMessages@{\$validationMessages}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$validationMessages}{\$validationMessages}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_aef857de317915dfbaabe629ed0d4e8cd} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$validation\+Messages\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'action\_type'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'required'}\ =>\ \textcolor{stringliteral}{'Action\ type\ is\ required\ for\ audit\ logging.'}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_type'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'required'}\ =>\ \textcolor{stringliteral}{'Entity\ type\ is\ required\ for\ audit\ logging.'}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_id'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'required'}\ =>\ \textcolor{stringliteral}{'Entity\ ID\ is\ required\ for\ audit\ logging.'}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'old\_values'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'valid\_json'}\ =>\ \textcolor{stringliteral}{'Old\ values\ must\ be\ valid\ JSON\ format.'}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ],}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'new\_values'}\ =>\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'valid\_json'}\ =>\ \textcolor{stringliteral}{'New\ values\ must\ be\ valid\ JSON\ format.'}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ ]}
\DoxyCodeLine{\ \ \ \ ]}

\end{DoxyCode}
\Hypertarget{classApp_1_1Models_1_1AuditLogModel_abefd1ee916d5822da34963464a1808ec}\index{App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}!\$validationRules@{\$validationRules}}
\index{\$validationRules@{\$validationRules}!App\textbackslash{}Models\textbackslash{}AuditLogModel@{App\textbackslash{}Models\textbackslash{}AuditLogModel}}
\doxysubsubsection{\texorpdfstring{\$validationRules}{\$validationRules}}
{\footnotesize\ttfamily \label{classApp_1_1Models_1_1AuditLogModel_abefd1ee916d5822da34963464a1808ec} 
App\textbackslash{}\+Models\textbackslash{}\+Audit\+Log\+Model\+::\$validation\+Rules\hspace{0.3cm}{\ttfamily [protected]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ [}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'action\_type'}\ =>\ \textcolor{stringliteral}{'required|string|max\_length[50]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_type'}\ =>\ \textcolor{stringliteral}{'required|string|max\_length[50]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'entity\_id'}\ =>\ \textcolor{stringliteral}{'required|integer|greater\_than[0]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'admin\_id'}\ =>\ \textcolor{stringliteral}{'permit\_empty|integer|greater\_than[0]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'old\_values'}\ =>\ \textcolor{stringliteral}{'permit\_empty|valid\_json'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'new\_values'}\ =>\ \textcolor{stringliteral}{'permit\_empty|valid\_json'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'changes\_summary'}\ =>\ \textcolor{stringliteral}{'permit\_empty|string|max\_length[500]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'ip\_address'}\ =>\ \textcolor{stringliteral}{'permit\_empty|valid\_ip'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'user\_agent'}\ =>\ \textcolor{stringliteral}{'permit\_empty|string|max\_length[500]'},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{stringliteral}{'performed\_at'}\ =>\ \textcolor{stringliteral}{'permit\_empty|valid\_date'}}
\DoxyCodeLine{\ \ \ \ ]}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
app/\+Models/\mbox{\hyperlink{AuditLogModel_8php}{Audit\+Log\+Model.\+php}}\end{DoxyCompactItemize}
