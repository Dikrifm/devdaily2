--- CI4 BACKEND SKELETON (Compressed Mode) ---
Generated at: Fri Dec 19 14:22:53 WIB 2025
Format: [No]. [File Path] :: [Content separated by '||']
------------------------------------------------
1. [app/Config/App.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class App extends BaseConfig public string $baseURL = 'http://localhost:8080/' || public array $allowedHostnames = [] || public string $indexPage = 'index.php' || public string $uriProtocol = 'REQUEST_URI' || public string $permittedURIChars = 'a-z 0-9~%.:_\-' || public string $defaultLocale = 'en' || public bool $negotiateLocale = false || public array $supportedLocales = ['en'] || public string $appTimezone = 'UTC' || public string $charset = 'UTF-8' || public bool $forceGlobalSecureRequests = false || public array $proxyIPs = [] || public bool $CSPEnabled = false || 
2. [app/Config/Autoload.php] :: namespace Config || use CodeIgniter\Config\AutoloadConfig || class Autoload extends AutoloadConfig public $psr4 = [ public $classmap = [] || public $files = [] || public $helpers = [] || 
3. [app/Config/Boot/development.php] ::  
4. [app/Config/Boot/production.php] ::  
5. [app/Config/Boot/testing.php] ::  
6. [app/Config/CURLRequest.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class CURLRequest extends BaseConfig public bool $shareOptions = false || 
7. [app/Config/Cache.php] :: namespace Config || use CodeIgniter\Cache\CacheInterface || use CodeIgniter\Cache\Handlers\DummyHandler || use CodeIgniter\Cache\Handlers\FileHandler || use CodeIgniter\Cache\Handlers\MemcachedHandler || use CodeIgniter\Cache\Handlers\PredisHandler || use CodeIgniter\Cache\Handlers\RedisHandler || use CodeIgniter\Cache\Handlers\WincacheHandler || use CodeIgniter\Config\BaseConfig || class Cache extends BaseConfig public string $handler = 'file' || public string $backupHandler = 'dummy' || public string $prefix = '' || public int $ttl = 60 || public string $reservedCharacters = '{}()/\@:' || public array $file = [ public array $memcached = [ public array $redis = [ public array $validHandlers = [ public $cacheQueryString = false || 
8. [app/Config/Constants.php] ::  
9. [app/Config/ContentSecurityPolicy.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class ContentSecurityPolicy extends BaseConfig public bool $reportOnly = false || public ?string $reportURI = null || public bool $upgradeInsecureRequests = false || public $defaultSrc || public $scriptSrc = 'self' || public $styleSrc = 'self' || public $imageSrc = 'self' || public $baseURI || public $childSrc = 'self' || public $connectSrc = 'self' || public $fontSrc || public $formAction = 'self' || public $frameAncestors || public $frameSrc || public $mediaSrc || public $objectSrc = 'self' || public $manifestSrc || public $pluginTypes || public $sandbox || public string $styleNonceTag = '{csp-style-nonce}' || public string $scriptNonceTag = '{csp-script-nonce}' || public bool $autoNonce = true || 
10. [app/Config/Cookie.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use DateTimeInterface || class Cookie extends BaseConfig public string $prefix = '' || public $expires = 0 || public string $path = '/' || public string $domain = '' || public bool $secure = false || public bool $httponly = true || public string $samesite = 'Lax' || public bool $raw = false || 
11. [app/Config/Cors.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Cors extends BaseConfig public array $default = [ 
12. [app/Config/Database.php] :: namespace Config || use CodeIgniter\Database\Config || class Database extends Config public string $filesPath = APPPATH . 'Database' . DIRECTORY_SEPARATOR || public string $defaultGroup = 'default' || public array $default = [ public array $tests = [ public function __construct() 
13. [app/Config/DocTypes.php] :: namespace Config || class DocTypes public array $list = [ public bool $html5 = true || 
14. [app/Config/Email.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Email extends BaseConfig public string $fromEmail = '' || public string $fromName = '' || public string $recipients = '' || public string $userAgent = 'CodeIgniter' || public string $protocol = 'mail' || public string $mailPath = '/usr/sbin/sendmail' || public string $SMTPHost = '' || public string $SMTPUser = '' || public string $SMTPPass = '' || public int $SMTPPort = 25 || public int $SMTPTimeout = 5 || public bool $SMTPKeepAlive = false || public string $SMTPCrypto = 'tls' || public bool $wordWrap = true || public int $wrapChars = 76 || public string $mailType = 'text' || public string $charset = 'UTF-8' || public bool $validate = false || public int $priority = 3 || public string $CRLF = "\r\n" || public string $newline = "\r\n" || public bool $BCCBatchMode = false || public int $BCCBatchSize = 200 || public bool $DSN = false || 
15. [app/Config/Encryption.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Encryption extends BaseConfig public string $key = '' || public string $driver = 'OpenSSL' || public int $blockSize = 16 || public string $digest = 'SHA512' || public bool $rawData = true || public string $encryptKeyInfo = '' || public string $authKeyInfo = '' || public string $cipher = 'AES-256-CTR' || 
16. [app/Config/Events.php] :: namespace Config || use CodeIgniter\Events\Events || use CodeIgniter\Exceptions\FrameworkException || use CodeIgniter\HotReloader\HotReloader || 
17. [app/Config/Exceptions.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Debug\ExceptionHandler || use CodeIgniter\Debug\ExceptionHandlerInterface || use Psr\Log\LogLevel || use Throwable || class Exceptions extends BaseConfig public bool $log = true || public array $ignoreCodes = [404] || public string $errorViewPath = APPPATH . 'Views/errors' || public array $sensitiveDataInTrace = [] || public bool $logDeprecations = true || public string $deprecationLogLevel = LogLevel::WARNING || public function handler(int $statusCode, Throwable $exception): ExceptionHandlerInterface 
18. [app/Config/Feature.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Feature extends BaseConfig public bool $autoRoutesImproved = true || public bool $oldFilterOrder = false || public bool $limitZeroAsAll = true || public bool $strictLocaleNegotiation = false || 
19. [app/Config/Filters.php] :: namespace Config || use CodeIgniter\Config\Filters as BaseFilters || use CodeIgniter\Filters\Cors || use CodeIgniter\Filters\CSRF || use CodeIgniter\Filters\DebugToolbar || use CodeIgniter\Filters\ForceHTTPS || use CodeIgniter\Filters\Honeypot || use CodeIgniter\Filters\InvalidChars || use CodeIgniter\Filters\PageCache || use CodeIgniter\Filters\PerformanceMetrics || use CodeIgniter\Filters\SecureHeaders || class Filters extends BaseFilters public array $aliases = [ public array $required = [ public array $globals = [ public array $methods = [] || public array $filters = [] || 
20. [app/Config/ForeignCharacters.php] :: namespace Config || use CodeIgniter\Config\ForeignCharacters as BaseForeignCharacters || class ForeignCharacters extends BaseForeignCharacters 
21. [app/Config/Format.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Format\JSONFormatter || use CodeIgniter\Format\XMLFormatter || class Format extends BaseConfig public array $supportedResponseFormats = [ public array $formatters = [ public array $formatterOptions = [ 
22. [app/Config/Generators.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Generators extends BaseConfig public array $views = [ 
23. [app/Config/Honeypot.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Honeypot extends BaseConfig public bool $hidden = true || public string $label = 'Fill This Field' || public string $name = 'honeypot' || public string $template = '<label>{label}</label><input type="text" name="{name}" value="">' || public string $container = '<div style="display:none">{template}</div>' || public string $containerId = 'hpc' || 
24. [app/Config/Images.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Images\Handlers\GDHandler || use CodeIgniter\Images\Handlers\ImageMagickHandler || class Images extends BaseConfig public string $defaultHandler = 'gd' || public string $libraryPath = '/usr/local/bin/convert' || public array $handlers = [ 
25. [app/Config/Kint.php] :: namespace Config || use Kint\Parser\ConstructablePluginInterface || use Kint\Renderer\Rich\TabPluginInterface || use Kint\Renderer\Rich\ValuePluginInterface || class Kint public $plugins || public int $maxDepth = 6 || public bool $displayCalledFrom = true || public bool $expanded = false || public string $richTheme = 'aante-light.css' || public bool $richFolder = false || public $richObjectPlugins || public $richTabPlugins || public bool $cliColors = true || public bool $cliForceUTF8 = false || public bool $cliDetectWidth = true || public int $cliMinWidth = 40 || 
26. [app/Config/Logger.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Log\Handlers\FileHandler || use CodeIgniter\Log\Handlers\HandlerInterface || class Logger extends BaseConfig public $threshold = (ENVIRONMENT === 'production') ? 4 : 9 || public string $dateFormat = 'Y-m-d H:i:s' || public array $handlers = [ 
27. [app/Config/Migrations.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Migrations extends BaseConfig public bool $enabled = true || public string $table = 'migrations' || public string $timestampFormat = 'Y-m-d-His_' || 
28. [app/Config/Mimes.php] :: namespace Config || class Mimes public static array $mimes = [ public static function guessTypeFromExtension(string $extension) public static function guessExtensionFromType(string $type, ?string $proposedExtension = null) 
29. [app/Config/Modules.php] :: namespace Config || use CodeIgniter\Modules\Modules as BaseModules || class Modules extends BaseModules public $enabled = true || public $discoverInComposer = true || public $composerPackages = [] || public $aliases = [ 
30. [app/Config/Optimize.php] :: namespace Config || class Optimize public bool $configCacheEnabled = false || public bool $locatorCacheEnabled = false || 
31. [app/Config/Pager.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Pager extends BaseConfig public array $templates = [ public int $perPage = 20 || 
32. [app/Config/Paths.php] :: namespace Config || class Paths public string $systemDirectory = __DIR__ . '/../../vendor/codeigniter4/framework/system' || public string $appDirectory = __DIR__ . '/..' || public string $writableDirectory = __DIR__ . '/../../writable' || public string $testsDirectory = __DIR__ . '/../../tests' || public string $viewDirectory = __DIR__ . '/../Views' || 
33. [app/Config/Publisher.php] :: namespace Config || use CodeIgniter\Config\Publisher as BasePublisher || class Publisher extends BasePublisher public $restrictions = [ 
34. [app/Config/Routes.php] :: namespace Config || use CodeIgniter\Router\RouteCollection || 
35. [app/Config/Routing.php] :: namespace Config || use CodeIgniter\Config\Routing as BaseRouting || class Routing extends BaseRouting public array $routeFiles = [ public string $defaultNamespace = 'App\Controllers' || public string $defaultController = 'Home' || public string $defaultMethod = 'index' || public bool $translateURIDashes = false || public ?string $override404 = null || public bool $autoRoute = false || public bool $prioritize = false || public bool $multipleSegmentsOneParam = false || public array $moduleRoutes = [] || public bool $translateUriToCamelCase = true || 
36. [app/Config/Security.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class Security extends BaseConfig public string $csrfProtection = 'cookie' || public bool $tokenRandomize = false || public string $tokenName = 'csrf_test_name' || public string $headerName = 'X-CSRF-TOKEN' || public string $cookieName = 'csrf_cookie_name' || public int $expires = 7200 || public bool $regenerate = true || public bool $redirect = (ENVIRONMENT === 'production') || 
37. [app/Config/Services.php] :: namespace Config || use CodeIgniter\Config\BaseService || use App\Services\PaginationService || use App\Services\ResponseFormatter || class Services extends BaseService public static function pagination(bool $getShared = true) public static function responseFormatter(bool $getShared = true) public static function register() 
38. [app/Config/Session.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Session\Handlers\BaseHandler || use CodeIgniter\Session\Handlers\FileHandler || class Session extends BaseConfig public string $driver = FileHandler::class || public string $cookieName = 'ci_session' || public int $expiration = 7200 || public string $savePath = WRITEPATH . 'session' || public bool $matchIP = false || public int $timeToUpdate = 300 || public bool $regenerateDestroy = false || public ?string $DBGroup = null || public int $lockRetryInterval = 100_000 || public int $lockMaxRetries = 300 || 
39. [app/Config/Toolbar.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use CodeIgniter\Debug\Toolbar\Collectors\Database || use CodeIgniter\Debug\Toolbar\Collectors\Events || use CodeIgniter\Debug\Toolbar\Collectors\Files || use CodeIgniter\Debug\Toolbar\Collectors\Logs || use CodeIgniter\Debug\Toolbar\Collectors\Routes || use CodeIgniter\Debug\Toolbar\Collectors\Timers || use CodeIgniter\Debug\Toolbar\Collectors\Views || class Toolbar extends BaseConfig public array $collectors = [ public bool $collectVarData = true || public int $maxHistory = 20 || public string $viewsPath = SYSTEMPATH . 'Debug/Toolbar/Views/' || public int $maxQueries = 100 || public array $watchedDirectories = [ public array $watchedExtensions = [ 
40. [app/Config/UserAgents.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || class UserAgents extends BaseConfig public array $platforms = [ public array $browsers = [ public array $mobiles = [ public array $robots = [ 
41. [app/Config/Validation.php] :: namespace Config || use CodeIgniter\Config\BaseConfig || use App\Validators\SlugValidator || use App\Validators\EnumValidator || use App\Validators\DateValidator || use App\Validators\EntityValidator || use App\Validators\FileValidator || use App\Validators\ImageValidator || class Validation extends BaseConfig public $ruleSets = [ public array $customMessages = [ public array $customRules = [ public array $customRules = [ public array $templates = [ public array $apiRules = [ public bool $allowEmptyRules = false || public bool $requireRule = true || public string $errorTemplate = 'App\Views\errors\validation_error_template' || public function getTemplate(string $templateName): ?array public function getApiRules(string $type): ?array 
42. [app/Config/View.php] :: namespace Config || use CodeIgniter\Config\View as BaseView || use CodeIgniter\View\ViewDecoratorInterface || class View extends BaseView public $saveData = true || public $filters = [] || public $plugins = [] || public array $decorators = [] || 
43. [app/Contracts/CacheInterface.php] :: namespace App\Contracts || interface CacheInterface public function get(string $key) || public function set(string $key, $value, ?int $ttl = null): bool || public function delete(string $key): bool || public function clear(): bool || public function has(string $key): bool || public function remember(string $key, callable $callback, ?int $ttl = null) || public function increment(string $key, int $value = 1) || public function decrement(string $key, int $value = 1) || public function getMultiple(array $keys): array || public function setMultiple(array $items, ?int $ttl = null): bool || public function deleteMultiple(array $keys): bool || public function getStats(): array || public function getKey(string $key): string || public function setDefaultTtl(int $ttl): self || public function getDefaultTtl(): int || public function isAvailable(): bool || public function forever(string $key, $value): bool || public function getWithTtl(string $key): ?array || public function tag(string $tag): self || public function flushTag($tags): bool || public function cacheWithContext(string $prefix, array $context, callable $callback, ?int $ttl = null) || public function getHitStats(): array || public function resetStats(): void || 
44. [app/Controllers/Api/BaseApi.php] :: namespace App\Controllers\Api || use App\Controllers\BaseController || use App\Services\ResponseFormatter || use App\Services\PaginationService || use App\Services\ValidationService || use App\Services\TransactionService || use App\Services\AuditService || use CodeIgniter\HTTP\ResponseInterface || use CodeIgniter\API\ResponseTrait || use Config\Services || class BaseApi extends BaseController use ResponseTrait || protected $responseFormatter || protected $paginationService || protected $validationService || protected $transactionService || protected $auditService || protected $validationRules = [] || protected $validationMessages = [] || protected $resourceName = '' || protected $modelClass || protected $serviceClass || public function initController( protected function success($data = null, string $message = 'Success', int $code = 200, array $meta = []): ResponseInterface protected function error(string $message = 'An error occurred', int $code = 500, array $errors = [], array $meta = []): ResponseInterface protected function validationError(array $validationErrors, string $message = 'Validation failed'): ResponseInterface protected function notFound(string $message = 'Resource not found', $identifier = null): ResponseInterface protected function unauthorized(string $message = 'Unauthorized', ?string $reason = null): ResponseInterface protected function forbidden(string $message = 'Forbidden', ?string $permission = null): ResponseInterface protected function created($data = null, string $message = 'Resource created successfully', ?string $location = null): ResponseInterface protected function updated($data = null, string $message = 'Resource updated successfully'): ResponseInterface protected function deleted(string $message = 'Resource deleted successfully'): ResponseInterface protected function paginated( protected function validate($rules, array $messages = []): bool protected function getRequestData(): array protected function getPagination(array $config = []) protected function transaction(callable $callback, array $options = []) protected function adminId(): ?int protected function can(string $permission): bool protected function log( protected function exception(\Throwable $e): ResponseInterface protected function addPaginationHeaders($paginationQuery, int $totalItems): void protected function setDefaultValidationMessages(): void protected function service(string $serviceClass): ?object protected function model(string $modelClass): ?object protected function repository(string $repositoryClass): ?object protected function isApi(): bool protected function requestId(): string protected function rateLimit(string $key, int $limit = 60, int $window = 60): array protected function validationErrors(): array protected function input(?string $key = null) protected function query(?string $key = null) protected function requireAuth(?string $permission = null): int protected function requirePermission(string $permission): void 
45. [app/Controllers/BaseController.php] :: namespace App\Controllers || use CodeIgniter\Controller || use CodeIgniter\HTTP\RequestInterface || use CodeIgniter\HTTP\ResponseInterface || use Psr\Log\LoggerInterface || use CodeIgniter\Session\Session || use CodeIgniter\Validation\Validation || use Config\Services || class BaseController extends Controller protected $request || protected $response || protected $logger || protected $session || protected $validation || protected $helpers = ['url', 'form', 'text'] || protected $viewData = [] || protected $layout = 'template/default' || protected $csrfConfig = [ public function __construct() public function initController( protected function initCsrfProtection(): void protected function render(string $view, array $data = [], bool $return = false) protected function setFlash(string $type, string $message): void protected function getFlash(): ?array protected function setTitle(string $title): self protected function redirectWithMessage(string $route, ?string $message = null, string $type = 'success') protected function validateRequest(array $rules, array $messages = []): bool protected function getValidationErrors(): array protected function isAjax(): bool protected function jsonResponse($data, int $statusCode = 200) protected function jsonSuccess($data = null, string $message = 'Success', int $statusCode = 200) protected function jsonError(string $message = 'Error', array $errors = [], int $statusCode = 400) protected function requireAuth(?string $permission = null) protected function getUserId(): ?int protected function getUser() protected function logActivity(string $action, string $description, array $context = []): void protected function handleException(\Throwable $e, string $message = 'An error occurred') protected function getPaginationParams(): array protected function generatePagination(int $total, int $perPage, int $currentPage, string $baseUrl): array protected function getInput(?string $key = null, $default = null) protected function hasRole(string $role): bool protected function can(string $permission): bool 
46. [app/Controllers/Home.php] :: namespace App\Controllers || class Home extends BaseController public function index(): string 
47. [app/DTOs/Queries/PaginationQuery.php] :: namespace App\DTOs\Queries || use InvalidArgumentException || final class PaginationQuery private int $page = 1 || private int $perPage = 20 || private int $maxPerPage = 100 || private int $defaultPerPage = 20 || private string $cachePrefix = 'page_' || private ?int $cacheTtl = null || public const MIN_PAGE = 1 || public const MIN_PER_PAGE = 1 || public const MAX_PER_PAGE = 200 || // Absolute maximum public const SORT_ASC = 'ASC' || public const SORT_DESC = 'DESC' || private ?int $totalItems = null || private ?int $totalPages = null || private function __construct() {} public static function fromRequest(array $requestData, array $config = []): self public static function default(array $config = []): self private function applyRequestParameters(array $requestData): self private function parsePage($page): int private function parsePerPage($perPage, int $maxPerPage): int public function getOffset(): int public function getLimit(): int public function isFirstPage(): bool public function isDefault(): bool public function validate(): array public function getCacheKey(?string $prefix = null): string public function getCachePattern(?string $prefix = null): string public function getCacheKeyWithTotal(int $totalItems, ?string $prefix = null): string public function withTotalItems(int $totalItems): self public function generateMetadata(?int $totalItems = null): array public function generateLinks(string $baseUrl, array $queryParams = [], ?int $totalItems = null): array private function buildUrl(string $baseUrl, array $params, int $page): string public function pageExists(int $totalItems): bool public function getClampedPage(int $totalItems): int public function nextPage(): self public function previousPage(): self public function withPage(int $page): self public function withPerPage(int $perPage): self public function withCacheConfig(string $prefix, ?int $ttl = null): self public function getPage(): int { return $this->page || } public function getPerPage(): int { return $this->perPage || } public function getMaxPerPage(): int { return $this->maxPerPage || } public function getDefaultPerPage(): int { return $this->defaultPerPage || } public function getCachePrefix(): string { return $this->cachePrefix || } public function getCacheTtl(): ?int { return $this->cacheTtl || } public function getTotalItems(): ?int { return $this->totalItems || } public function getTotalPages(): ?int { return $this->totalPages || } public function toArray(): array public function toString(): string 
48. [app/DTOs/Queries/ProductQuery.php] :: namespace App\DTOs\Queries || use App\Enums\ProductStatus || use InvalidArgumentException || final class ProductQuery private ?array $status = null || private ?array $categoryIds = null || private ?string $search = null || private ?float $minPrice = null || private ?float $maxPrice = null || private ?int $marketplaceId = null || private ?array $badgeIds = null || private ?bool $hasActiveLinks = null || private ?bool $needsPriceUpdate = null || private ?bool $needsLinkValidation = null || private ?string $dateFrom = null || private ?string $dateTo = null || private ?string $dateField = null || private string $sortBy = 'created_at' || private string $sortDirection = 'DESC' || private bool $includeTrashed = false || private bool $adminMode = false || private ?int $verifiedBy = null || private const ALLOWED_SORT_FIELDS = [ private const ALLOWED_DATE_FIELDS = [ private const MAX_SEARCH_LENGTH = 100 || private const MAX_CATEGORIES = 10 || private function __construct() {} public static function fromRequest(array $requestData, bool $adminMode = false): self public static function forPublic(): self public static function forAdmin(): self private function applyFilters(array $filters): self private function parseStatusFilter($statusInput): ?array private function parseIdFilter($idInput): ?array private function sanitizeSearch(string $search): string private function parsePrice($price): ?float private function validateSortField(string $field): string private function validateSortDirection(string $direction): string private function validateDateField(string $field): string public function toRepositoryFilters(): array public function getSortString(): string public function getCacheKey(string $prefix = 'product_query_'): string public function validate(): array public function isPublicQuery(): bool public function isAdminQuery(): bool public function hasFilters(): bool public function toFilterSummary(): array public function getStatus(): ?array { return $this->status || } public function getCategoryIds(): ?array { return $this->categoryIds || } public function getSearch(): ?string { return $this->search || } public function getMinPrice(): ?float { return $this->minPrice || } public function getMaxPrice(): ?float { return $this->maxPrice || } public function getMarketplaceId(): ?int { return $this->marketplaceId || } public function getBadgeIds(): ?array { return $this->badgeIds || } public function getHasActiveLinks(): ?bool { return $this->hasActiveLinks || } public function getNeedsPriceUpdate(): ?bool { return $this->needsPriceUpdate || } public function getNeedsLinkValidation(): ?bool { return $this->needsLinkValidation || } public function getDateFrom(): ?string { return $this->dateFrom || } public function getDateTo(): ?string { return $this->dateTo || } public function getDateField(): ?string { return $this->dateField || } public function getSortBy(): string { return $this->sortBy || } public function getSortDirection(): string { return $this->sortDirection || } public function getIncludeTrashed(): bool { return $this->includeTrashed || } public function getAdminMode(): bool { return $this->adminMode || } public function getVerifiedBy(): ?int { return $this->verifiedBy || } public function with(array $changes): self public function toArray(): array 
49. [app/DTOs/Requests/Category/CreateCategoryRequest.php] :: namespace App\DTOs\Requests\Category || class CreateCategoryRequest public $commissionRate || // Properti umum 
50. [app/DTOs/Requests/Category/UpdateCategoryRequest.php] :: namespace App\DTOs\Requests\Category || class UpdateCategoryRequest public $commissionRate || // Properti umum 
51. [app/DTOs/Requests/Link/BulkLinkUpdateRequest.php] :: namespace App\DTOs\Requests\Link || class BulkLinkUpdateRequest public $commissionRate || // Properti umum 
52. [app/DTOs/Requests/Link/CreateLinkRequest.php] :: namespace App\DTOs\Requests\Link || class CreateLinkRequest public int $product_id || public int $marketplace_id || public string $store_name || public string $price || public string $url || public ?string $rating = null || public ?bool $active = null || public ?int $marketplace_badge_id = null || public ?float $commission_rate = null || public static function rules(): array public static function messages(): array public static function fromRequest(array $requestData): self public function toDatabaseArray(): array public function getCommissionRateDecimal(): ?float public function hasCommissionRate(): bool public function getCommissionRateDisplay(): string public function validate(): array 
53. [app/DTOs/Requests/Link/UpdateLinkRequest.php] :: namespace App\DTOs\Requests\Link || class UpdateLinkRequest public int $link_id || public ?string $store_name = null || public ?string $price = null || public ?string $url = null || public ?string $rating = null || public ?bool $active = null || public ?int $marketplace_badge_id = null || public ?float $commission_rate = null || public function __construct(int $linkId) public static function rules(): array public static function messages(): array public static function fromRequest(int $linkId, array $requestData): self public function getChangedFields(): array public function hasChanges(): bool public function isPriceChanged(): bool public function isCommissionRateChanged(): bool public function getCommissionRateDecimal(): ?float public function getUpdateScenario(): string public function toDatabaseArray(): array public function validate(): array public function getChangesSummary(): string 
54. [app/DTOs/Requests/Product/CreateProductRequest.php] :: namespace App\DTOs\Requests\Product || use App\Enums\ImageSourceType || use App\Enums\ProductStatus || class CreateProductRequest public string $name || public string $slug || public ?string $description = null || public ?int $categoryId = null || public string $marketPrice = '0.00' || public ?string $image = null || public ImageSourceType $imageSourceType || public ProductStatus $status = ProductStatus::DRAFT || public function __construct(array $data = []) private function castValue(string $key, $value) public static function rules(): array public static function messages(): array public function sanitize(): self public function toArray(): array public static function fromRequest(array $requestData): self public function validate(): array private function validateBusinessRules(): array public function getFormattedMarketPrice(): string public function hasImage(): bool public function hasCategory(): bool public function getImageSourceTypeLabel(): string public function getStatusLabel(): string public function toSummary(): array 
55. [app/DTOs/Requests/Product/PublishProductRequest.php] :: namespace App\DTOs\Requests\Product || use App\Enums\ProductStatus || use DateTimeImmutable || use DateTimeZone || final class PublishProductRequest private readonly int $productId || private readonly int $adminId || private readonly ?DateTimeImmutable $scheduledAt || private readonly ?string $notes || private readonly bool $forcePublish || private function __construct( public static function fromRequest(int $productId, int $adminId, array $requestData): self public static function forImmediatePublish(int $productId, int $adminId, ?string $notes = null): self public static function forScheduledPublish( public static function forForcePublish(int $productId, int $adminId, ?string $notes = null): self public static function rules(): array public static function messages(): array public function validate(): array public function validatePrerequisites(array $productData, array $linksData = []): array public function toDatabaseArray(): array public function toAdminActionLog(array $oldProductData): array private function generateChangeSummary(array $oldProductData): string public function getProductId(): int public function getAdminId(): int public function getScheduledAt(): ?DateTimeImmutable public function isScheduled(): bool public function isImmediate(): bool public function isForcePublish(): bool public function getNotes(): ?string public function getPublishTimestamp(): DateTimeImmutable public function toArray(): array public function withScheduledAt(DateTimeImmutable $newScheduledAt): self public function withNotes(string $notes): self 
56. [app/DTOs/Requests/Product/UpdateProductRequest.php] :: namespace App\DTOs\Requests\Product || use App\Enums\ImageSourceType || use App\Enums\ProductStatus || class UpdateProductRequest public int $productId || public ?string $name = null || public ?string $slug = null || public ?string $description = null || public ?int $categoryId = null || public ?string $marketPrice = null || public ?string $image = null || public ?ImageSourceType $imageSourceType = null || public ?ProductStatus $status = null || public ?string $imagePath = null || public function __construct(int $productId, array $data = []) private function castValue(string $key, $value) public static function rules(): array public static function messages(): array public function sanitize(): self public function toArray(): array public static function fromRequest(int $productId, array $requestData): self public function validate(): array private function validateBusinessRules(): array public function hasChanges(): bool public function getChangedFields(): array public function isFieldChanged(string $field): bool public function getFormattedMarketPrice(): ?string public function hasImageData(): bool public function getImageSourceTypeLabel(): ?string public function getStatusLabel(): ?string public function toChangeSummary(): array public function merge(self $other): self 
57. [app/DTOs/Responses/CategoryResponse.php] :: namespace App\DTOs\Responses || class CategoryResponse public static function fromEntity($entity): self public static function fromTree(array $tree): self public static function create(): self 
58. [app/DTOs/Responses/CategoryTreeResponse.php] :: namespace App\DTOs\Responses || class CategoryTreeResponse public static function fromEntity($entity): self public static function fromTree(array $tree): self public static function create(): self 
59. [app/DTOs/Responses/LinkAnalyticsResponse.php] :: namespace App\DTOs\Responses || class LinkAnalyticsResponse public static function fromEntity($entity): self public static function fromTree(array $tree): self public static function create(): self 
60. [app/DTOs/Responses/LinkResponse.php] :: namespace App\DTOs\Responses || use App\Entities\Link || class LinkResponse public int $id || public int $product_id || public int $marketplace_id || public string $store_name || public string $price || public string $formatted_price || public ?string $url || public string $rating || public string $formatted_rating || public string $star_rating_html || public bool $active || public int $sold_count || public string $formatted_sold_count || public int $clicks || public ?string $last_price_update || public ?string $last_validation || public string $affiliate_revenue || public string $formatted_revenue || public ?int $marketplace_badge_id || public ?string $created_at || public ?string $updated_at || public string $commission_rate_display || public string $commission_rate_percent || public bool $is_default_commission || public string $revenue_per_click || public static function fromEntity(Link $link): self public static function collection(array $links): array public function toArray(): array public function toJson(bool $pretty = false): string public function toSummary(): array public function toDetail(): array public function needsPriceUpdate(): bool public function needsValidation(): bool public function getClickThroughRate(float $totalProductViews = 0): float public function getCommissionInfo(): array public function getStatusBadge(): array 
61. [app/DTOs/Responses/ProductDetailResponse.php] :: namespace App\DTOs\Responses || use App\Entities\Product || use App\Entities\Category || use App\Entities\Link || use App\Entities\Marketplace || use App\Entities\Badge || use App\Entities\MarketplaceBadge || use App\Entities\Admin || use App\Enums\ProductStatus || use App\Enums\ImageSourceType || use DateTimeImmutable || use InvalidArgumentException || class ProductDetailResponse extends ProductResponse public $currency || public $verifiedAt || public $verifiedBy || public $adminMode || public $id || public $slug || public $baseImageUrl || private ?array $category = null || private array $links = [] || private array $marketplaces = [] || private array $badges = [] || private array $marketplaceBadges = [] || private ?array $verifiedByAdmin = null || private array $statistics = [] || private array $recentActions = [] || private array $loadedRelations = [] || private bool $loadCategory = false || private bool $loadLinks = false || private bool $loadMarketplaces = false || private bool $loadBadges = false || private bool $loadMarketplaceBadges = false || private bool $loadVerificationInfo = false || private bool $loadStatistics = false || private bool $loadRecentActions = false || private ?array $formattedRelations = null || private function __construct() {} public static function fromEntityWithRelations(Product $product, array $relations = [], array $config = []): self public static function withAllRelations(Product $product, array $allRelations, array $config = []): self private function applyRelationConfig(array $config): void private function loadRelations(array $relations): void private function loadAllRelations(array $allRelations): void private function loadCategoryRelation($categoryData): void private function loadLinksRelation(array $linksData): void private function loadMarketplacesRelation(array $marketplacesData): void private function loadBadgesRelation(array $badgesData): void private function loadMarketplaceBadgesRelation(array $badgesData): void private function loadVerificationInfo($adminData): void private function loadStatistics(array $statsData): void private function loadRecentActions(array $actionsData): void private function getFormattedCategory(): ?array private function getFormattedLinks(): array private function formatLinkPrice(string $price): string private function generateStarRating(string $rating): string private function formatMarketplaceInfo($marketplace): ?array private function formatMarketplaceBadgeInfo($badge): ?array private function getFormattedBadges(): array private function getFormattedMarketplaces(): array private function getFormattedVerificationInfo(): ?array private function getFormattedStatistics(): array private function calculateAverageRating(): float private function findLowestPrice(): ?array private function findHighestPrice(): ?array private function getFormattedRecentActions(): array private function getAllFormattedRelations(): array public function toDetailArray(): array public function toArray(): array public function hasRelation(string $relation): bool public function getLoadedRelationsCount(): int public function getDetailCacheKey(string $prefix = 'product_detail_'): string public function getDetailSummary(): array public function getCategory(): ?array { return $this->category || } public function getLinks(): array { return $this->links || } public function getMarketplaces(): array { return $this->marketplaces || } public function getBadges(): array { return $this->badges || } public function getMarketplaceBadges(): array { return $this->marketplaceBadges || } public function getVerifiedByAdmin(): ?array { return $this->verifiedByAdmin || } public function getStatistics(): array { return $this->statistics || } public function getRecentActions(): array { return $this->recentActions || } public function getLoadedRelations(): array { return $this->loadedRelations || } public function isLoadCategory(): bool { return $this->loadCategory || } public function isLoadLinks(): bool { return $this->loadLinks || } public function isLoadMarketplaces(): bool { return $this->loadMarketplaces || } public function isLoadBadges(): bool { return $this->loadBadges || } public function isLoadMarketplaceBadges(): bool { return $this->loadMarketplaceBadges || } public function isLoadVerificationInfo(): bool { return $this->loadVerificationInfo || } public function isLoadStatistics(): bool { return $this->loadStatistics || } public function isLoadRecentActions(): bool { return $this->loadRecentActions || } public function withRelations(array $newRelations): self public function withRelationConfig(array $relationConfig): self public function toDetailJson(bool $pretty = false): string 
62. [app/DTOs/Responses/ProductResponse.php] :: namespace App\DTOs\Responses || use App\Entities\Product || use App\Enums\ProductStatus || use App\Enums\ImageSourceType || use DateTimeImmutable || use InvalidArgumentException || class ProductResponse private int $id || private string $name || private string $slug || private ?string $description = null || private string $marketPrice || private int $viewCount = 0 || private ?string $imageUrl = null || private ?string $imageSourceType = null || private string $status || private ?string $statusLabel = null || private ?string $statusColorClass = null || private ?int $categoryId = null || private ?string $categoryName = null || private ?string $categorySlug = null || private ?string $categoryIcon = null || private ?string $createdAt = null || private ?string $updatedAt = null || private ?string $publishedAt = null || private ?string $verifiedAt = null || private ?int $verifiedBy = null || private ?string $lastPriceCheck = null || private ?string $lastLinkCheck = null || private ?string $deletedAt = null || private ?string $imagePath = null || private bool $adminMode = false || private bool $includeTrashed = false || private string $baseImageUrl = '' || private string $currency = 'Rp' || private bool $formatPrices = true || private ?array $formattedCache = null || private function __construct() {} public static function fromEntity(Product $product, array $config = []): self public static function fromArray(array $data, array $config = []): self public static function collection(array $items, array $config = []): array private function applyConfiguration(array $config): void private function populateFromEntity(Product $product): void private function populateFromArray(array $data): void private function resolveImageUrl(Product $product): ?string private function resolveImageUrlFromArray(array $data): ?string private function formatTimestamp(?DateTimeImmutable $timestamp): ?string private function formatTimestampFromString(?string $timestamp): ?string public function getFormattedMarketPrice(): string public function getNumericMarketPrice(): float public function getFormattedViewCount(): string public function isPublished(): bool public function hasImage(): bool public function hasCategory(): bool public function getCategoryInfo(): ?array public function getStatusInfo(): array public function getImageInfo(): array public function toPublicArray(): array public function toAdminArray(): array public function toArray(): array public function getCacheKey(string $prefix = 'product_response_'): string public function getSummary(): array public function getId(): int { return $this->id || } public function getName(): string { return $this->name || } public function getSlug(): string { return $this->slug || } public function getDescription(): ?string { return $this->description || } public function getMarketPrice(): string { return $this->marketPrice || } public function getViewCount(): int { return $this->viewCount || } public function getImageUrl(): ?string { return $this->imageUrl || } public function getImageSourceType(): ?string { return $this->imageSourceType || } public function getStatus(): string { return $this->status || } public function getStatusLabel(): ?string { return $this->statusLabel || } public function getStatusColorClass(): ?string { return $this->statusColorClass || } public function getCategoryId(): ?int { return $this->categoryId || } public function getCategoryName(): ?string { return $this->categoryName || } public function getCategorySlug(): ?string { return $this->categorySlug || } public function getCategoryIcon(): ?string { return $this->categoryIcon || } public function getCreatedAt(): ?string { return $this->createdAt || } public function getUpdatedAt(): ?string { return $this->updatedAt || } public function getPublishedAt(): ?string { return $this->publishedAt || } public function getVerifiedAt(): ?string { return $this->verifiedAt || } public function getVerifiedBy(): ?int { return $this->verifiedBy || } public function getLastPriceCheck(): ?string { return $this->lastPriceCheck || } public function getLastLinkCheck(): ?string { return $this->lastLinkCheck || } public function getDeletedAt(): ?string { return $this->deletedAt || } public function getImagePath(): ?string { return $this->imagePath || } public function isAdminMode(): bool { return $this->adminMode || } public function getBaseImageUrl(): string { return $this->baseImageUrl || } public function getCurrency(): string { return $this->currency || } public function withConfig(array $config): self public function withCategory(array $category): self public function toJson(bool $pretty = false): string 
63. [app/Entities/Admin.php] :: namespace App\Entities || use DateTimeImmutable || class Admin extends BaseEntity private string $username || private string $email || private string $password_hash = '' || private string $name || private string $role = 'admin' || private bool $active = true || private ?DateTimeImmutable $last_login = null || private int $login_attempts = 0 || private ?string $password = null || public function __construct(string $username, string $email, string $name) public function getUsername(): string public function getEmail(): string public function getPasswordHash(): string public function getName(): string public function getRole(): string public function isActive(): bool public function getLastLogin(): ?DateTimeImmutable public function getLoginAttempts(): int public function getPassword(): ?string public function setUsername(string $username): self public function setEmail(string $email): self public function setPasswordHash(string $password_hash): self public function setName(string $name): self public function setRole(string $role): self public function setActive(bool $active): self public function setLastLogin($last_login): self public function setLoginAttempts(int $login_attempts): self public function setPassword(?string $password): self public function isSuperAdmin(): bool public function isRegularAdmin(): bool public function activate(): self public function deactivate(): self public function promoteToSuperAdmin(): self public function demoteToAdmin(): self public function recordLogin(): self public function recordFailedLogin(): self public function resetLoginAttempts(): self public function isLocked(int $maxAttempts = 5): bool public function passwordNeedsRehash(): bool public function verifyPassword(string $password): bool public function setPasswordWithHash(string $password, array $options = ['cost' => 12]): self public function canBeArchivedBy(int $currentAdminId, int $superAdminCount = 1): array public function canBeDeletedBy(int $currentAdminId, int $superAdminCount = 1): array public function getInitials(): string public function getRoleColorClass(): string public function getRoleLabel(): string public function getStatusLabel(): string public function getStatusColorClass(): string public function getFormattedLastLogin(): string public function isRecentlyActive(): bool public function validate(): array public function prepareForSave(bool $isUpdate = false): void public function toArray(): array public static function fromArray(array $data): static public static function createSystemAdmin(): static public static function createSample(): static 
64. [app/Entities/AuditLog.php] :: namespace App\Entities || use DateTimeImmutable || class AuditLog public $admin_name || public $admin_username || private ?int $id = null || private ?int $admin_id = null || private string $action_type || private string $entity_type || private int $entity_id || private ?string $old_values = null || private ?string $new_values = null || private ?string $changes_summary = null || private ?string $ip_address = null || private ?string $user_agent = null || private ?DateTimeImmutable $performed_at = null || public function __construct(string $action_type, string $entity_type, int $entity_id) public function getId(): ?int public function getAdminId(): ?int public function getActionType(): string public function getEntityType(): string public function getEntityId(): int public function getOldValues(): ?string public function getNewValues(): ?string public function getChangesSummary(): ?string public function getIpAddress(): ?string public function getUserAgent(): ?string public function getPerformedAt(): ?DateTimeImmutable public function getAdminName(): ?string public function getAdminUsername(): ?string public function setId(?int $id): self public function setAdminId(?int $admin_id): self public function setActionType(string $action_type): self public function setEntityType(string $entity_type): self public function setEntityId(int $entity_id): self public function setOldValues(?string $old_values): self public function setNewValues(?string $new_values): self public function setChangesSummary(?string $changes_summary): self public function setIpAddress(?string $ip_address): self public function setUserAgent(?string $user_agent): self public function setPerformedAt($performed_at): self public function setAdminName(?string $admin_name): self public function setAdminUsername(?string $admin_username): self public function hasOldValues(): bool public function hasNewValues(): bool public function getOldValuesArray(): ?array public function getNewValuesArray(): ?array public function wasPerformedBy(int $adminId): bool public function wasSystemAction(): bool public function getFormattedPerformedAt(string $format = 'Y-m-d H:i:s'): string public function getActionTypeLabel(): string public function getActionIcon(): string public function getActionColorClass(): string public function getAdminDisplayName(): string public function getTimeAgo(): string public function isRecent(): bool public function getEntityReference(): string public function summaryContains(string $search): bool public function getTruncatedSummary(int $length = 100): string public function validate(): array private function isValidJson(string $json): bool public function toArray(): array public static function fromArray(array $data): static public static function createSample(): static 
65. [app/Entities/Badge.php] :: namespace App\Entities || use DateTimeImmutable || class Badge extends BaseEntity private string $label || private ?string $color = null || public function __construct(string $label) public function getLabel(): string public function getColor(): ?string public function setLabel(string $label): self public function setColor(?string $color): self public function hasColor(): bool public function getColorStyle(): string public function getTailwindClasses(): string public function getIcon(): string public function isInUse(): bool public function canBeArchived(): bool public function archive(): self public function restore(): self public function validate(): array public function toArray(): array public static function fromArray(array $data): static public static function createCommon(string $type): ?static public static function createAllCommon(): array public static function createSample(): static 
66. [app/Entities/BaseEntity.php] :: namespace App\Entities || use App\Entities\Traits\TimestampableTrait || use App\Entities\Traits\SoftDeletableTrait || use DateTimeImmutable || abstract class BaseEntity use TimestampableTrait || use SoftDeletableTrait || protected ?int $id = null || private ?array $changes = null || public function getId(): ?int public function setId(?int $id): void public function isNew(): bool public function exists(): bool public function initialize(): void public function markAsUpdated(): void public function restore(): self protected function trackChange(string $property, mixed $oldValue, mixed $newValue): void public function getChanges(): array public function hasChanges(): bool public function clearChanges(): void public function getChangesSummary(): array private function formatChangeValue(mixed $value): string protected function validateStateTransition( public function prepareForSave(bool $isUpdate = false): void public function validate(): array public function canBeArchived(): bool public function canBeRestored(): bool public function getEntityType(): string public function getAuditIdentifier(): string public function createSnapshot(): array public function compareWith(BaseEntity $other): array abstract public function toArray(): array || abstract public static function fromArray(array $data): static || 
67. [app/Entities/Category.php] :: namespace App\Entities || use DateTimeImmutable || class Category extends BaseEntity private string $name || private string $slug || private string $icon = 'fas fa-folder' || private int $sort_order = 0 || private bool $active = true || public function __construct(string $name, string $slug) public function getName(): string public function getSlug(): string public function getIcon(): string public function getSortOrder(): int public function isActive(): bool public function setName(string $name): self public function setSlug(string $slug): self public function setIcon(string $icon): self public function setSortOrder(int $sort_order): self public function setActive(bool $active): self public function activate(): self public function deactivate(): self public function canBeDeleted(): bool public function canBeArchived(): bool public function archive(): self public function restore(): self public function isInUse(): bool public function validate(): array public function getIconHtml(): string public function getDisplayClasses(): string public function toArray(): array public static function fromArray(array $data): static public static function createSample(): static 
68. [app/Entities/Link.php] :: namespace App\Entities || use DateTimeImmutable || class Link extends BaseEntity public $created_at || public $updated_at || public $deleted_at || private int $product_id || private int $marketplace_id || private string $store_name || private string $price = '0.00' || private ?string $url = null || private string $rating = '0.00' || private bool $active = true || private int $sold_count = 0 || private int $clicks = 0 || private ?DateTimeImmutable $last_price_update = null || private ?DateTimeImmutable $last_validation = null || private string $affiliate_revenue = '0.00' || private ?int $marketplace_badge_id = null || public const DEFAULT_COMMISSION_RATE = 0.02 || // 2% public function __construct(int $product_id, int $marketplace_id, string $store_name) public function getProductId(): int public function getMarketplaceId(): int public function getStoreName(): string public function getPrice(): string public function getUrl(): ?string public function getRating(): string public function isActive(): bool public function getSoldCount(): int public function getClicks(): int public function getLastPriceUpdate(): ?DateTimeImmutable public function getLastValidation(): ?DateTimeImmutable public function getAffiliateRevenue(): string public function getMarketplaceBadgeId(): ?int public function setProductId(int $product_id): self public function setMarketplaceId(int $marketplace_id): self public function setStoreName(string $store_name): self public function setPrice(string $price): self public function setUrl(?string $url): self public function setRating(string $rating): self public function setActive(bool $active): self public function setSoldCount(int $sold_count): self public function setClicks(int $clicks): self public function setLastPriceUpdate(?DateTimeImmutable $last_price_update): self public function setLastValidation(?DateTimeImmutable $last_validation): self public function setAffiliateRevenue(string $affiliate_revenue): self public function setMarketplaceBadgeId(?int $marketplace_badge_id): self public function activate(): self public function deactivate(): self public function incrementClicks(): self public function incrementSoldCount(int $increment = 1): self public function addAffiliateRevenue(string $amount): self public function updatePrice(string $newPrice, bool $autoUpdateTimestamp = true): self public function markAsValidated(): self public function markAsInvalid(): self public function hasMarketplaceBadge(): bool public function needsPriceUpdate(): bool public function needsValidation(): bool public function isValid(): bool public function isAffiliateActive(): bool public function getFormattedPrice(): string public function getFormattedRating(): string public function getFormattedAffiliateRevenue(): string public function getStarRatingHtml(): string public function getFormattedSoldCount(): string public function getClickThroughRate(float $totalProductViews = 0): float public function getRevenuePerClick(): string public function archive(): self public function calculateRevenue(?float $customRate = null): string public function getImpliedCommissionRate(): float public function toArray(): array public static function fromArray(array $data): static public static function createSample(int $productId = 1, int $marketplaceId = 1): static 
69. [app/Entities/Marketplace.php] :: namespace App\Entities || use DateTimeImmutable || class Marketplace extends BaseEntity private string $name || private string $slug || private ?string $icon = null || private string $color = '#64748b' || // Default slate-500 private bool $active = true || public function __construct(string $name, string $slug) public function getName(): string public function getSlug(): string public function getIcon(): ?string public function getColor(): string public function isActive(): bool public function setName(string $name): self public function setSlug(string $slug): self public function setIcon(?string $icon): self public function setColor(string $color): self public function setActive(bool $active): self public function activate(): self public function deactivate(): self public function hasIcon(): bool public function getCssClasses(): string public function getColorStyle(): string public function getBackgroundStyle(): string public function isInUse(): bool public function canBeArchived(): bool public function archive(): self public function restore(): self public function validate(): array public function toArray(): array public static function fromArray(array $data): static public static function createDefault(): static public static function createSamples(): array 
70. [app/Entities/MarketplaceBadge.php] :: namespace App\Entities || use DateTimeImmutable || class MarketplaceBadge extends BaseEntity private string $label || private ?string $icon = null || private ?string $color = null || public function __construct(string $label) public function getLabel(): string public function getIcon(): ?string public function getColor(): ?string public function setLabel(string $label): self public function setIcon(?string $icon): self public function setColor(?string $color): self public function hasIcon(): bool public function hasColor(): bool public function getColorStyle(): string public function getDisplayHtml(): string public function getTailwindClasses(): string public function isAssigned(): bool public function canBeArchived(): bool public function archive(): self public function restore(): self public function validate(): array public function toArray(): array public static function fromArray(array $data): static public static function createCommon(string $type): ?static public static function createAllCommon(): array public static function createSample(): static 
71. [app/Entities/Product.php] :: namespace App\Entities || use App\Enums\ProductStatus || use App\Enums\ImageSourceType || use DateTimeImmutable || class Product extends BaseEntity private ?int $category_id = null || private string $slug || private ?string $image = null || private string $name || private ?string $description = null || private float $market_price = '0.00' || private int $view_count = 0 || private ?string $image_path = null || private ImageSourceType $image_source_type = ImageSourceType::URL || private ProductStatus $status = ProductStatus::DRAFT || private ?DateTimeImmutable $published_at = null || private ?DateTimeImmutable $verified_at = null || private ?int $verified_by = null || private ?DateTimeImmutable $last_price_check = null || private ?DateTimeImmutable $last_link_check = null || public function __construct(string $name, string $slug) public function getCategoryId(): ?int public function getSlug(): string public function getImage(): ?string public function getName(): string public function getDescription(): ?string public function getMarketPrice(): string public function getViewCount(): int public function getImagePath(): ?string public function getImageSourceType(): ImageSourceType public function getStatus(): ProductStatus public function getPublishedAt(): ?DateTimeImmutable public function getVerifiedAt(): ?DateTimeImmutable public function getVerifiedBy(): ?int public function getLastPriceCheck(): ?DateTimeImmutable public function getLastLinkCheck(): ?DateTimeImmutable public function setCategoryId(?int $category_id): self public function setSlug(string $slug): self public function setImage(?string $image): self public function setName(string $name): self public function setDescription(?string $description): self public function setMarketPrice(float $market_price): self public function setViewCount(int $view_count): self public function setImagePath(?string $image_path): self public function setImageSourceType(ImageSourceType $image_source_type): self public function setStatus(ProductStatus $status): self public function setPublishedAt(?DateTimeImmutable $published_at): self public function setVerifiedAt(?DateTimeImmutable $verified_at): self public function setVerifiedBy(?int $verified_by): self public function setLastPriceCheck(?DateTimeImmutable $last_price_check): self public function setLastLinkCheck(?DateTimeImmutable $last_link_check): self public function incrementViewCount(): self public function requestVerification(): self public function verify(int $adminId): self public function publish(): self public function archive(): self public function restore(): self public function isPublished(): bool public function isDraft(): bool public function isPendingVerification(): bool public function isVerified(): bool public function isArchived(): bool public function markPriceChecked(): self public function markLinksChecked(): self public function needsPriceUpdate(): bool public function needsLinkValidation(): bool public function getDisplayImageUrl(): ?string public function getFormattedMarketPrice(): string public function getStatusLabel(): string public function getStatusColorClass(): string public function getStatusIcon(): string public function toArray(): array public static function fromArray(array $data): static public static function createSample(): static 
72. [app/Entities/ProductBadge.php] :: namespace App\Entities || use DateTimeImmutable || class ProductBadge private int $product_id || private int $badge_id || private ?DateTimeImmutable $assigned_at = null || public function getAssignedAt(): ?DateTimeImmutable { public function assignedBy(int $adminId): self { public function __construct(int $product_id, int $badge_id) public function getProductId(): int public function setProductId(int $product_id): void public function getBadgeId(): int public function setBadgeId(int $badge_id): void public function isForProduct(int $product_id): bool public function isForBadge(int $badge_id): bool public function getCompositeKey(): array public function equals(ProductBadge $other): bool public function toArray(): array public static function fromArray(array $data): static public static function createSample(): static 
73. [app/Entities/Traits/SoftDeletableTrait.php] :: namespace App\Entities\Traits || use DateTimeImmutable || trait SoftDeletableTrait private ?DateTimeImmutable $deleted_at = null || public function getDeletedAt(): ?DateTimeImmutable public function setDeletedAt(?DateTimeImmutable $deleted_at): void public function isDeleted(): bool public function softDelete(): void public function restore(): void public function wasDeletedWithinDays(int $days): bool public function getDaysSinceDeletion(): ?int 
74. [app/Entities/Traits/TimestampableTrait.php] :: namespace App\Entities\Traits || use DateTimeImmutable || trait TimestampableTrait private ?DateTimeImmutable $created_at = null || private ?DateTimeImmutable $updated_at = null || public function getCreatedAt(): ?DateTimeImmutable public function setCreatedAt(?DateTimeImmutable $created_at): void public function getUpdatedAt(): ?DateTimeImmutable public function setUpdatedAt(?DateTimeImmutable $updated_at): void public function touch(): void public function initializeTimestamps(): void public function isOlderThanDays(int $days): bool 
75. [app/Enums/ImageSourceType.php] :: namespace App\Enums || enum ImageSourceType: string public static function all(): array public function requiresLocalStorage(): bool public function requiresUrlValidation(): bool public function getStoragePath(): string public function getMaxFileSize(): ?int public function getAllowedExtensions(): array public function getValidationRules(): array public function label(): string public function description(): string public function icon(): string public function colorClass(): string public function isRecommendedForVerification(): bool public function generateFilename(string $productSlug, string $extension): string public function getDisplaySource(string $identifier): string public function validateSource(string $source): bool public function getRecommendedDimensions(): array public function shouldResize(): bool 
76. [app/Enums/ProductStatus.php] :: namespace App\Enums || enum ProductStatus: string public static function all(): array public static function activeStatuses(): array public static function pendingActionStatuses(): array public static function editableStatuses(): array public function canBePublished(): bool public function isLive(): bool public function nextStatus(): ?ProductStatus public function previousStatus(): ?ProductStatus public function label(): string public function colorClass(): string public function icon(): string public function canTransitionTo(ProductStatus $targetStatus): bool public function allowedTransitions(): array 
77. [app/Exceptions/CategoryNotFoundException.php] :: namespace App\Exceptions || use RuntimeException || class CategoryNotFoundException extends RuntimeException public static function forId(int $id): self 
78. [app/Exceptions/DomainException.php] :: namespace App\Exceptions || use Throwable || class DomainException extends \RuntimeException protected string $errorCode = 'DOMAIN_ERROR' || protected array $details = [] || protected int $httpStatusCode = 400 || public function __construct( public function getErrorCode(): string public function getDetails(): array public function getHttpStatusCode(): int public function withDetails(array $details): self public function toArray(): array public function toJson(): string public function toLogContext(): array protected function generateTraceId(): string public function hasDetail(string $key): bool public function getDetail(string $key, $default = null) public function toString(): string public function isClientError(): bool public function isServerError(): bool 
79. [app/Exceptions/InvalidArgumentException.php] :: namespace App\Exceptions || use Throwable || class InvalidArgumentException extends \InvalidArgumentException protected string $errorCode = 'INVALID_ARGUMENT' || protected array $context = [] || protected int $httpStatusCode = 400 || public function __construct( public function getErrorCode(): string public function getContext(): array public function getHttpStatusCode(): int public function setHttpStatusCode(int $httpStatusCode): self public static function forInvalidValue(string $argumentName, $actualValue, $expectedType): self public static function forMissingArgument(string $argumentName): self public static function forOutOfRange(string $argumentName, $value, $min, $max): self public static function forInvalidOption(string $argumentName, $value, array $allowedValues): self public function toArray(): array public function toJson(): string public function toLogContext(): array public function isClientError(): bool public function isServerError(): bool 
80. [app/Exceptions/LinkNotFoundException.php] :: namespace App\Exceptions || use RuntimeException || class LinkNotFoundException extends RuntimeException public static function forId(int $id): self 
81. [app/Exceptions/ProductNotFoundException.php] :: namespace App\Exceptions || class ProductNotFoundException extends DomainException protected const ERROR_CODE = 'PRODUCT_NOT_FOUND' || public function __construct( public static function forId(int $productId): self public static function forSlug(string $slug): self public static function forStatus(int $productId, string $status): self public function hasProductId(): bool public function getProductId(): ?int public function getSearchMethod(): ?string public function getSuggestions(): array public function toLogContext(): array public function toArray(): array 
82. [app/Exceptions/ValidationException.php] :: namespace App\Exceptions || use App\Entities\BaseEntity || use Throwable || class ValidationException extends DomainException protected const ERROR_CODE = 'VALIDATION_ERROR' || protected array $errors = [] || public function __construct( public static function fromCodeIgniterValidation(array $validationErrors, string $entityName = 'Entity'): self public static function fromEntityValidation(BaseEntity $entity, array $validationResult): self public static function forField(string $field, string $message, array $additionalErrors = []): self public static function forBusinessRule(string $businessRule, string $message, array $context = []): self public function getErrors(): array public function getFieldErrors(string $field): array public function hasFieldErrors(string $field): bool public function countErrors(): int public function getErrorFields(): array public function merge(ValidationException $other): self public function toLogContext(): array public function toArray(): array public function isSimpleValidation(): bool public function getFirstError(): ?string public function getFirstErrorField(): ?string 
83. [app/Models/AdminModel.php] :: namespace App\Models || use App\Entities\Admin || use CodeIgniter\Exceptions\ModelException || use Exception || class AdminModel extends BaseModel protected $table = 'admins' || protected $primaryKey = 'id' || protected $returnType = Admin::class || protected $allowedFields = [ protected $validationRules = [ protected $validationMessages = [ public const MAX_LOGIN_ATTEMPTS = 5 || public const LOCKOUT_DURATION = 15 || public const PASSWORD_OPTIONS = [ protected function beforeInsert(array $data): array protected function beforeUpdate(array $data): array public function authenticate(string $identifier, string $password, string $ipAddress) public function verifyPassword(string $password, string $hash): bool public function hashPassword(string $password): string public function passwordNeedsRehash(string $hash): bool public function updatePassword(int $adminId, string $newPassword): bool public function incrementLoginAttempts(int $adminId): bool public function resetLoginAttempts(int $adminId): bool public function updateLastLogin(int $adminId): bool public function isAccountLocked(Admin $admin): bool public function getLockoutRemaining(Admin $admin): ?int public function findByUsername(string $username): ?Admin public function findByEmail(string $email): ?Admin public function findAllActive(): array public function findSuperAdmins(): array public function activate(int $adminId): bool public function deactivate(int $adminId): bool public function promoteToSuperAdmin(int $adminId): bool public function demoteToAdmin(int $adminId): bool public function canDelete(int $adminId): array public function createAdmin(array $data) public function updateProfile(int $adminId, array $data): bool public function countTotal(): int public function countActive(): int public function getDashboardStats(): array public function searchAdmins(array $filters = [], int $limit = 50, int $offset = 0): array public function delete($id = null, bool $purge = false) public function generateRandomPassword(int $length = 12): string public function validateAdminData(array $data, int $adminId): array 
84. [app/Models/AuditLogModel.php] :: namespace App\Models || use App\Entities\AuditLog || use CodeIgniter\I18n\Time || class AuditLogModel extends BaseModel protected $table = 'admin_actions' || protected $primaryKey = 'id' || protected $returnType = AuditLog::class || protected $allowedFields = [ protected $useTimestamps = false || protected $useSoftDeletes = false || protected $orderBy = 'performed_at DESC' || public const ACTION_TYPES = [ public const ENTITY_TYPES = [ protected function beforeInsert(array $data): array public function logAction(array $logData) public function logCrudOperation( public function logStateTransition( public function logLogin(int $adminId, bool $success = true, ?string $reason = null) public function logLogout(int $adminId) public function getEntityLogs(string $entityType, int $entityId, int $limit = 50, int $offset = 0): array public function getAdminLogs(int $adminId, int $limit = 50, int $offset = 0): array public function searchLogs(array $filters = [], int $limit = 50, int $offset = 0): array public function getRecentActivity(int $limit = 20): array public function getStatistics(string $period = 'month'): array public function cleanupOldLogs(int $daysOld = 365): int public function exportToCsv(array $filters = []): string private function prepareEntityData($entity): array private function generateChangesSummary( private function getDateCondition(string $period): string private function logToFile(int $logId, array $data, string $note = ''): void private function clearAuditCache(array $logData): void public function delete($id = null, bool $purge = false): never public function update($id = null, $data = null): bool public function isValidActionType(string $actionType): bool public function isValidEntityType(string $entityType): bool 
85. [app/Models/BadgeModel.php] :: namespace App\Models || use App\Entities\Badge || class BadgeModel extends BaseModel protected $table = 'badges' || protected $primaryKey = 'id' || protected $returnType = Badge::class || protected $allowedFields = [ protected $validationRules = [ protected $orderBy = [ public function findCommon(bool $activeOnly = true): array public function findActive(int $limit = 50): array public function withProductCount(int $limit = 50): array public function findByLabel(string $label, bool $activeOnly = true): ?Badge private function attachProductCounts(array &$badges): void public function canDelete(int $badgeId): array public function getStats(): array public function findOrCreate(string $label, ?string $color = null): Badge public function createDefaultBadges(): array private function clearBadgeCaches(): void public function findByIds(array $badgeIds, bool $activeOnly = true): array public function search(string $keyword, int $limit = 20):array 
86. [app/Models/BaseModel.php] :: namespace App\Models || use CodeIgniter\Model || use App\Entities\BaseEntity || abstract class BaseModel extends Model protected const DEFAULT_CACHE_TTL = 3600 || protected $useSoftDeletes = true || protected $useTimestamps = true || protected $createdField = 'created_at' || protected $updatedField = 'updated_at' || protected $deletedField = 'deleted_at' || protected $validationRules = [] || protected $validationMessages = [] || protected $skipValidation = false || protected function getCache() protected function cached(string $cacheKey, callable $callback, ?int $ttl = null) protected function clearCache(string $cacheKey): bool protected function cacheKey(string $suffix): string public function findActiveById($id) public function delete($id = null, bool $purge = false) public function archive($id): bool public function restore($id): bool public function paginateSimple(int $perPage = 20, ?int $page = null): array public function updateIfChanged($id = null, array $data = []): bool public function bulkUpdate(array $ids, array $data): int public function countActive(): int public function validateData(array $data): array 
87. [app/Models/CategoryModel.php] :: namespace App\Models || use App\Entities\Category || class CategoryModel extends BaseModel protected $table = 'categories' || protected $primaryKey = 'id' || protected $returnType = Category::class || protected $allowedFields = [ protected $validationRules = [ protected $orderBy = [ public function findActive(int $limit = 15): array public function withProductCount(int $limit = 15): array public function updateSortOrder(array $orderData): bool public function findBySlug(string $slug, bool $activeOnly = true): ?Category public function getNavigation(int $limit = 10): array private function clearAllCategoryCaches(): void public function canDelete(int $categoryId): array public function getStats(): array public function deactivate(int $categoryId): bool public function activate(int $categoryId): bool public function findByIds(array $categoryIds, bool $activeOnly = true): array public function createDefaultCategories(): array 
88. [app/Models/LinkModel.php] :: namespace App\Models || use App\Entities\Link || use CodeIgniter\Database\BaseBuilder || class LinkModel extends BaseModel protected $table = 'links' || protected $primaryKey = 'id' || protected $returnType = Link::class || protected $allowedFields = [ protected $validationRules = [ protected $orderBy = [ public function findByProduct(int $productId, ?bool $active = true, int $limit = 10): array public function findActiveByProduct(int $productId): array public function incrementClicks(int $linkId): bool public function updatePrice(int $linkId, string $newPrice): bool public function findExpired(string $type = 'validation', int $limit = 50): array public function getClickStats(string $period = 'month', ?int $productId = null, ?int $marketplaceId = null): array private function clearLinkCaches(int $productId): void public function addAffiliateRevenue(int $linkId, string $amount): bool public function markAsValidated(int $linkId): bool public function setActiveStatus(int $linkId, bool $active): bool public function findByMarketplace(int $marketplaceId, bool $activeOnly = true, int $limit = 50): array public function getTopPerformers(string $by = 'clicks', int $limit = 10): array public function countActiveByProduct(int $productId): int 
89. [app/Models/MarketplaceBadgeModel.php] :: namespace App\Models || use App\Entities\MarketplaceBadge || class MarketplaceBadgeModel extends BaseModel protected $table = 'marketplace_badges' || protected $primaryKey = 'id' || protected $returnType = MarketplaceBadge::class || protected $allowedFields = [ protected $validationRules = [ protected $orderBy = [ public function findCommon(bool $activeOnly = true): array public function findActive(int $limit = 50): array public function withLinkCount(int $limit = 50): array public function findByLabel(string $label, bool $activeOnly = true): ?MarketplaceBadge private function attachLinkCounts(array &$badges): void public function canDelete(int $badgeId): array public function getStats(): array public function findOrCreate(string $label, ?string $icon = null, ?string $color = null): MarketplaceBadge public function createDefaultBadges(): array private function clearMarketplaceBadgeCaches(): void public function findByIds(array $badgeIds, bool $activeOnly = true): array public function search(string $keyword, array $fields = [], int $limit = 10) 
90. [app/Models/MarketplaceModel.php] :: namespace App\Models || use App\Entities\Marketplace || class MarketplaceModel extends BaseModel protected $table = 'marketplaces' || protected $primaryKey = 'id' || protected $returnType = Marketplace::class || protected $allowedFields = [ protected $validationRules = [ protected $orderBy = [ public function findActive(bool $withStats = false): array public function withLinkCount(int $limit = 50): array public function getCommissionStats(string $period = 'month'): array public function findBySlug(string $slug, bool $activeOnly = true): ?Marketplace private function attachLinkCounts(array &$marketplaces): void private function clearMarketplaceCaches(int $marketplaceId): void public function canDelete(int $marketplaceId): array public function getStats(): array public function findByIds(array $marketplaceIds, bool $activeOnly = true): array public function createDefaultMarketplaces(): array public function deactivate(int $marketplaceId): bool public function activate(int $marketplaceId): bool 
91. [app/Models/ProductBadgeModel.php] :: namespace App\Models || use App\Entities\ProductBadge || use App\Entities\Badge || use CodeIgniter\Database\Exceptions\DataException || class ProductBadgeModel extends BaseModel protected $table = 'product_badges' || protected $primaryKey = 'product_id' || protected $returnType = ProductBadge::class || protected $allowedFields = [ protected $useTimestamps = false || protected $useSoftDeletes = false || protected $validationRules = [ protected $validationMessages = [ protected function beforeInsert(array $data): array public function findByCompositeKey(int $product_id, int $badge_id): ?ProductBadge public function deleteByCompositeKey(int $product_id, int $badge_id): bool public function assignBadge(int $product_id, int $badge_id, ?int $assigned_by = null): bool public function removeBadge(int $product_id, int $badge_id): bool public function getProductBadges(int $product_id): array public function getBadgeProducts(int $badge_id): array public function updateProductBadges(int $product_id, array $badge_ids, ?int $assigned_by = null): bool public function isAssigned(int $product_id, int $badge_id): bool public function countProductBadges(int $product_id): int public function getAssignmentDate(int $product_id, int $badge_id): ?string public function getAssignedBy(int $product_id, int $badge_id): ?int private function clearBadgeCache(int $product_id): void public function getBadgeUsageStats(): array public function bulkAssign(array $product_ids, array $badge_ids, ?int $assigned_by = null): array public function find($id = null) public function save($data): bool public function validateUniqueAssignment(int $product_id, int $badge_id): bool 
92. [app/Models/ProductModel.php] :: namespace App\Models || use App\Entities\Product || use App\Enums\ProductStatus || class ProductModel extends BaseModel protected $table = 'products' || protected $primaryKey = 'id' || protected $returnType = Product::class || protected $allowedFields = [ protected $validationRules = [ protected $validationRulesUpdate = [ protected $orderBy = [ public function findPublished(int $limit = 20, int $offset = 0): array public function findByIdOrSlug($identifier, bool $adminMode = false): ?Product public function findWithLinks(int $productId, bool $activeOnly = true): ?Product public function incrementViewCount(int $productId): bool public function updateStatus(int $productId, ProductStatus $newStatus, ?int $verifiedBy = null): bool public function findNeedsUpdate(string $type = 'both', int $limit = 50): array public function searchByKeyword(string $keyword, int $limit = 20): array public function getPopular(int $limit = 10, string $period = 'all'): array private function clearProductCaches(int $productId): void public function markPriceChecked(int $productId): bool public function markLinksChecked(int $productId): bool public function findByCategory(int $categoryId, int $limit = 20, int $offset = 0): array public function countPublished(): int 
93. [app/Repositories/Concrete/AdminRepository.php] :: namespace App\Repositories\Concrete || use App\Repositories\Interfaces\AdminRepositoryInterface || use App\Entities\Admin || use App\Models\AdminModel || use App\Services\CacheService || use App\Services\AuditService || use App\Exceptions\AdminNotFoundException || use App\Exceptions\ValidationException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use CodeIgniter\I18n\Time || use RuntimeException || use InvalidArgumentException || use DateTimeImmutable || class AdminRepository implements AdminRepositoryInterface private AdminModel $adminModel || private CacheService $cacheService || private AuditService $auditService || private ConnectionInterface $db || private int $cacheTtl = 1800 || // 30 menit untuk admin data private string $cachePrefix = 'admin_repo_' || private const CACHE_KEY_FIND = 'find_' || private const CACHE_KEY_BY_USERNAME = 'by_username_' || private const CACHE_KEY_BY_EMAIL = 'by_email_' || private const CACHE_KEY_ALL_ACTIVE = 'all_active' || private const CACHE_KEY_SUPER_ADMINS = 'super_admins' || private const CACHE_KEY_STATS = 'stats_' || private const CACHE_KEY_ACTIVITY_LOGS = 'activity_logs_' || private const CACHE_KEY_LOGIN_HISTORY = 'login_history_' || private const CACHE_KEY_API_TOKENS = 'api_tokens_' || private const MAX_LOGIN_ATTEMPTS = 5 || private const LOCKOUT_DURATION = 900 || // 15 menit dalam detik private const PASSWORD_MIN_LENGTH = 8 || private const PASSWORD_OPTIONS = ['cost' => 12] || public function __construct( public function find(int $id, bool $withTrashed = false): ?Admin public function findByUsername(string $username, bool $withTrashed = false): ?Admin public function findByEmail(string $email, bool $withTrashed = false): ?Admin public function findByIdentifier(string $identifier, bool $withTrashed = false): ?Admin public function findAll( public function save(Admin $admin): Admin public function delete(int $id, bool $force = false): bool public function restore(int $id): bool public function exists(int $id, bool $withTrashed = false): bool public function authenticate(string $identifier, string $password, string $ipAddress): array public function verifyPassword(string $password, string $hash): bool public function hashPassword(string $password): string public function passwordNeedsRehash(string $hash): bool public function updatePassword(int $adminId, string $newPassword): bool public function generateRandomPassword(int $length = 12): string public function validatePasswordStrength(string $password): array public function recordSuccessfulLogin(int $adminId, string $ipAddress, string $userAgent): bool public function recordFailedLogin(int $adminId, string $ipAddress, string $reason = 'invalid_credentials'): bool public function resetLoginAttempts(int $adminId): bool public function incrementLoginAttempts(int $adminId): bool public function isAccountLocked(int $adminId, int $maxAttempts = 5, int $lockoutDuration = 15): array public function getLoginAttemptsCount(int $adminId, string $timeWindow = '1 hour'): int public function clearLoginAttempts(int $adminId): bool public function recordLogout(int $adminId, string $ipAddress): bool public function promoteToSuperAdmin(int $adminId): bool public function demoteToAdmin(int $adminId): bool public function hasRole(int $adminId, string $role): bool public function isSuperAdmin(int $adminId): bool public function isRegularAdmin(int $adminId): bool public function getPermissions(int $adminId): array public function hasPermission(int $adminId, string $permission): bool public function updatePermissions(int $adminId, array $permissions): bool public function findSuperAdmins(bool $activeOnly = true): array public function countSuperAdmins(bool $activeOnly = true): int public function activate(int $adminId): bool public function deactivate(int $adminId, ?string $reason = null): bool public function suspend(int $adminId, string $reason, ?\DateTimeInterface $until = null): bool public function unsuspend(int $adminId): bool public function isActive(int $adminId): bool public function isSuspended(int $adminId): bool public function getAccountStatus(int $adminId): string public function search( public function findByRole(string $role, bool $activeOnly = true, int $limit = 100): array public function findByIds( public function getStatistics(?int $adminId = null): array public function countByStatus(bool $withTrashed = false): array public function countByRole(bool $activeOnly = true): array public function countAll(bool $withTrashed = false): int public function countActive(): int public function getLoginActivityStats(string $period = 'month'): array public function getDashboardStats(): array public function bulkUpdate(array $adminIds, array $updateData): int public function bulkActivate(array $adminIds): int public function canDelete(int $adminId, int $currentAdminId): array public function isUsernameUnique(string $username, ?int $excludeId = null): bool public function isEmailUnique(string $email, ?int $excludeId = null): bool public function validate(Admin $admin): array private function getCacheKey(string $suffix): string private function applyFilters(&$builder, array $filters): void private function handlePasswordUpdate(Admin $admin): void private function getAdminStatistics(int $adminId): array private function getSystemStatistics(): array public function clearCache(?int $adminId = null): void public static function create(): self public function getProfile(int $adminId): array public function getActivityLogs(int $adminId, int $limit = 50, int $offset = 0): array public function getLoginHistory(int $adminId, int $limit = 20): array public function getActiveSessions(int $adminId): array public function terminateSession(int $adminId, string $sessionId): bool public function terminateAllOtherSessions(int $adminId, string $currentSessionId): int public function generateApiToken( public function getSuggestions(?string $query = null, bool $activeOnly = true, int $limit = 20): array public function findRecentlyActive(int $hoursActiveWithin = 24, int $limit = 20): array public function findInactive(int $daysInactive = 30, int $limit = 50): array public function getActivityRanking(string $period = 'month', string $metric = 'actions', int $limit = 10): array public function bulkDeactivate(array $adminIds, ?string $reason = null): int public function bulkDelete(array $adminIds, bool $force = false): int public function bulkRestore(array $adminIds): int public function bulkUpdateRoles(array $adminIds, string $newRole): int public function canDeactivate(int $adminId, int $currentAdminId): array public function validateAdminData(array $data, ?int $adminId = null): array public function getCacheTtl(): int public function setCacheTtl(int $ttl): self public function getSystemAdmin(): ?Admin public function createSystemAdmin(): Admin public function updateProfile(int $adminId, array $profileData): bool public function revokeApiToken(int $adminId, string $tokenId): bool public function getApiTokens(int $adminId, bool $activeOnly = true): array public function getInitials(int $adminId): string public function getDisplayName(int $adminId): string public function getSummary(int $adminId): array public function exportData(int $adminId, string $format = 'array') public function importData(array $data, bool $updateExisting = false): array public function getHealthStatus(int $adminId): array public function findSimilar(int $adminId, int $limit = 5): array public function getNotificationPreferences(int $adminId): array public function updateNotificationPreferences(int $adminId, array $preferences): bool public function bulkResetPasswords(array $adminIds, bool $generateNew = true, ?string $newPassword = null): array public function canPerformAction(int $adminId, string $action, ?string $entityType = null, ?int $entityId = null): array 
94. [app/Repositories/Concrete/CategoryRepository.php] :: namespace App\Repositories\Concrete || use App\Repositories\Interfaces\CategoryRepositoryInterface || use App\Entities\Category || use App\Models\CategoryModel || use App\Services\CacheService || use App\Services\AuditService || use App\Exceptions\CategoryNotFoundException || use App\Exceptions\ValidationException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use CodeIgniter\I18n\Time || use RuntimeException || use InvalidArgumentException || class CategoryRepository implements CategoryRepositoryInterface private CategoryModel $categoryModel || private CacheService $cacheService || private AuditService $auditService || private ConnectionInterface $db || private int $cacheTtl = 3600 || private string $cachePrefix = 'category_repo_' || private const CACHE_KEY_TREE = 'tree' || private const CACHE_KEY_FLATTENED = 'flattened' || private const CACHE_KEY_NAVIGATION = 'navigation' || private const CACHE_KEY_STATS = 'stats' || private const CACHE_KEY_ALL_ACTIVE = 'all_active' || private const CACHE_KEY_BY_PARENT = 'by_parent_' || private const CACHE_KEY_BREADCRUMBS = 'breadcrumbs_' || public function __construct( public function find(int $id, bool $withTrashed = false): ?Category public function findBySlug(string $slug, bool $withTrashed = false): ?Category public function findByIdOrSlug($identifier, bool $withTrashed = false): ?Category public function findAll( public function save(Category $category): Category public function delete(int $id, bool $force = false): bool public function restore(int $id): bool public function exists(int $id, bool $withTrashed = false): bool public function getTree( public function getFlattenedTree( public function getChildren( public function getParentPath(int $categoryId, bool $includeSelf = false): array public function isDescendantOf(int $categoryId, int $parentId): bool public function wouldCreateCircularReference(int $categoryId, int $newParentId): bool public function moveToParent(int $categoryId, int $newParentId): bool public function activate(int $categoryId): bool public function deactivate(int $categoryId): bool public function archive(int $categoryId): bool public function bulkUpdateStatus(array $categoryIds, string $status): int public function updateSortOrder(int $categoryId, int $newSortOrder): bool public function reorderSiblings(int $parentId, array $orderData): bool public function search( public function findByIds( public function withProductCount( public function getStatistics(?int $categoryId = null): array public function countByStatus(bool $withTrashed = false): array public function countAll(bool $withTrashed = false): int public function countActive(): int public function getDepthStatistics(): array public function canDelete(int $categoryId): array public function canArchive(int $categoryId): array public function isSlugUnique(string $slug, ?int $excludeId = null): bool public function validate(Category $category): array public function bulkUpdate(array $categoryIds, array $updateData): int public function bulkDelete(array $categoryIds, bool $force = false): int public function bulkRestore(array $categoryIds): int public function clearCache(?int $categoryId = null): void public function getCacheTtl(): int public function setCacheTtl(int $ttl): self public function getNavigation(int $maxDepth = 2, int $limitPerLevel = 15): array public function getBreadcrumbs(int $categoryId, bool $includeCurrent = true): array public function getSuggestions(?string $query = null, int $limit = 20): array private function getCacheKey(string $suffix): string private function applyFilters(&$builder, array $filters): void private function buildTree(array $categories, ?int $parentId, int $currentDepth, ?int $maxDepth): array private function flattenTree(array $tree, int $depth, string $indicator): array private function limitTreeItems(array $tree, int $limitPerLevel): array private function calculateCategoryDepth(int $categoryId, int $currentDepth = 0): int public static function create(): self 
95. [app/Repositories/Concrete/LinkRepository.php] :: namespace App\Repositories\Concrete || use App\Repositories\Interfaces\LinkRepositoryInterface || use App\Entities\Link || use App\Entities\Product || use App\Entities\Marketplace || use App\Models\LinkModel || use App\Models\ProductModel || use App\Models\MarketplaceModel || use App\Models\MarketplaceBadgeModel || use App\Services\CacheService || use App\Services\AuditService || use App\Exceptions\LinkNotFoundException || use App\Exceptions\ValidationException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use CodeIgniter\I18n\Time || use RuntimeException || use InvalidArgumentException || use DateTimeImmutable || class LinkRepository implements LinkRepositoryInterface private LinkModel $linkModel || private ProductModel $productModel || private MarketplaceModel $marketplaceModel || private MarketplaceBadgeModel $marketplaceBadgeModel || private CacheService $cacheService || private AuditService $auditService || private ConnectionInterface $db || private int $cacheTtl = 3600 || private string $cachePrefix = 'link_repo_' || private const CACHE_KEY_FIND = 'find_' || private const CACHE_KEY_BY_PRODUCT = 'by_product_' || private const CACHE_KEY_BY_MARKETPLACE = 'by_marketplace_' || private const CACHE_KEY_PRICE_HISTORY = 'price_history_' || private const CACHE_KEY_STATS = 'stats_' || private const CACHE_KEY_TOP_PERFORMERS = 'top_performers_' || private const CACHE_KEY_NEEDS_UPDATE = 'needs_update_' || private const CACHE_KEY_NEEDS_VALIDATION = 'needs_validation_' || private const MIN_PRICE_UPDATE_INTERVAL = 3600 || // 1 hour private const MIN_VALIDATION_INTERVAL = 7200 || // 2 hours private const PRICE_CHANGE_THRESHOLD = 0.1 || // 10% private const MAX_CLICKS_PER_DAY = 1000 || public function __construct( public function find(int $id, bool $withTrashed = false): ?Link public function findByProductAndMarketplace( public function findByUrl(string $url, bool $withTrashed = false): ?Link public function findAll( public function save(Link $link): Link public function delete(int $id, bool $force = false): bool public function restore(int $id): bool public function exists(int $id, bool $withTrashed = false): bool public function findByProduct( public function findActiveByProduct(int $productId): array public function countByProduct(int $productId, bool $activeOnly = true): int public function productHasActiveLinks(int $productId): bool public function findCheapestByProduct(int $productId, bool $activeOnly = true): ?Link public function findHighestRatedByProduct(int $productId, bool $activeOnly = true): ?Link public function findByMarketplace( public function countByMarketplace(int $marketplaceId, bool $activeOnly = true): int public function updatePrice(int $linkId, string $newPrice, bool $autoUpdateTimestamp = true): bool public function updatePriceWithHistory( public function getPriceHistory(int $linkId, int $limit = 50, string $period = 'all'): array public function findNeedsPriceUpdate(int $maxAgeHours = 24, int $limit = 100, bool $activeOnly = true): array public function markPriceChecked(int $linkId): bool public function getPriceStatisticsByProduct(int $productId, bool $activeOnly = true): array public function validate(int $linkId, bool $force = false): array public function markAsValidated(int $linkId, bool $isValid = true, ?string $validationNotes = null): bool public function findNeedsValidation(int $maxAgeHours = 48, int $limit = 100, bool $activeOnly = true): array public function setActiveStatus(int $linkId, bool $active, ?string $reason = null): bool public function activate(int $linkId, ?string $reason = null): bool public function deactivate(int $linkId, ?string $reason = null): bool public function isValid(int $linkId): bool public function incrementClicks(int $linkId, int $increment = 1): bool public function recordClick( public function incrementSoldCount(int $linkId, int $increment = 1): bool public function addAffiliateRevenue( public function getStatistics(?int $linkId = null): array public function countByStatus(bool $withTrashed = false): array private function getCacheKey(string $suffix): string private function applyFilters(&$builder, array $filters): void private function calculatePriceChange(string $oldPrice, string $newPrice): float private function logPriceHistory( public function validateUrl(string $url): array private function needsValidation(Link $link): bool private function logValidationNotes(int $linkId, string $notes, bool $isValid): void private function getLinkStatistics(int $linkId): array private function getSystemStatistics(): array private function isUrlUnique(string $url, ?int $excludeId = null): bool public function clearCache(?int $linkId = null, ?int $productId = null): void public static function create(): self public function canDelete(int $linkId): array public function urlExists(string $url, ?int $excludeLinkId = null): bool public function checkDailyClickLimit(int $linkId, int $maxClicks = 1000): array public function getClickStats(int $linkId, string $period = '30d'): array public function calculateClickThroughRate(int $linkId, int $productViews = 0, string $period = '30d'): float public function getRevenueStats(int $linkId, string $period = '30d'): array public function assignBadge(int $linkId, int $badgeId): bool public function removeBadge(int $linkId): bool public function findByBadge(int $badgeId, bool $activeOnly = true, int $limit = 50): array public function findByMinRating(float $minRating, bool $activeOnly = true, int $limit = 100): array public function countAll(bool $withTrashed = false): int public function countActive(): int public function getPerformanceTrend(int $linkId, string $period = '30d', string $metric = 'clicks'): array public function getMarketplaceComparison(int $productId): array public function bulkUpdate(array $linkIds, array $updateData): int public function bulkActivate(array $linkIds, ?string $reason = null): int public function bulkDeactivate(array $linkIds, ?string $reason = null): int public function bulkValidate(array $linkIds, bool $force = false): array public function bulkUpdatePrices(array $linkIds, string $price, string $changeReason = 'bulk_update'): array public function bulkDelete(array $linkIds, bool $force = false): int public function getCacheTtl(): int public function setCacheTtl(int $ttl): self public function getHealthStatus(int $linkId): array public function findDuplicates(int $productId, int $marketplaceId, bool $includeInactive = false): array public function findExpiringValidation(int $daysThreshold = 7, int $limit = 100): array public function getSummary(int $linkId): array public function findByPriceRange(float $minPrice, float $maxPrice, bool $activeOnly = true, int $limit = 10): array public function findByStoreName(string $storeName, bool $exactMatch = false, bool $activeOnly = true, int $limit = 10): array public function generateTrackingUrl(int $linkId, array $params = []): ?string public function getTopPerformers(string $metric = 'clicks', int $limit = 10, string $period = '30d', bool $activeOnly = true): array public function search(string $keyword, bool $activeOnly = true, int $limit = 20, int $offset = 0): array 
96. [app/Repositories/Concrete/MarketplaceRepository.php] :: namespace App\Repositories\Concrete || use App\Repositories\Interfaces\MarketplaceRepositoryInterface || use App\Entities\Marketplace || use App\Entities\Link || use App\Models\MarketplaceModel || use App\Models\LinkModel || use App\Services\CacheService || use App\Services\AuditService || use App\Exceptions\MarketplaceNotFoundException || use App\Exceptions\ValidationException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use CodeIgniter\I18n\Time || use RuntimeException || use InvalidArgumentException || use DateTimeImmutable || class MarketplaceRepository implements MarketplaceRepositoryInterface private MarketplaceModel $marketplaceModel || private LinkModel $linkModel || private CacheService $cacheService || private AuditService $auditService || private ConnectionInterface $db || private int $cacheTtl = 3600 || private string $cachePrefix = 'marketplace_repo_' || private const CACHE_KEY_FIND = 'find_' || private const CACHE_KEY_BY_SLUG = 'by_slug_' || private const CACHE_KEY_ALL_ACTIVE = 'all_active' || private const CACHE_KEY_WITH_STATS = 'with_stats' || private const CACHE_KEY_STATS = 'stats_' || private const CACHE_KEY_TOP_PERFORMERS = 'top_performers_' || private const CACHE_KEY_CONFIGURATION = 'configuration_' || public function __construct( public function find(int $id, bool $withTrashed = false): ?Marketplace public function findBySlug(string $slug, bool $withTrashed = false): ?Marketplace public function findByName(string $name, bool $withTrashed = false): ?Marketplace public function findByIdOrSlug($identifier, bool $withTrashed = false): ?Marketplace public function findAll( public function save(Marketplace $marketplace): Marketplace public function delete(int $id, bool $force = false): bool public function restore(int $id): bool public function exists(int $id, bool $withTrashed = false): bool public function activate(int $marketplaceId): bool public function deactivate(int $marketplaceId, ?string $reason = null): bool public function archive(int $marketplaceId, ?string $notes = null): bool public function isActive(int $marketplaceId): bool public function bulkUpdateStatus(array $marketplaceIds, string $status, ?string $reason = null): int public function getLinks( public function countLinks(int $marketplaceId, bool $activeOnly = true): int public function countActiveLinks(int $marketplaceId): int public function getProducts( public function getCategories(int $marketplaceId, bool $activeOnly = true): array public function getTopSellingProducts(int $marketplaceId, int $limit = 10, string $period = 'month'): array public function getLinkStatistics(int $marketplaceId, string $period = 'month'): array public function search( public function findByIds( public function findWithActiveLinks(int $minLinks = 1, bool $activeOnly = true, int $limit = 50): array public function getByPerformance( public function getStatistics(?int $marketplaceId = null): array public function countByStatus(bool $withTrashed = false): array public function countAll(bool $withTrashed = false): int public function countActive(): int public function getGrowthStatistics(string $period = 'month'): array public function bulkUpdate(array $marketplaceIds, array $updateData): int public function bulkActivate(array $marketplaceIds, ?string $reason = null): int public function bulkDeactivate(array $marketplaceIds, ?string $reason = null): int public function canDelete(int $marketplaceId): array public function canDeactivate(int $marketplaceId): array public function isSlugUnique(string $slug, ?int $excludeId = null): bool public function isNameUnique(string $name, ?int $excludeId = null): bool public function validate(Marketplace $marketplace): array private function getCacheKey(string $suffix): string private function applyFilters(&$builder, array $filters): void private function getRevenueForPeriod(int $marketplaceId, string $period): array private function deactivateAllLinks(int $marketplaceId, string $reason = 'Marketplace deactivated'): int private function getDateCondition(string $period, string $field = 'created_at'): string private function getPreviousPeriodCount(string $period): int private function getTotalRevenue(int $marketplaceId): float private function isDefaultMarketplace(int $marketplaceId): bool private function getMarketplaceStatistics(int $marketplaceId): array private function getSystemStatistics(): array public function clearCache(?int $marketplaceId = null): void public static function create(): self public function countProducts(int $marketplaceId, bool $activeOnly = true): int public function findWithoutActiveLinks(bool $activeOnly = true, int $limit = 50): array public function getRevenueRanking(string $period = 'month', int $limit = 10): array public function getClickRanking(string $period = 'month', int $limit = 10): array public function getConversionRanking(string $period = 'month', int $limit = 10): array public function getPerformanceComparison(array $marketplaceIds, string $period = 'month'): array public function bulkDelete(array $marketplaceIds, bool $force = false): int public function bulkRestore(array $marketplaceIds): int public function hasAffiliateProgram(int $marketplaceId): bool public function supportsFeatures(int $marketplaceId, array $features): array public function getCacheTtl(): int public function setCacheTtl(int $ttl): self public function getDefaults(bool $activeOnly = true): array public function createDefaultMarketplaces(): array public function getSuggestions(?string $query = null, bool $activeOnly = true, int $limit = 20): array public function getAllowedDomains(int $marketplaceId): array public function getConfiguration(int $marketplaceId): array public function updateConfiguration(int $marketplaceId, array $config): bool public function getIconUrl(int $marketplaceId, string $size = 'medium'): ?string public function generateReport(int $marketplaceId, string $period = 'month', string $format = 'array') public function isPopular(int $marketplaceId, int $threshold = 100): bool public function getHealthStatus(int $marketplaceId): array public function findSimilar(int $marketplaceId, int $limit = 5): array public function getSummary(int $marketplaceId): array 
97. [app/Repositories/Concrete/ProductRepository.php] :: namespace App\Repositories\Concrete || use App\Repositories\Interfaces\ProductRepositoryInterface || use App\Entities\Product || use App\Enums\ProductStatus || use App\Exceptions\ProductNotFoundException || use App\Models\ProductModel || use App\Services\CacheService || use CodeIgniter\Database\ConnectionInterface || use RuntimeException || class ProductRepository implements ProductRepositoryInterface private ProductModel $model || private CacheService $cache || private ConnectionInterface $db || private int $cacheTtl = 3600 || public function __construct( public function find(int $id, bool $withTrashed = false): ?Product public function findBySlug(string $slug, bool $withTrashed = false): ?Product public function findByIdOrSlug($identifier, bool $adminMode = false, bool $withTrashed = false): ?Product public function findAll( public function save(Product $product): Product public function delete(int $id, bool $force = false): bool public function restore(int $id): bool public function exists(int $id, bool $withTrashed = false): bool public function findPublished(int $limit = 20, int $offset = 0): array public function findWithLinks(int $productId, bool $activeOnly = true): ?Product public function incrementViewCount(int $productId): bool public function updateStatus(int $productId, ProductStatus $newStatus, ?int $verifiedBy = null): bool public function findNeedsUpdate(string $type = 'both', int $limit = 50): array public function searchByKeyword(string $keyword, int $limit = 20): array public function getPopular(int $limit = 10, string $period = 'all'): array public function findByCategory(int $categoryId, int $limit = 20, int $offset = 0): array public function markPriceChecked(int $productId): bool public function markLinksChecked(int $productId): bool public function countByStatus(bool $withTrashed = false): array public function countPublished(): int public function countAll(bool $withTrashed = false): int public function getStats(): array public function bulkUpdate(array $ids, array $data): int public function bulkArchive(array $ids): int public function bulkPublish(array $ids): int public function isSlugUnique(string $slug, ?int $excludeId = null): bool public function validate(Product $product): array public function checkProductLimit(): array private function getCacheKey(string $key): string private function getCacheKeyForFindAll( private function clearProductCaches(Product $product): void private function clearProductCachesById(int $productId): void private function clearAggregateCaches(): void public function setCacheTtl(int $ttl): self public function getCacheTtl(): int public static function create(): self 
98. [app/Repositories/Interfaces/AdminRepositoryInterface.php] :: namespace App\Repositories\Interfaces || use App\Entities\Admin || use App\Exceptions\AdminNotFoundException || interface AdminRepositoryInterface public function find(int $id, bool $withTrashed = false): ?Admin || public function findByUsername(string $username, bool $withTrashed = false): ?Admin || public function findByEmail(string $email, bool $withTrashed = false): ?Admin || public function findByIdentifier(string $identifier, bool $withTrashed = false): ?Admin || public function findAll( public function save(Admin $admin): Admin || public function delete(int $id, bool $force = false): bool || public function restore(int $id): bool || public function exists(int $id, bool $withTrashed = false): bool || public function authenticate(string $identifier, string $password, string $ipAddress): array || public function verifyPassword(string $password, string $hash): bool || public function hashPassword(string $password): string || public function passwordNeedsRehash(string $hash): bool || public function updatePassword(int $adminId, string $newPassword): bool || public function generateRandomPassword(int $length = 12): string || public function validatePasswordStrength(string $password): array || public function recordSuccessfulLogin(int $adminId, string $ipAddress, string $userAgent): bool || public function recordFailedLogin(int $adminId, string $ipAddress, string $reason = 'invalid_credentials'): bool || public function resetLoginAttempts(int $adminId): bool || public function incrementLoginAttempts(int $adminId): bool || public function isAccountLocked(int $adminId, int $maxAttempts = 5, int $lockoutDuration = 15): array || public function getLoginAttemptsCount(int $adminId, string $timeWindow = '1 hour'): int || public function clearLoginAttempts(int $adminId): bool || public function recordLogout(int $adminId, string $ipAddress): bool || public function promoteToSuperAdmin(int $adminId): bool || public function demoteToAdmin(int $adminId): bool || public function hasRole(int $adminId, string $role): bool || public function isSuperAdmin(int $adminId): bool || public function isRegularAdmin(int $adminId): bool || public function getPermissions(int $adminId): array || public function hasPermission(int $adminId, string $permission): bool || public function updatePermissions(int $adminId, array $permissions): bool || public function findSuperAdmins(bool $activeOnly = true): array || public function countSuperAdmins(bool $activeOnly = true): int || public function activate(int $adminId): bool || public function deactivate(int $adminId, ?string $reason = null): bool || public function suspend(int $adminId, string $reason, ?\DateTimeInterface $until = null): bool || public function unsuspend(int $adminId): bool || public function isActive(int $adminId): bool || public function isSuspended(int $adminId): bool || public function getAccountStatus(int $adminId): string || public function search( public function findByRole(string $role, bool $activeOnly = true, int $limit = 100): array || public function findByIds( public function findRecentlyActive(int $hoursActiveWithin = 24, int $limit = 20): array || public function findInactive(int $daysInactive = 30, int $limit = 50): array || public function getStatistics(?int $adminId = null): array || public function countByStatus(bool $withTrashed = false): array || public function countByRole(bool $activeOnly = true): array || public function countAll(bool $withTrashed = false): int || public function countActive(): int || public function getLoginActivityStats(string $period = 'month'): array || public function getActivityRanking(string $period = 'month', string $metric = 'actions', int $limit = 10): array || public function getDashboardStats(): array || public function bulkUpdate(array $adminIds, array $updateData): int || public function bulkActivate(array $adminIds): int || public function bulkDeactivate(array $adminIds, ?string $reason = null): int || public function bulkDelete(array $adminIds, bool $force = false): int || public function bulkRestore(array $adminIds): int || public function bulkUpdateRoles(array $adminIds, string $newRole): int || public function bulkResetPasswords( public function canDelete(int $adminId, int $currentAdminId): array || public function canDeactivate(int $adminId, int $currentAdminId): array || public function isUsernameUnique(string $username, ?int $excludeId = null): bool || public function isEmailUnique(string $email, ?int $excludeId = null): bool || public function validate(Admin $admin): array || public function validateAdminData(array $data, ?int $adminId = null): array || public function canPerformAction( public function clearCache(?int $adminId = null): void || public function getCacheTtl(): int || public function setCacheTtl(int $ttl): self || public function getSystemAdmin(): ?Admin || public function createSystemAdmin(): Admin || public function getProfile(int $adminId): array || public function updateProfile(int $adminId, array $profileData): bool || public function getActivityLogs(int $adminId, int $limit = 50, int $offset = 0): array || public function getLoginHistory(int $adminId, int $limit = 20): array || public function getActiveSessions(int $adminId): array || public function terminateSession(int $adminId, string $sessionId): bool || public function terminateAllOtherSessions(int $adminId, string $currentSessionId): int || public function generateApiToken( public function revokeApiToken(int $adminId, string $tokenId): bool || public function getApiTokens(int $adminId, bool $activeOnly = true): array || public function getSuggestions(?string $query = null, bool $activeOnly = true, int $limit = 20): array || public function getInitials(int $adminId): string || public function getDisplayName(int $adminId): string || public function getSummary(int $adminId): array || public function exportData(int $adminId, string $format = 'array') || public function importData(array $data, bool $updateExisting = false): array || public function getHealthStatus(int $adminId): array || public function findSimilar(int $adminId, int $limit = 5): array || public function getNotificationPreferences(int $adminId): array || public function updateNotificationPreferences(int $adminId, array $preferences): bool || 
99. [app/Repositories/Interfaces/CategoryRepositoryInterface.php] :: namespace App\Repositories\Interfaces || use App\Entities\Category || use App\Exceptions\CategoryNotFoundException || interface CategoryRepositoryInterface public function find(int $id, bool $withTrashed = false): ?Category || public function findBySlug(string $slug, bool $withTrashed = false): ?Category || public function findByIdOrSlug($identifier, bool $withTrashed = false): ?Category || public function findAll( public function save(Category $category): Category || public function delete(int $id, bool $force = false): bool || public function restore(int $id): bool || public function exists(int $id, bool $withTrashed = false): bool || public function getTree( public function getFlattenedTree( public function getChildren( public function getParentPath(int $categoryId, bool $includeSelf = false): array || public function isDescendantOf(int $categoryId, int $parentId): bool || public function wouldCreateCircularReference(int $categoryId, int $newParentId): bool || public function moveToParent(int $categoryId, int $newParentId): bool || public function activate(int $categoryId): bool || public function deactivate(int $categoryId): bool || public function archive(int $categoryId): bool || public function bulkUpdateStatus(array $categoryIds, string $status): int || public function updateSortOrder(int $categoryId, int $newSortOrder): bool || public function reorderSiblings(int $parentId, array $orderData): bool || public function search( public function findByIds( public function withProductCount( public function getStatistics(?int $categoryId = null): array || public function countByStatus(bool $withTrashed = false): array || public function countAll(bool $withTrashed = false): int || public function countActive(): int || public function getDepthStatistics(): array || public function canDelete(int $categoryId): array || public function canArchive(int $categoryId): array || public function isSlugUnique(string $slug, ?int $excludeId = null): bool || public function validate(Category $category): array || public function bulkUpdate(array $categoryIds, array $updateData): int || public function bulkDelete(array $categoryIds, bool $force = false): int || public function bulkRestore(array $categoryIds): int || public function clearCache(?int $categoryId = null): void || public function getCacheTtl(): int || public function setCacheTtl(int $ttl): self || public function getNavigation(int $maxDepth = 2, int $limitPerLevel = 15): array || public function getBreadcrumbs(int $categoryId, bool $includeCurrent = true): array || public function getSuggestions(?string $query = null, int $limit = 20): array || 
100. [app/Repositories/Interfaces/LinkRepositoryInterface.php] :: namespace App\Repositories\Interfaces || use App\Entities\Link || use App\Exceptions\LinkNotFoundException || interface LinkRepositoryInterface public function find(int $id, bool $withTrashed = false): ?Link || public function findByProductAndMarketplace( public function findByUrl(string $url, bool $withTrashed = false): ?Link || public function findAll( public function save(Link $link): Link || public function delete(int $id, bool $force = false): bool || public function restore(int $id): bool || public function exists(int $id, bool $withTrashed = false): bool || public function findByProduct( public function findActiveByProduct(int $productId): array || public function countByProduct(int $productId, bool $activeOnly = true): int || public function productHasActiveLinks(int $productId): bool || public function validateUrl(string $url): array || public function findCheapestByProduct(int $productId, bool $activeOnly = true): ?Link || public function findHighestRatedByProduct(int $productId, bool $activeOnly = true): ?Link || public function findByMarketplace( public function countByMarketplace(int $marketplaceId, bool $activeOnly = true): int || public function updatePrice(int $linkId, string $newPrice, bool $autoUpdateTimestamp = true): bool || public function updatePriceWithHistory( public function getPriceHistory(int $linkId, int $limit = 50, string $period = 'all'): array || public function findNeedsPriceUpdate(int $maxAgeHours = 24, int $limit = 100, bool $activeOnly = true): array || public function markPriceChecked(int $linkId): bool || public function getPriceStatisticsByProduct(int $productId, bool $activeOnly = true): array || public function validate(int $linkId, bool $force = false): array || public function markAsValidated(int $linkId, bool $isValid = true, ?string $validationNotes = null): bool || public function findNeedsValidation(int $maxAgeHours = 48, int $limit = 100, bool $activeOnly = true): array || public function setActiveStatus(int $linkId, bool $active, ?string $reason = null): bool || public function activate(int $linkId, ?string $reason = null): bool || public function deactivate(int $linkId, ?string $reason = null): bool || public function isValid(int $linkId): bool || public function incrementClicks(int $linkId, int $increment = 1): bool || public function recordClick( public function incrementSoldCount(int $linkId, int $increment = 1): bool || public function addAffiliateRevenue( public function getClickStats(int $linkId, string $period = '30d'): array || public function calculateClickThroughRate(int $linkId, int $productViews = 0, string $period = '30d'): float || public function getRevenueStats(int $linkId, string $period = '30d'): array || public function assignBadge(int $linkId, int $badgeId): bool || public function removeBadge(int $linkId): bool || public function findByBadge(int $badgeId, bool $activeOnly = true, int $limit = 50): array || public function search( public function findByStoreName( public function findByPriceRange( public function findByMinRating(float $minRating, bool $activeOnly = true, int $limit = 100): array || public function getStatistics(?int $linkId = null): array || public function countByStatus(bool $withTrashed = false): array || public function countAll(bool $withTrashed = false): int || public function countActive(): int || public function getTopPerformers( public function getPerformanceTrend(int $linkId, string $period = '30d', string $metric = 'clicks'): array || public function getMarketplaceComparison(int $productId): array || public function bulkUpdate(array $linkIds, array $updateData): int || public function bulkActivate(array $linkIds, ?string $reason = null): int || public function bulkDeactivate(array $linkIds, ?string $reason = null): int || public function bulkValidate(array $linkIds, bool $force = false): array || public function bulkUpdatePrices(array $linkIds, string $price, string $changeReason = 'bulk_update'): array || public function bulkDelete(array $linkIds, bool $force = false): int || public function canDelete(int $linkId): array || public function urlExists(string $url, ?int $excludeLinkId = null): bool || public function checkDailyClickLimit(int $linkId, int $maxClicks = 1000): array || public function clearCache(?int $linkId = null, ?int $productId = null): void || public function getCacheTtl(): int || public function setCacheTtl(int $ttl): self || public function generateTrackingUrl(int $linkId, array $params = []): ?string || public function getHealthStatus(int $linkId): array || public function findDuplicates(int $productId, int $marketplaceId, bool $includeInactive = false): array || public function findExpiringValidation(int $daysThreshold = 7, int $limit = 100): array || public function getSummary(int $linkId): array || 
101. [app/Repositories/Interfaces/MarketplaceRepositoryInterface.php] :: namespace App\Repositories\Interfaces || use App\Entities\Marketplace || use App\Exceptions\MarketplaceNotFoundException || interface MarketplaceRepositoryInterface public function find(int $id, bool $withTrashed = false): ?Marketplace || public function findBySlug(string $slug, bool $withTrashed = false): ?Marketplace || public function findByName(string $name, bool $withTrashed = false): ?Marketplace || public function findByIdOrSlug($identifier, bool $withTrashed = false): ?Marketplace || public function findAll( public function save(Marketplace $marketplace): Marketplace || public function delete(int $id, bool $force = false): bool || public function restore(int $id): bool || public function exists(int $id, bool $withTrashed = false): bool || public function activate(int $marketplaceId): bool || public function deactivate(int $marketplaceId, ?string $reason = null): bool || public function archive(int $marketplaceId, ?string $notes = null): bool || public function isActive(int $marketplaceId): bool || public function bulkUpdateStatus(array $marketplaceIds, string $status, ?string $reason = null): int || public function getLinks( public function countLinks(int $marketplaceId, bool $activeOnly = true): int || public function countActiveLinks(int $marketplaceId): int || public function getProducts( public function countProducts(int $marketplaceId, bool $activeOnly = true): int || public function getCategories(int $marketplaceId, bool $activeOnly = true): array || public function getTopSellingProducts(int $marketplaceId, int $limit = 10, string $period = 'month'): array || public function getLinkStatistics(int $marketplaceId, string $period = 'month'): array || public function search( public function findByIds( public function findWithActiveLinks(int $minLinks = 1, bool $activeOnly = true, int $limit = 50): array || public function findWithoutActiveLinks(bool $activeOnly = true, int $limit = 50): array || public function getByPerformance( public function getStatistics(?int $marketplaceId = null): array || public function countByStatus(bool $withTrashed = false): array || public function countAll(bool $withTrashed = false): int || public function countActive(): int || public function getGrowthStatistics(string $period = 'month'): array || public function getRevenueRanking(string $period = 'month', int $limit = 10): array || public function getClickRanking(string $period = 'month', int $limit = 10): array || public function getConversionRanking(string $period = 'month', int $limit = 10): array || public function getPerformanceComparison(array $marketplaceIds, string $period = 'month'): array || public function bulkUpdate(array $marketplaceIds, array $updateData): int || public function bulkActivate(array $marketplaceIds, ?string $reason = null): int || public function bulkDeactivate(array $marketplaceIds, ?string $reason = null): int || public function bulkDelete(array $marketplaceIds, bool $force = false): int || public function bulkRestore(array $marketplaceIds): int || public function canDelete(int $marketplaceId): array || public function canDeactivate(int $marketplaceId): array || public function isSlugUnique(string $slug, ?int $excludeId = null): bool || public function isNameUnique(string $name, ?int $excludeId = null): bool || public function validate(Marketplace $marketplace): array || public function hasAffiliateProgram(int $marketplaceId): bool || public function supportsFeatures(int $marketplaceId, array $features): array || public function clearCache(?int $marketplaceId = null): void || public function getCacheTtl(): int || public function setCacheTtl(int $ttl): self || public function getDefaults(bool $activeOnly = true): array || public function createDefaultMarketplaces(): array || public function getSuggestions(?string $query = null, bool $activeOnly = true, int $limit = 20): array || public function getAllowedDomains(int $marketplaceId): array || public function getConfiguration(int $marketplaceId): array || public function updateConfiguration(int $marketplaceId, array $config): bool || public function getIconUrl(int $marketplaceId, string $size = 'medium'): ?string || public function generateReport(int $marketplaceId, string $period = 'month', string $format = 'array') || public function isPopular(int $marketplaceId, int $threshold = 100): bool || public function getHealthStatus(int $marketplaceId): array || public function findSimilar(int $marketplaceId, int $limit = 5): array || public function getSummary(int $marketplaceId): array || 
102. [app/Repositories/Interfaces/ProductRepositoryInterface.php] :: namespace App\Repositories\Interfaces || use App\Entities\Product || use App\Enums\ProductStatus || interface ProductRepositoryInterface public function find(int $id, bool $withTrashed = false): ?Product || public function findBySlug(string $slug, bool $withTrashed = false): ?Product || public function findByIdOrSlug($identifier, bool $adminMode = false, bool $withTrashed = false): ?Product || public function findAll( public function save(Product $product): Product || public function delete(int $id, bool $force = false): bool || public function restore(int $id): bool || public function exists(int $id, bool $withTrashed = false): bool || public function findPublished(int $limit = 20, int $offset = 0): array || public function findWithLinks(int $productId, bool $activeOnly = true): ?Product || public function incrementViewCount(int $productId): bool || public function updateStatus(int $productId, ProductStatus $newStatus, ?int $verifiedBy = null): bool || public function findNeedsUpdate(string $type = 'both', int $limit = 50): array || public function searchByKeyword(string $keyword, int $limit = 20): array || public function getPopular(int $limit = 10, string $period = 'all'): array || public function findByCategory(int $categoryId, int $limit = 20, int $offset = 0): array || public function markPriceChecked(int $productId): bool || public function markLinksChecked(int $productId): bool || public function countByStatus(bool $withTrashed = false): array || public function countPublished(): int || public function countAll(bool $withTrashed = false): int || public function getStats(): array || public function bulkUpdate(array $ids, array $data): int || public function bulkArchive(array $ids): int || public function bulkPublish(array $ids): int || public function isSlugUnique(string $slug, ?int $excludeId = null): bool || public function validate(Product $product): array || public function checkProductLimit(): array || 
103. [app/Services/AuditService.php] :: namespace App\Services || use App\Entities\AuditLog || use App\Models\AuditLogModel || use App\Entities\BaseEntity || use App\Entities\Admin || use CodeIgniter\HTTP\RequestInterface || use DateTimeImmutable || class AuditService private AuditLogModel $auditLogModel || private ?RequestInterface $request || private bool $enabled || private array $config || private const ACTION_CREATE = 'CREATE' || private const ACTION_UPDATE = 'UPDATE' || private const ACTION_DELETE = 'DELETE' || private const ACTION_SOFT_DELETE = 'SOFT_DELETE' || private const ACTION_RESTORE = 'RESTORE' || private const ACTION_PUBLISH = 'PUBLISH' || private const ACTION_ARCHIVE = 'ARCHIVE' || private const ACTION_VERIFY = 'VERIFY' || private const ACTION_LOGIN = 'LOGIN' || private const ACTION_LOGOUT = 'LOGOUT' || private const ACTION_STATUS_CHANGE = 'STATUS_CHANGE' || public const ENTITY_PRODUCT = 'PRODUCT' || public const ENTITY_CATEGORY = 'CATEGORY' || public const ENTITY_LINK = 'LINK' || public const ENTITY_ADMIN = 'ADMIN' || public const ENTITY_BADGE = 'BADGE' || public const ENTITY_MARKETPLACE = 'MARKETPLACE' || public function __construct( public function logCrudOperation( public function logCreate( public function logUpdate( public function logDelete( public function logRestore( public function logStateTransition( public function logAuthentication( public function getEntityAuditTrail( public function getAdminActivity( public function getRecentActivity( public function getStatistics(string $period = 'month'): array public function cleanupOldLogs(int $daysOld = 365): int public function exportToCsv(array $filters = []): string public function setEnabled(bool $enabled): self public function isEnabled(): bool public function getConfig(): array private function generateChangesSummary( private function prepareEntityData(BaseEntity $entity): array private function mapStateTransitionToAction(string $fromState, string $toState): string private function formatPropertyName(string $property): string private function formatChangeValue($value): string private function logToFile(array $logData, string $errorMessage): void private function getDefaultConfig(): array public static function create(): self 
104. [app/Services/CacheService.php] :: namespace App\Services || use App\Contracts\CacheInterface || use CodeIgniter\Cache\CacheInterface as CodeIgniterCache || use RuntimeException || class CacheService implements CacheInterface private CodeIgniterCache $cache || private int $defaultTtl = 3600 || private string $namespace = 'devdaily_' || private array $stats = [ private ?string $currentTag = null || public function __construct( public function get(string $key) public function set(string $key, $value, ?int $ttl = null): bool public function delete(string $key): bool public function clear(): bool public function has(string $key): bool public function remember(string $key, callable $callback, ?int $ttl = null) public function increment(string $key, int $value = 1) public function decrement(string $key, int $value = 1) public function getMultiple(array $keys): array public function setMultiple(array $items, ?int $ttl = null): bool public function deleteMultiple(array $keys): bool public function getStats(): array public function getKey(string $key): string public function setDefaultTtl(int $ttl): self public function getDefaultTtl(): int public function isAvailable(): bool public function forever(string $key, $value): bool public function getWithTtl(string $key): ?array public function tag(string $tag): self public function flushTag($tags): bool public function cacheWithContext(string $prefix, array $context, callable $callback, ?int $ttl = null) public function getHitStats(): array public function resetStats(): void public function getHandler(): CodeIgniterCache private function generateContextKey(string $prefix, array $context): string private function getTagIndexKey(string $tag): string private function addKeyToTagIndex(string $key): void private function removeKeyFromTagIndices(string $key): void private function clearTagIndices(): void public static function create(array $config = []): self 
105. [app/Services/CategoryService.php] :: namespace App\Services || use App\DTOs\Requests\Category\CreateCategoryRequest || use App\DTOs\Requests\Category\UpdateCategoryRequest || use App\DTOs\Responses\CategoryResponse || use App\DTOs\Responses\CategoryTreeResponse || use App\Entities\Category || use App\Entities\Product || use App\Exceptions\CategoryNotFoundException || use App\Exceptions\ValidationException || use App\Exceptions\DomainException || use App\Models\CategoryModel || use App\Models\ProductModel || use App\Models\AdminModel || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use DateTimeImmutable || use Exception || use RuntimeException || class CategoryService private CategoryModel $categoryModel || private ProductModel $productModel || private ValidationService $validationService || private AuditService $auditService || private CacheService $cacheService || private ConnectionInterface $db || private array $config || private const CACHE_TTL = 7200 || // 2 hours private const CACHE_PREFIX = 'category_service_' || private const TREE_CACHE_TTL = 3600 || private const NAVIGATION_CACHE_TTL = 1800 || private const MAX_CATEGORY_DEPTH = 5 || private const MAX_CATEGORIES_PER_LEVEL = 50 || private const MAX_CATEGORY_NAME_LENGTH = 100 || private const MAX_CATEGORY_SLUG_LENGTH = 50 || private const ROOT_PARENT_ID = 0 || public function __construct( public function create(CreateCategoryRequest $request, int $adminId): Category public function update(UpdateCategoryRequest $request, int $adminId): Category public function delete(int $categoryId, int $adminId, bool $force = false): bool public function archive(int $categoryId, int $adminId, ?string $notes = null): Category public function activate(int $categoryId, int $adminId): Category public function restore(int $categoryId, int $adminId): Category public function find($identifier, bool $withStatistics = false): CategoryResponse public function getTree(bool $includeInactive = false, ?int $maxDepth = null): CategoryTreeResponse public function getList( public function getNavigation(int $maxDepth = 2, int $limit = 15): array public function reorder(array $orderData, int $adminId): bool public function bulkUpdate(array $categoryIds, array $updateData, int $adminId): array public function bulkArchive(array $categoryIds, int $adminId): array function($categoryId, $adminId) { public function bulkActivate(array $categoryIds, int $adminId): array function($categoryId, $adminId) { public function getCategoryStatistics(int $categoryId): array public function getSystemStatistics(): array public function search(string $keyword, bool $includeInactive = false, int $limit = 20): array private function buildCategoryTree(array $categories, int $parentId, int $currentDepth, ?int $maxDepth = null): array private function buildNavigationTree(array $categories, int $parentId, int $currentDepth, int $maxDepth): array private function getChildCategories(int $parentId, bool $includeInactive): array private function getCategoriesByParent(?int $parentId, bool $activeOnly = true): array private function countCategoriesByParent(?int $parentId): int private function calculateCategoryDepth(int $categoryId, int $currentDepth = 0): int private function isCircularReference(int $categoryId, int $potentialParentId): bool private function reparentOrphanedCategories(int $deletedParentId, int $newParentId): void private function sortCategories(array $categories, string $sortBy, string $sortDirection): array private function executeBulkStateChange( private function clearCategoryCaches(): void private function clearNavigationCaches(): void private function getCacheKey(string $suffix): string private function publishEvent(string $eventType, array $payload): void private function getAdminModel() private function logError(string $message, array $context = []): void private function logEvent(array $event): void private function getDefaultConfig(): array 
106. [app/Services/LinkService.php] :: namespace App\Services || use App\DTOs\Requests\Link\CreateLinkRequest || use App\DTOs\Requests\Link\UpdateLinkRequest || use App\DTOs\Requests\Link\BulkLinkUpdateRequest || use App\DTOs\Responses\LinkResponse || use App\DTOs\Responses\LinkAnalyticsResponse || use App\Entities\Link || use App\Entities\Product || use App\Entities\Marketplace || use App\Exceptions\LinkNotFoundException || use App\Exceptions\ValidationException || use App\Exceptions\DomainException || use App\Models\LinkModel || use App\Models\ProductModel || use App\Models\MarketplaceModel || use App\Models\MarketplaceBadgeModel || use App\Models\AdminModel || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use DateTimeImmutable || use Exception || use RuntimeException || class LinkService private LinkModel $linkModel || private ProductModel $productModel || private MarketplaceModel $marketplaceModel || private MarketplaceBadgeModel $marketplaceBadgeModel || private ValidationService $validationService || private AuditService $auditService || private CacheService $cacheService || private ConnectionInterface $db || private array $config || private const CACHE_TTL = 3600 || private const CACHE_PREFIX = 'link_service_' || private const ANALYTICS_CACHE_TTL = 1800 || private const MAX_LINKS_PER_PRODUCT = 10 || private const MIN_PRICE_UPDATE_INTERVAL = 3600 || // 1 hour private const MIN_VALIDATION_INTERVAL = 7200 || // 2 hours private const MAX_URL_LENGTH = 500 || private const MIN_CLICK_THRESHOLD = 10 || public const PRICE_CHANGE_THRESHOLD = 0.1 || // 10% price change triggers notification public const INACTIVITY_THRESHOLD = 30 || // 30 days public const EVENT_LINK_CREATED = 'link.created' || public const EVENT_LINK_UPDATED = 'link.updated' || public const EVENT_LINK_PRICE_CHANGED = 'link.price_changed' || public const EVENT_LINK_CLICKED = 'link.clicked' || public const EVENT_LINK_VALIDATED = 'link.validated' || public const EVENT_LINK_DEACTIVATED = 'link.deactivated' || public const EVENT_AFFILIATE_REVENUE = 'link.revenue_generated' || public function __construct( public function create(CreateLinkRequest $request, int $adminId): Link public function update(UpdateLinkRequest $request, int $adminId): Link public function delete(int $linkId, int $adminId, bool $force = false): bool public function activate(int $linkId, int $adminId): Link public function deactivate(int $linkId, int $adminId, ?string $reason = null): Link public function recordClick(int $linkId, ?string $ipAddress = null, ?string $userAgent = null): bool public function recordSale(int $linkId, float $saleAmount, int $quantity = 1, array $metadata = []): bool public function updatePrice(int $linkId, string $newPrice, bool $autoUpdate = true, ?int $adminId = null): Link public function validate(int $linkId, bool $force = false): array public function bulkUpdate(BulkLinkUpdateRequest $request, int $adminId): array public function getAnalytics(int $linkId, string $period = '30d'): LinkAnalyticsResponse public function getLinksNeedingPriceUpdate(int $limit = 50): array public function getLinksNeedingValidation(int $limit = 50): array public function getTopPerformers(string $by = 'revenue', int $limit = 10, string $period = '30d'): array public function getProductLinkStats(int $productId): array public function getMarketplaceStats(int $marketplaceId, string $period = '30d'): array private function setActiveStatus(int $linkId, bool $active, int $adminId, ?string $reason = null): Link private function performLinkValidation(Link $link): array private function validateUrl(string $url): bool private function checkUrlAccessibility(string $url): bool private function calculateCommission(string $price, string $commissionRate): string private function calculateEffectiveCommissionRate(Link $link): float private function calculatePriceRange(array $links): ?array private function calculateAverageRating(array $links): float private function calculateClickThroughRate(int $linkId): float private function calculatePerformanceTrend(int $linkId, string $period): array private function getPriceHistory(int $linkId, string $period): array private function getMarketplaceComparison(int $marketplaceId, string $price, string $rating): array private function getAllowedMarketplaceDomains(): array private function isDomainAllowed(string $host, array $allowedDomains): bool private function getProductName(int $productId): ?string private function getMarketplaceName(int $marketplaceId): ?string private function clearLinkCaches(int $linkId, int $productId): void private function clearProductLinkCaches(int $productId): void private function getCacheKey(string $suffix): string private function publishEvent(string $eventType, array $payload): void private function getAdminModel() private function logError(string $message, array $context = []): void private function logEvent(array $event): void private function getDefaultConfig(): array 
107. [app/Services/PaginationService.php] :: namespace App\Services || use App\DTOs\Queries\PaginationQuery || use CodeIgniter\Pager\Pager || use Config\Pager as PagerConfig || class PaginationService protected $config || protected $pager || public function __construct(?PagerConfig $config = null) public function createPagination(PaginationQuery $query, int $totalItems): array public function createLinks( public function createPager( public function createFromRequest(array $requestData, array $config = []): PaginationQuery public function getDefault(): PaginationQuery protected function calculateTotalPages(int $totalItems, int $perPage): int protected function calculateFrom(int $page, int $perPage, int $totalItems): int protected function calculateTo(int $page, int $perPage, int $totalItems): int protected function buildUrl( public function generateCacheKey(string $baseKey, PaginationQuery $query): string public function generateCachePattern(string $baseKey, PaginationQuery $query): string public function isValidPage(int $page, int $perPage, int $totalItems): bool public function getPerPageOptions(): array public function getSummary(PaginationQuery $query, int $totalItems): array 
108. [app/Services/ProductService.php] :: namespace App\Services || use App\DTOs\Requests\Product\CreateProductRequest || use App\DTOs\Requests\Product\UpdateProductRequest || use App\DTOs\Requests\Product\PublishProductRequest || use App\DTOs\Queries\ProductQuery || use App\DTOs\Queries\PaginationQuery || use App\DTOs\Responses\ProductResponse || use App\DTOs\Responses\ProductDetailResponse || use App\Repositories\Interfaces\ProductRepositoryInterface || use App\Models\CategoryModel || use App\Models\LinkModel || use App\Models\BadgeModel || use App\Models\ProductBadgeModel || use App\Models\MarketplaceModel || use App\Models\MarketplaceBadgeModel || use App\Models\AdminModel || use App\Models\AuditLogModel || use App\Entities\Product || use App\Entities\Link || use App\Enums\ProductStatus || use App\Exceptions\ProductNotFoundException || use App\Exceptions\ValidationException || use App\Exceptions\DomainException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\I18n\Time || class ProductService private ProductRepositoryInterface $productRepository || private CacheService $cache || private ConnectionInterface $db || private CategoryModel $categoryModel || private LinkModel $linkModel || private BadgeModel $badgeModel || private ProductBadgeModel $productBadgeModel || private MarketplaceModel $marketplaceModel || private MarketplaceBadgeModel $marketplaceBadgeModel || private AdminModel $adminModel || private AuditLogModel $auditLogModel || private array $config || private const CACHE_TTL = 3600 || private const CACHE_PREFIX = 'product_service_' || private const MAX_PRODUCTS_PER_DAY = 100 || private const MIN_PRICE_UPDATE_INTERVAL = 86400 || // 24 hours in seconds private const MIN_LINK_VALIDATION_INTERVAL = 172800 || // 48 hours public function __construct( private function initializeModels(): void private function getDefaultConfig(): array public function create(CreateProductRequest $request, int $adminId): Product public function update(UpdateProductRequest $request, int $adminId): Product public function delete(int $productId, int $adminId, bool $force = false): bool public function restore(int $productId, int $adminId): bool public function find($identifier, bool $adminMode = false, array $relations = []): ProductDetailResponse public function list(ProductQuery $query, PaginationQuery $pagination, array $relations = []): array public function publish(PublishProductRequest $request): Product public function verify(int $productId, int $adminId, ?string $notes = null): Product public function archive(int $productId, int $adminId, ?string $notes = null): Product public function requestVerification(int $productId, int $adminId): Product public function bulkUpdate(array $productIds, array $updateData, int $adminId): array public function bulkPublish(array $productIds, int $adminId, bool $force = false): array public function bulkArchive(array $productIds, int $adminId): array public function bulkDelete(array $productIds, int $adminId, bool $force = false): array public function getStatistics(bool $includeDeleted = false): array public function getPopular(int $limit = 10, string $period = 'all', bool $adminMode = false): array public function getTrending(int $limit = 10, int $days = 7): array public function getNeedsUpdate(string $type = 'both', int $limit = 50): array public function validateForPublish(int $productId, bool $includeLinks = true): array public function checkLinks(int $productId): array public function checkProductLimit(int $adminId): array private function logAdminAction( private function calculateProductStatistics(int $productId, array $links): array private function calculateAverageRating(array $links): float private function calculatePriceRange(array $links): ?array private function calculateGrowthStatistics(): array private function clearProductCaches(int $productId): void private function clearAggregateCaches(): void private function getCacheKey(string $suffix): string 
109. [app/Services/RepositoryService.php] :: namespace App\Services || use App\Repositories\Interfaces\ProductRepositoryInterface || use App\Repositories\Concrete\ProductRepository || use App\Models\ProductModel || use CodeIgniter\Config\Services as CodeIgniterServices || use RuntimeException || class RepositoryService private static array $instances = [] || private static array $config = [ public static function product(bool $fresh = false): ProductRepositoryInterface private static function createProductRepository(): ProductRepositoryInterface private static function createProductModel(): ProductModel private static function createCacheService(): CacheService private static function createDatabaseConnection() public static function register(string $name, string $class, array $dependencies, array $config = []): void public static function getRegisteredRepositories(): array public static function getConfig(string $name): ?array public static function has(string $name): bool public static function make(string $name): ?object private static function resolveDependency(string $dependency) private static function resolveModel(string $modelIdentifier): object private static function resolveSpecificModel(string $modelClass): object private static function applyConfiguration(object $instance, array $config): void public static function clearInstances(): void public static function clearInstance(string $name): void public static function getCachedInstances(): array public static function preload(array $repositories = []): void public static function healthCheck(): array public static function getStatistics(): array public static function initialize(): void public static function __callStatic(string $name, array $arguments) 
110. [app/Services/ResponseFormatter.php] :: namespace App\Services || use App\DTOs\Queries\PaginationQuery || use CodeIgniter\API\ResponseTrait || use CodeIgniter\HTTP\ResponseInterface || class ResponseFormatter use ResponseTrait || protected $config || protected $paginationService || protected $requestId || public function __construct(?array $config = null, ?PaginationService $paginationService = null) public function success($data = null, string $message = 'Success', int $code = 200, array $meta = []): array public function error(string $message = 'An error occurred', int $code = 500, array $errors = [], array $meta = []): array public function validationError(array $validationErrors, string $message = 'Validation failed'): array public function notFound(string $message = 'Resource not found', ?string $resource = null, $identifier = null): array public function unauthorized(string $message = 'Unauthorized', ?string $reason = null): array public function forbidden(string $message = 'Forbidden', ?string $permission = null): array public function paginated( public function created($data = null, string $message = 'Resource created successfully', ?string $location = null): array public function updated($data = null, string $message = 'Resource updated successfully'): array public function deleted(string $message = 'Resource deleted successfully'): array public function noContent(): array public function sendJson(ResponseInterface $response, array $formattedResponse, array $headers = []): ResponseInterface protected function buildMeta(array $additionalMeta = []): array protected function getTimestamp(): string protected function generateRequestId(): string protected function getDebugInfo(): array protected function getExecutionTime(): float protected function cleanNullValues(array $response): array public function exception(\Throwable $exception, bool $includeStackTrace = false): array public function collection(array $dtos, string $message = 'Collection retrieved successfully'): array public function item($dto, string $message = 'Item retrieved successfully'): array public function getRequestId(): string public function setRequestId(string $requestId): self 
111. [app/Services/TransactionService.php] :: namespace App\Services || use App\Exceptions\InvalidArgumentException || use CodeIgniter\Database\ConnectionInterface || use CodeIgniter\Database\Exceptions\DatabaseException || use RuntimeException || use Throwable || class TransactionService private ConnectionInterface $db || private array $config || private array $metrics || private int $transactionLevel = 0 || private bool $isRolledBack = false || public const ISOLATION_READ_UNCOMMITTED = 'READ UNCOMMITTED' || public const ISOLATION_READ_COMMITTED = 'READ COMMITTED' || public const ISOLATION_REPEATABLE_READ = 'REPEATABLE READ' || public const ISOLATION_SERIALIZABLE = 'SERIALIZABLE' || public const ERROR_DEADLOCK = 1213 || public const ERROR_LOCK_WAIT_TIMEOUT = 1205 || public const ERROR_LOCK_ACQUIRE = 3572 || private const DEFAULT_CONFIG = [ public function __construct(?ConnectionInterface $db = null, array $config = []) public function start(?string $isolationLevel = null, bool $withSavepoint = true): bool public function commit(bool $force = false): bool public function rollback(bool $force = false, ?string $savepointName = null): bool public function execute(callable $callback, array $options = []) public function executeBatch(array $items, callable $processor, array $options = []): array public function executeQuery(string $sql, array $params = [], array $options = []) public function isActive(): bool public function getTransactionLevel(): int public function isRolledBack(): bool public function getMetrics(): array public function resetMetrics(): void public function getConnectionInfo(): array private function isRetryableError(DatabaseException $exception): bool private function isDeadlock(DatabaseException $exception): bool private function setIsolationLevel(string $isolationLevel): void private function setLockTimeout(int $timeoutSeconds): void private function logTransaction(string $message, array $context = []): void private function logError(string $message, ?Throwable $exception = null, array $context = []): void public function getQueryLog(): array public function createSavepoint(string $name): bool public function releaseSavepoint(string $name): bool public static function wrap(ConnectionInterface $db): self public static function create(array $config = []): self public static function getDefaultConfig(): array public function __destruct() 
112. [app/Services/ValidationService.php] :: namespace App\Services || use App\Entities\Product || use App\Entities\Category || use App\Entities\Link || use App\Entities\Admin || use App\Enums\ProductStatus || use App\Enums\ImageSourceType || use App\Exceptions\ValidationException || use App\Models\ProductModel || use App\Models\CategoryModel || use App\Models\LinkModel || use App\Models\AdminModel || use App\Repositories\Interfaces\ProductRepositoryInterface || use CodeIgniter\Validation\Validation || use DateTimeImmutable || class ValidationService private ProductRepositoryInterface $productRepository || private CategoryModel $categoryModel || private LinkModel $linkModel || private AdminModel $adminModel || private Validation $validation || private array $config || public const CONTEXT_CREATE = 'CREATE' || public const CONTEXT_UPDATE = 'UPDATE' || public const CONTEXT_PUBLISH = 'PUBLISH' || public const CONTEXT_DELETE = 'DELETE' || public const CONTEXT_RESTORE = 'RESTORE' || public const CONTEXT_ARCHIVE = 'ARCHIVE' || public const CONTEXT_VERIFY = 'VERIFY' || public const CONTEXT_BULK = 'BULK' || private const ERROR_CODE = 'BUSINESS_RULE_VIOLATION' || private const MAX_PRODUCTS_PER_DAY = 100 || private const MAX_CATEGORIES_PER_PRODUCT = 5 || private const MAX_LINKS_PER_PRODUCT = 10 || private const MIN_PRICE = 100 || // Rp 100 private const MAX_PRICE = 1000000000 || // Rp 1M private const MIN_PASSWORD_LENGTH = 8 || private const MAX_NAME_LENGTH = 255 || private const MAX_DESCRIPTION_LENGTH = 2000 || private array $validationCache = [] || public function __construct( public function validateProductCreate(array $data, int $adminId, string $context = self::CONTEXT_CREATE): array public function validateProductUpdate(int $productId, array $data, int $adminId): array public function validateProductPublish(int $productId, int $adminId, bool $forcePublish = false): array public function validateProductDelete(int $productId, int $adminId, bool $forceDelete = false): array public function validateCategoryOperation(int $categoryId, string $operation, ?array $data = null): array public function validateLinkOperation(array $linkData, string $operation, ?int $linkId = null): array public function validateBulkOperation(array $entityIds, string $entityType, string $operation, int $adminId): array public function checkDailyProductLimit(int $adminId): array public function validateAdminPermission(int $adminId, string $operation, ?string $entityType = null): array private function createError(string $code, string $message, array $context = []): array private function validateProductFields(array $data, string $context): array private function validateProductBusinessRules(array $data, int $adminId, string $context): array private function validateSystemConstraints(array $data, int $adminId, string $context): array private function validateProductRelations(array $data, string $context): array private function validateUpdateBusinessRules(Product $product, array $data, int $adminId): array private function validateCategoryFields(array $data): array private function validateCategoryUniqueness(array $data, ?int $excludeId = null): array private function validateProductForBulkOperation(int $productId, string $operation, int $adminId): array private function validateCategoryForBulkOperation(int $categoryId, string $operation): array private function getDefaultConfig(): array public function clearCache(): void public static function create(): self 
113. [app/Validators/DateValidator.php] :: namespace App\Validators || use CodeIgniter\Validation\Rules || use DateTime || use DateTimeImmutable || class DateValidator public function date_format($value, string $format, array $data, ?string &$error = null): bool public function after_date($value, string $minDate, array $data, ?string &$error = null): bool public function before_date($value, string $maxDate, array $data, ?string &$error = null): bool public function between_dates($value, string $dateRange, array $data, ?string &$error = null): bool public function working_day($value, ?string $param, array $data, ?string &$error = null): bool public function future_date($value, ?string $param, array $data, ?string &$error = null): bool public function past_date($value, ?string $param, array $data, ?string &$error = null): bool public function within_last_days($value, string $days, array $data, ?string &$error = null): bool public static function getSupportedFormats(): array 
114. [app/Validators/EntityValidator.php] :: namespace App\Validators || use CodeIgniter\Database\BaseConnection || use CodeIgniter\Validation\Rules || class EntityValidator protected $db || public function __construct(?BaseConnection $db = null) public function exists($value, string $tableField, array $data, ?string &$error = null): bool public function not_exists($value, string $tableField, array $data, ?string &$error = null): bool public function exists_and_active($value, string $tableField, array $data, ?string &$error = null): bool public function belongs_to($value, string $params, array $data, ?string &$error = null): bool public function no_dependencies($value, string $params, array $data, ?string &$error = null): bool public function unique_in_scope($value, string $params, array $data, ?string &$error = null): bool 
115. [app/Validators/EnumValidator.php] :: namespace App\Validators || use CodeIgniter\Validation\Rules || use InvalidArgumentException || class EnumValidator public function enum($value, string $enumClass, array $data, ?string &$error = null): bool public function enum_array($value, string $enumClass, array $data, ?string &$error = null): bool public function not_in_enum($value, string $excludedCases, array $data, ?string &$error = null): bool public function in_enum($value, string $allowedCases, array $data, ?string &$error = null): bool public static function getEnumCases(string $enumClass): array public static function getEnumMessage(string $enumClass): string 
116. [app/Validators/FileValidator.php] :: namespace App\Validators || use CodeIgniter\HTTP\Files\UploadedFile || use CodeIgniter\Validation\Rules || class FileValidator public function uploaded_file($value, ?string $param, array $data, ?string &$error = null): bool public function file_extension($value, string $allowedExtensions, array $data, ?string &$error = null): bool public function file_mime($value, string $allowedMimes, array $data, ?string &$error = null): bool public function file_size($value, string $maxSize, array $data, ?string &$error = null): bool public function file_dimensions($value, string $dimensions, array $data, ?string &$error = null): bool protected function getFileExtension($file): string protected function getFileMimeType($file): string protected function getFileSize($file): int protected function getTempPath($file): string protected function parseSize(string $size): int protected function getUploadErrorMessage(int $errorCode): string 
117. [app/Validators/ImageValidator.php] :: namespace App\Validators || use CodeIgniter\HTTP\Files\UploadedFile || class ImageValidator extends FileValidator public function is_image($value, ?string $param, array $data, ?string &$error = null): bool public function image_ratio($value, string $ratio, array $data, ?string &$error = null): bool public function image_square($value, ?string $param, array $data, ?string &$error = null): bool public function image_landscape($value, ?string $param, array $data, ?string &$error = null): bool public function image_portrait($value, ?string $param, array $data, ?string &$error = null): bool public function image_max($value, string $maxDimensions, array $data, ?string &$error = null): bool public function image_min($value, string $minDimensions, array $data, ?string &$error = null): bool public function image_exact($value, string $dimensions, array $data, ?string &$error = null): bool public function image_web_optimized($value, string $maxSize, array $data, ?string &$error = null): bool public static function getSupportedFormats(): array public static function getRecommendedDimensions(): array 
118. [app/Validators/ProductValidator.php] :: namespace App\Validators || use App\DTOs\Requests\Product\CreateProductRequest || use App\DTOs\Requests\Product\UpdateProductRequest || use App\DTOs\Requests\Product\PublishProductRequest || use App\Entities\Product || use App\Enums\ProductStatus || use App\Enums\ImageSourceType || use App\Models\ProductModel || use App\Models\CategoryModel || use App\Models\LinkModel || use App\Services\CacheService || use CodeIgniter\Validation\Validation || use DateTimeImmutable || class ProductValidator private Validation $validation || private ProductModel $productModel || private CategoryModel $categoryModel || private LinkModel $linkModel || private CacheService $cacheService || public const CONTEXT_CREATE = 'create' || public const CONTEXT_UPDATE = 'update' || public const CONTEXT_PUBLISH = 'publish' || public const CONTEXT_DELETE = 'delete' || public const CONTEXT_ARCHIVE = 'archive' || public const CONTEXT_RESTORE = 'restore' || public const CONTEXT_VERIFY = 'verify' || public const CONTEXT_BULK = 'bulk' || private array $baseRules = [ private array $imageRules = [ private array $statusRules = [ private const MIN_PRICE = 100 || private const MAX_PRICE = 1000000000 || private const MAX_NAME_LENGTH = 255 || private const MAX_DESCRIPTION_LENGTH = 2000 || private const MAX_SLUG_LENGTH = 100 || private const MAX_IMAGE_URL_LENGTH = 500 || private array $validationCache = [] || public function __construct( public function validateCreate(array $data, array $options = []): array public function validateUpdate(int $productId, array $data, array $options = []): array public function validatePublish(PublishProductRequest $request, Product $product): array public function validateDelete(int $productId, bool $force = false, array $options = []): array public function validateArchive(int $productId): array public function validateRestore(int $productId): array public function validateVerify(int $productId): array public function validateBulk(array $productIds, string $operation, array $options = []): array public function validatePrice(string $price, array $options = []): array public function validateImage(array $imageData, ImageSourceType $sourceType): array public function validateName(string $name, ?int $excludeProductId = null): array public function validateDescription(?string $description): array public function getRulesForContext(string $context, array $data = []): array private function runValidation(array $data, array $rules): array private function validateBusinessRules(array $data, string $context, array $options): array private function canProductBeUpdated(Product $product, array $updateData): bool private function isSlugUnique(string $slug, ?int $excludeId = null): bool private function isProductNameUnique(string $name, ?int $excludeId = null): bool private function checkDailyProductLimit(int $adminId): bool private function validateUploadedImage(array $imageData): array private function validateImageUrl(string $url): array private function validateExternalImage(array $data): array private function containsDangerousHtml(string $text): bool private function getFieldLabel(string $field): string private function getRuleFromMessage(string $message): string private function buildValidationResult(bool $isValid, array $errors, string $context): array public static function create(): self 
119. [app/Validators/SlugValidator.php] :: namespace App\Validators || use App\Models\ProductModel || use App\Models\CategoryModel || use App\Models\MarketplaceModel || use App\Models\PageModel || use App\Services\CacheService || use CodeIgniter\Validation\Validation || use DateTimeImmutable || use Exception || use InvalidArgumentException || class SlugValidator private Validation $validation || private CacheService $cacheService || private $productModel || private $categoryModel || private $marketplaceModel || private $pageModel || public const ENTITY_PRODUCT = 'product' || public const ENTITY_CATEGORY = 'category' || public const ENTITY_MARKETPLACE = 'marketplace' || public const ENTITY_PAGE = 'page' || public const ENTITY_POST = 'post' || public const ENTITY_TAG = 'tag' || public const ENTITY_USER = 'user' || public const CONTEXT_CREATE = 'create' || public const CONTEXT_UPDATE = 'update' || public const CONTEXT_GENERATE = 'generate' || private const MIN_LENGTH = 3 || private const MAX_LENGTH = 100 || private const DEFAULT_LENGTH = 50 || private const MAX_ATTEMPTS = 10 || // Maximum attempts for unique slug generation private const SLUG_PATTERN = '/^[a-z0-9]+(?:-[a-z0-9]+)*$/' || private const CLEAN_PATTERN = '/[^a-z0-9]+/' || private const MULTI_HYPHEN_PATTERN = '/-+/' || private const RESERVED_SLUGS = [ private const ENTITY_RESERVED_SLUGS = [ private const SEO_OPTIMIZATION_RULES = [ private const CACHE_TTL_SLUG_CHECK = 300 || // 5 minutes private const CACHE_TTL_RESERVED = 3600 || // 1 hour private const CACHE_TTL_SUGGESTIONS = 600 || // 10 minutes public function __construct( public function validate( public function generate( public function suggestAlternatives( public function isValid( public function normalize(string $slug, array $options = []): string public function analyzeSeo(string $slug, array $options = []): array public function isReserved(string $slug, ?string $entityType = null): bool public function getReservedSlugs(?string $entityType = null): array private function validateFormat(string $slug, array $options): array private function validateLength(string $slug, array $options): array private function validateReserved(string $slug, string $entityType, array $options): array private function validateUniqueness( private function validateSeo(string $slug, array $options): array private function validateEntitySpecific( private function checkDatabaseUniqueness( private function generateUniqueSlug( private function cleanString(string $string, array $options): string private function removeAccents(string $string): string private function truncateSlug(string $slug, int $maxLength): string private function removeStopWords(string $slug, array $stopWords, string $separator): string private function limitWords(string $slug, int $maxWords, string $separator): string private function generateRandomSuffix(int $length = 3): string private function findInvalidCharacters(string $slug): array private function checkPartialReserved(string $slug, string $entityType): array private function findStopWords(string $slug): array private function calculateLengthScore(int $length): array private function calculateWordScore(int $wordCount): array private function calculateKeywordScore(string $slug): array private function calculateReadabilityScore(string $slug): array private function calculateSpecialCharScore(string $slug): array private function getSeoRating(int $score): string private function getModelForEntity(string $entityType) private function getCacheKey(string $type, array $params = []): string private function buildValidationResult( public static function create(): self 
120. [tests/App/Entities/AdminTest.php] :: namespace tests\App\Entities || use App\Entities\Admin || use DateTimeImmutable || use PHPUnit\Framework\TestCase || class AdminTest extends TestCase public function testConstructorWithValidData() public function testConstructorWithEmptyUsername() public function testUsernameGetterSetter() public function testUsernameWithVeryLongString() public function testSetPasswordWithHashAndVerify() public function testPasswordNeedsRehash() public function testCanBeArchivedByAnotherAdmin() public function testCannotArchiveLastSuperAdmin() public function testCompleteAdminLifecycle() public function testUsernameValidation($username, $expectedValid) public function usernameProvider() public function testRecordLoginSetsCurrentTime() 
121. [tests/App/Entities/DebugAdminTest.php] :: namespace tests\App\Entities || use App\Entities\Admin || 
122. [tests/_support/Database/Migrations/2020-02-22-222222_example_migration.php] :: namespace Tests\Support\Database\Migrations || use CodeIgniter\Database\Migration || class ExampleMigration extends Migration protected $DBGroup = 'tests' || public function up(): void public function down(): void 
123. [tests/_support/Database/Seeds/ExampleSeeder.php] :: namespace Tests\Support\Database\Seeds || use CodeIgniter\Database\Seeder || class ExampleSeeder extends Seeder public function run(): void 
124. [tests/_support/Libraries/ConfigReader.php] :: namespace Tests\Support\Libraries || use Config\App || class ConfigReader extends App public function __construct() 
125. [tests/_support/Models/ExampleModel.php] :: namespace Tests\Support\Models || use CodeIgniter\Model || class ExampleModel extends Model protected $table = 'factories' || protected $primaryKey = 'id' || protected $returnType = 'object' || protected $useSoftDeletes = false || protected $allowedFields = [ protected $useTimestamps = true || protected $validationRules = [] || protected $validationMessages = [] || protected $skipValidation = false || 
126. [tests/bootstrap.php] ::  
127. [tests/database/ExampleDatabaseTest.php] :: use CodeIgniter\Test\CIUnitTestCase || use CodeIgniter\Test\DatabaseTestTrait || use Tests\Support\Database\Seeds\ExampleSeeder || use Tests\Support\Models\ExampleModel || final class ExampleDatabaseTest extends CIUnitTestCase use DatabaseTestTrait || protected $seed = ExampleSeeder::class || public function testModelFindAll(): void public function testSoftDeleteLeavesRow(): void 
128. [tests/session/ExampleSessionTest.php] :: use CodeIgniter\Test\CIUnitTestCase || final class ExampleSessionTest extends CIUnitTestCase public function testSessionSimple(): void 
129. [tests/unit/HealthTest.php] :: use CodeIgniter\Test\CIUnitTestCase || use Config\App || use Tests\Support\Libraries\ConfigReader || final class HealthTest extends CIUnitTestCase public function testIsDefinedAppPath(): void public function testBaseUrlHasBeenSet(): void 
