@startuml class-diagram
  package Config as Config {
    class "App" as Config_App {
      +baseURL : string
      +allowedHostnames : list<string>
      +indexPage : string
      +uriProtocol : string
      +permittedURIChars : string
      +defaultLocale : string
      +negotiateLocale : bool
      +supportedLocales : list<string>
      +appTimezone : string
      +charset : string
      +forceGlobalSecureRequests : bool
      +proxyIPs : array<string, string>
      +CSPEnabled : bool
    }
    class "Autoload\n<b>-------------------------------------------------------------------</b>" as Config_Autoload {
      +psr4 : array<string, (list<string>|string)>
      +classmap : array<string, string>
      +files : list<string>
      +helpers : list<string>
    }
    class "CURLRequest" as Config_CURLRequest {
      +shareOptions : bool
    }
    class "Cache" as Config_Cache {
      +handler : string
      +backupHandler : string
      +prefix : string
      +ttl : int
      +reservedCharacters : string
      +file : array{storePath?: string, mode?: int}
      +memcached : array{host?: string, port?: int, weight?: int, raw?: bool}
      +redis : array{host?: string, password?: (string|null), port?: int, timeout?: int, database?: int}
      +validHandlers : array<string, class-string<CacheInterface>>
      +cacheQueryString : bool|list<string>
    }
    class "ContentSecurityPolicy\n<b>Stores the default settings for the ContentSecurityPolicy, if you</b>" as Config_ContentSecurityPolicy {
      +reportOnly : bool
      +reportURI : ?string
      +upgradeInsecureRequests : bool
      +defaultSrc : list<string>|string|null
      +scriptSrc : list<string>|string
      +styleSrc : list<string>|string
      +imageSrc : list<string>|string
      +baseURI : list<string>|string|null
      +childSrc : list<string>|string
      +connectSrc : list<string>|string
      +fontSrc : list<string>|string
      +formAction : list<string>|string
      +frameAncestors : list<string>|string|null
      +frameSrc : list<string>|string|null
      +mediaSrc : list<string>|string|null
      +objectSrc : list<string>|string
      +manifestSrc : list<string>|string|null
      +pluginTypes : list<string>|string|null
      +sandbox : list<string>|string|null
      +styleNonceTag : string
      +scriptNonceTag : string
      +autoNonce : bool
    }
    class "Cookie" as Config_Cookie {
      +prefix : string
      +expires : DateTimeInterface|int|string
      +path : string
      +domain : string
      +secure : bool
      +httponly : bool
      +samesite : ''|'Lax'|'None'|'Strict'
      +raw : bool
    }
    class "Cors" as Config_Cors {
      +allowedOrigins : array
      +allowedMethods : array
      +allowedHeaders : array
      +exposedHeaders : array
      +allowCredentials : bool
      +maxAge : int
      +enabled : bool
      +logViolations : bool
      +alwaysAllowed : array
      +allowedPatterns : array
      +getConfig()
      -getProductionOrigins()
      +isOriginAllowed(origin)
      +generateHeaders(origin)
      +generatePreflightHeaders(origin)
    }
    class "Database\n<b>Database Configuration</b>" as Config_Database {
      +filesPath : string
      +defaultGroup : string
      +default : array<string, mixed>
      +tests : array<string, mixed>
      +__construct()
    }
    class "DocTypes" as Config_DocTypes {
      +list : array<string, string>
      +html5 : bool
    }
    class "Email" as Config_Email {
      +fromEmail : string
      +fromName : string
      +recipients : string
      +userAgent : string
      +protocol : string
      +mailPath : string
      +SMTPHost : string
      +SMTPUser : string
      +SMTPPass : string
      +SMTPPort : int
      +SMTPTimeout : int
      +SMTPKeepAlive : bool
      +SMTPCrypto : string
      +wordWrap : bool
      +wrapChars : int
      +mailType : string
      +charset : string
      +validate : bool
      +priority : int
      +CRLF : string
      +newline : string
      +BCCBatchMode : bool
      +BCCBatchSize : int
      +DSN : bool
    }
    class "Encryption\n<b>Encryption configuration.</b>" as Config_Encryption {
      +key : string
      +driver : string
      +blockSize : int
      +digest : string
      +rawData : bool
      +encryptKeyInfo : string
      +authKeyInfo : string
      +cipher : string
    }
    class "Exceptions\n<b>Setup how the exception handler works.</b>" as Config_Exceptions {
      +log : bool
      +ignoreCodes : list<int>
      +errorViewPath : string
      +sensitiveDataInTrace : list<string>
      +logDeprecations : bool
      +deprecationLogLevel : string
      +handler(statusCode, exception)
    }
    class "Feature\n<b>Enable/disable backward compatibility breaking features.</b>" as Config_Feature {
      +autoRoutesImproved : bool
      +oldFilterOrder : bool
      +limitZeroAsAll : bool
      +strictLocaleNegotiation : bool
    }
    class "Filters" as Config_Filters {
      +aliases : array<string, (class-string|list<class-string>)>
      +globals : array<string, array<string, array<string, (string|array<string>)>>>
      +methods : array<string, list<string>>
      +filters : array<string, (array<string, list<string>>|list<string>)>
      +required : list<string>
      +never : list<string>
      +__construct()
      -configureForEnvironment()
      +getFiltersForRoute(route, position)
      +isValidFilter(filterName)
      +getFilterClass(filterName)
    }
    class "ForeignCharacters" as Config_ForeignCharacters {
    }
    class "Format" as Config_Format {
      +supportedResponseFormats : list<string>
      +formatters : array<string, string>
      +formatterOptions : array<string, int>
    }
    class "Generators" as Config_Generators {
      +views : array<string, (array<string, string>|string)>
    }
    class "Honeypot" as Config_Honeypot {
      +hidden : bool
      +label : string
      +name : string
      +template : string
      +container : string
      +containerId : string
    }
    class "Images" as Config_Images {
      +defaultHandler : string
      +libraryPath : string
      +handlers : array<string, string>
    }
    class "Kint\n<b>--------------------------------------------------------------------------</b>" as Config_Kint {
      +plugins : list<(class-string<ConstructablePluginInterface>|ConstructablePluginInterface)>|null
      +maxDepth : int
      +displayCalledFrom : bool
      +expanded : bool
      +richTheme : string
      +richFolder : bool
      +richObjectPlugins : array<string, class-string<ValuePluginInterface>>|null
      +richTabPlugins : array<string, class-string<TabPluginInterface>>|null
      +cliColors : bool
      +cliForceUTF8 : bool
      +cliDetectWidth : bool
      +cliMinWidth : int
    }
    class "Logger" as Config_Logger {
      +threshold : int|list<int>
      +dateFormat : string
      +handlers : array<class-string<HandlerInterface>, array<string, (int|list<string>|string)>>
    }
    class "Migrations" as Config_Migrations {
      +enabled : bool
      +table : string
      +timestampFormat : string
    }
    class "Mimes\n<b>This file contains an array of mime types.  It is used by the</b>" as Config_Mimes {
      +mimes : array<string, (list<string>|string)>
      {static} +guessTypeFromExtension(extension)
      {static} +guessExtensionFromType(type, proposedExtension)
    }
    class "Modules\n<b>Modules Configuration.</b>" as Config_Modules {
      +enabled : bool
      +discoverInComposer : bool
      +composerPackages : array{only?: list<string>, exclude?: list<string>}
      +aliases : list<string>
    }
    class "Optimize\n<b>Optimization Configuration.</b>" as Config_Optimize {
      +configCacheEnabled : bool
      +locatorCacheEnabled : bool
    }
    class "Pager" as Config_Pager {
      +templates : array<string, string>
      +perPage : int
    }
    class "Paths\n<b>Paths</b>" as Config_Paths {
      +systemDirectory : string
      +appDirectory : string
      +writableDirectory : string
      +testsDirectory : string
      +viewDirectory : string
    }
    class "Publisher\n<b>Publisher Configuration</b>" as Config_Publisher {
      +restrictions : array<string, string>
    }
    class "Routing\n<b>Routing configuration</b>" as Config_Routing {
      +routeFiles : list<string>
      +defaultNamespace : string
      +defaultController : string
      +defaultMethod : string
      +translateURIDashes : bool
      +override404 : ?string
      +autoRoute : bool
      +prioritize : bool
      +multipleSegmentsOneParam : bool
      +moduleRoutes : array<string, string>
      +translateUriToCamelCase : bool
    }
    class "Security" as Config_Security {
      +csrfProtection : string
      +tokenRandomize : bool
      +tokenName : string
      +headerName : string
      +cookieName : string
      +expires : int
      +regenerate : bool
      +redirect : bool
    }
    class "Services\n<b>Services Configuration file.</b>" as Config_Services {
    }
    class "Session" as Config_Session {
      +driver : class-string<BaseHandler>
      +cookieName : string
      +expiration : int
      +savePath : string
      +matchIP : bool
      +timeToUpdate : int
      +regenerateDestroy : bool
      +DBGroup : ?string
      +lockRetryInterval : int
      +lockMaxRetries : int
    }
    class "Toolbar\n<b>--------------------------------------------------------------------------</b>" as Config_Toolbar {
      +collectors : list<class-string>
      +collectVarData : bool
      +maxHistory : int
      +viewsPath : string
      +maxQueries : int
      +watchedDirectories : list<string>
      +watchedExtensions : list<string>
    }
    class "UserAgents\n<b>-------------------------------------------------------------------</b>" as Config_UserAgents {
      +platforms : array<string, string>
      +browsers : array<string, string>
      +mobiles : array<string, string>
      +robots : array<string, string>
    }
    class "Validation" as Config_Validation {
      +ruleSets : 
      +customMessages : array
      +customRules : array
      +templates : array
      +apiRules : array
      +allowEmptyRules : bool
      +requireRule : bool
      +errorTemplate : string
      +getTemplate(templateName)
      +getApiRules(type)
    }
    class "View" as Config_View {
      +saveData : bool
      +filters : array<string, string>
      +plugins : array<string, (callable|list<string>|string)>
      +decorators : list<class-string<ViewDecoratorInterface>>
    }
  }
  package Controllers as Controllers {
    class "BaseController\n<b>BASE CONTROLLER - PURE THIN CONTROLLER</b>" as Controllers_BaseController {
      #request : IncomingRequest
      #response : ResponseInterface
      #logger : LoggerInterface
      #requestId : string
      +__construct()
      +initController(request, response, logger)
      #extractInput()
      #createRequestDto(dtoClass, context)
      #createQueryDto(queryDtoClass, defaults)
      #isJsonRequest()
      #getAuthenticatedUser()
      #getCurrentUserId()
      #getCurrentUserRole()
      #requireAuthentication()
      #requireRole(roles)
      #respondSuccess(data, message, code, meta)
      #respondError(message, code, errors)
      #respondValidationError(exception)
      #respondNotFound(message, resource)
      #respondUnauthorized(exception)
      #respondForbidden(exception)
      #respondCreated(data, location)
      #respondPaginated(data, total, page, perPage)
      #renderView(view, data)
      #renderPartial(partial, data)
      #handleException(exception)
      -generateRequestId()
      -buildMeta()
      -buildPaginationLinks(currentPage, totalPages)
      -logInitialization()
      -logException(exception)
    }
    class "Auth\n<b>AUTH CONTROLLER - SIMPLE & FOCUSED</b>" as Controllers_Auth {
      +login()
      +attemptLogin()
      +logout()
      -redirectBasedOnRole(role)
    }
    class "BaseAdmin\n<b>BaseAdmin Controller - Layer 4 (Presentation Layer)</b>" as Controllers_BaseAdmin {
      #adminData : array|null
      #adminId : int|null
      #adminRole : string|null
      #isSuperAdmin : bool
      #adminPermissions : array
      #sidebarMenu : array
      #pageTitle : string|null
      #breadcrumbs : array
      +initController(request, response, logger)
      #getAdminId()
      #getAdminData()
      #getAdminRole()
      #isAdminSuperAdmin()
      #getAdminPermissions()
      #hasPermission(permission)
      #requirePermission(permission)
      #renderAdminView(view, data, statusCode)
      #setPageTitle(title, appendAppName)
      #addBreadcrumb(label, url)
      #setBreadcrumbs(breadcrumbs)
      #adminUrl(path)
      #loadSidebarMenu()
      #filterMenuByPermissions(menuItems)
      #handleAdminGetRequest(serviceCall, viewConfig)
      #handleAdminWriteRequest(serviceCall, successMessage, redirectRoute, redirectParams)
      #handleAdminDeleteRequest(serviceCall, successMessage, redirectRoute)
      #handleAdminBulkAction(serviceCall, successMessage, redirectRoute)
      #getAdminRequestData()
      #createAdminDto(dtoClass, additionalData)
    }
    class "TestController" as Controllers_TestController {
      +index()
    }
    package Api as Controllers.Api {
      class "BaseApi\n<b>BaseApi Controller - Layer 4 (Presentation Layer)</b>" as Controllers_Api_BaseApi {
        #apiVersion : string
        #apiKeyData : array|null
        #rateLimitInfo : array|null
        +initController(request, response, logger)
        #getApiKeyData()
        #getApiKeyId()
        #getApiKeyScopes()
        #hasScope(scope)
        #requireScope(scope)
        #getRateLimitInfo()
        #applyRateLimitHeaders()
        #parseApiVersionFromRoute()
        #getApiRequestData()
        #createApiDto(dtoClass, additionalData)
        #handleApiGetRequest(serviceCall, filterConfig)
        #handleApiWriteRequest(dtoClass, serviceCall, additionalData)
        #handleApiDeleteRequest(serviceCall)
        #extractApiFilters(filterConfig)
        #parseFieldsParam(paramName, availableFields)
        #parseIncludeParam(paramName, availableIncludes)
        #parseSortParam(paramName, allowedFields)
        #getResourceType()
        #isJsonRequest()
        #getApiVersion()
      }
    }
  }
  package Filters as Filters {
    class "AdminAuth" as Filters_AdminAuth {
      -config : array
      -exceptRoutes : array
      -guestOnlyRoutes : array
      +__construct()
      +before(request, arguments)
      +after(request, response, arguments)
      -shouldSkip(route)
      -isGuestOnlyRoute(route)
      -isLoggedIn()
      -isValidToken(request)
      -isSessionValid()
      -extractToken(request)
      -isValidTokenFormat(token)
      -hasValidRememberMeCookie()
      -handleUnauthenticated(request)
      -handleInvalidToken(request)
      -handleInvalidSession(request)
      -redirectToDashboard(request)
      -updateLastActivity()
      -attachAdminToRequest(request)
      -addAdminSecurityHeaders(response)
      -isApiRequest(request)
      -routeMatches(route, pattern)
    }
    class "CorsFilter" as Filters_CorsFilter {
      -corsConfig : Cors
      +__construct()
      +before(request, arguments)
      +after(request, response, arguments)
      -handlePreflightRequest(request, origin)
      -isMethodAllowed(method)
      -parseRequestHeaders(headersString)
      -areHeadersAllowed(requestedHeaders)
    }
    class "AdminSessionCheck" as Filters_AdminSessionCheck {
      -authService : AuthService
      -config : array
      -exceptRoutes : array
      +__construct()
      +before(request, arguments)
      +after(request, response, arguments)
      -getAdminId(request)
      -validateSessionOrToken(request, adminId)
      -validateDatabaseSession(adminId)
      -validateDatabaseToken(adminId, token)
      -validateRememberMeCookie(adminId, cookie)
      -hasRoutePermission(request, adminId)
      -attachFullAdminData(request, adminId)
      -extractToken(request)
      -extractAdminIdFromToken(token)
      -getRememberMeCookie()
      -extractAdminIdFromRememberCookie(cookie)
      -getRequiredPermission(route, method)
      -shouldSkip(route)
      -routeMatches(route, pattern)
      -handleNoAdminId(request)
      -handleInvalidAdmin(request, adminId)
      -handleInvalidSession(request, adminId)
      -handleLockedAdmin(request, adminId)
      -handleInsufficientPermissions(request, adminId)
      -handleAdminNotFound(request, e)
      -handleValidationError(request, e)
      -logAdminAction(request, response)
      -isApiRequest(request)
      -isAdminRoute(request)
      -shouldLogRequest(request)
    }
    class "ApiAuthFilter" as Filters_ApiAuthFilter {
      -apiKeyService : ApiKeyService
      -rateLimiter : RateLimiterService
      -config : array
      -exceptRoutes : array
      -noRateLimitRoutes : array
      +__construct()
      +before(request, arguments)
      +after(request, response, arguments)
      -extractApiKey(request)
      -isValidApiKeyFormat(apiKey)
      -checkRateLimit(apiKeyData, request)
      -checkIpRestrictions(apiKeyData, request)
      -checkRouteScope(apiKeyData, route, method)
      -getRateLimitConfig(plan)
      -attachApiKeyData(request, apiKeyData)
      -logApiRequest(request, apiKeyData)
      -addRateLimitHeaders(response, request)
      -ipMatches(ip, pattern)
      -scopeMatches(scope, route, method)
      -pathMatches(pattern, path)
      -shouldSkip(route)
      -shouldSkipRateLimit(route)
      -handleMissingApiKey(request)
      -handleInvalidApiKeyFormat(request, apiKey)
      -handleInvalidApiKey(request, apiKey)
      -handleExpiredApiKey(request, apiKeyData)
      -handleRevokedApiKey(request, apiKeyData)
      -handleRateLimitExceeded(request, rateLimitInfo)
      -handleIpRestriction(request, apiKeyData)
      -handleRouteScopeViolation(request, apiKeyData)
    }
  }
  package Models as Models {
    class "BaseModel\n<b>Base Model Abstract Class</b>" as Models_BaseModel {
      #useSoftDeletes : bool
      #useTimestamps : bool
      #createdField : string
      #updatedField : string
      #deletedField : string
      #validationRules : array
      #validationMessages : array
      #skipValidation : bool
      +findActiveById(id)
      +delete(id, purge)
      +archive(id)
      +restore(id)
      +updateIfChanged(id, data)
      +bulkUpdate(ids, data)
      +countActive()
      +validateData(data)
    }
    class "LinkModel\n<b>Link Model - SQL Encapsulator for Link Entity</b>" as Models_LinkModel {
      #table : string
      #primaryKey : string
      #returnType : string
      #useSoftDeletes : bool
      #allowedFields : array
      #validationRules : array
      #validationMessages : array
      +scopeActive(builder)
      +scopeByProduct(builder, productId)
      +scopeByMarketplace(builder, marketplaceId)
      +scopeNeedsPriceUpdate(builder)
      +scopeNeedsValidation(builder)
      +scopeWithRevenue(builder)
      +scopePriceBetween(builder, min, max)
      +scopeBestSelling(builder)
      +scopeHighestRevenue(builder)
      +scopeWithBadge(builder)
      +findActiveWithRelations(id)
      +findByProductId(productId)
      +findCheapestForProduct(productId)
      +findNeedingPriceUpdate(limit)
      +findNeedingValidation(limit)
      +findTopPerforming(limit)
      +bulkUpdatePrice(linkIds, newPrice)
      +bulkMarkValidated(linkIds)
      +bulkIncrementClicks(linkIds, increment)
      +bulkIncrementSoldCount(linkIds, increment)
      +updateAffiliateRevenue(linkId, revenue)
      +getTotalRevenueForProduct(productId)
      +getTotalClicksForProduct(productId)
      +getAveragePriceForProduct(productId)
      +getMarketplaceDistribution(productId)
      +existsAndActive(linkId)
      +countActiveForProduct(productId)
      +isValidPriceFormat(price)
      +isValidUrl(url)
    }
    class "BadgeModel\n<b>Badge Model</b>" as Models_BadgeModel {
      #table : string
      #primaryKey : string
      #returnType : class-string<Badge>
      #allowedFields : array<string>
      #validationRules : array<string, array<string, string>>
      #useTimestamps : bool
      #useSoftDeletes : bool
      #dateFormat : string
      +findByLabel(label)
      +findByColor(color)
      +findWithoutColor()
      +findWithColor()
      +searchByLabel(searchTerm, limit, offset)
      +findAllActive(orderDirection)
      +paginateActive(perPage, page)
      +findByIds(ids)
      +labelExists(label, excludeId)
      +countByColorStatus()
      +findMostUsed(limit)
      +findArchived(orderDirection)
      +getStatistics()
      +insert(data, returnID)
      +update(id, data)
      +delete(id, purge)
      +bulkArchive(ids)
      +bulkRestore(ids)
    }
    class "ProductModel\n<b>Product Model - SQL Encapsulator for Product Entity</b>" as Models_ProductModel {
      #table : string
      #primaryKey : string
      #returnType : string
      #useSoftDeletes : bool
      #allowedFields : array
      #validationRules : array
      #validationMessages : array
      +valid_url_strict(str)
      +scopeActive(builder)
      +scopePublished(builder)
      +scopeByStatus(builder, status)
      +scopeByCategory(builder, categoryId)
      +scopeNeedsPriceUpdate(builder)
      +scopeNeedsLinkValidation(builder)
      +scopePendingVerification(builder)
      +scopeVerified(builder)
      +scopeDraft(builder)
      +scopeArchived(builder)
      +scopeWithUploadedImages(builder)
      +scopeMostViewed(builder)
      +scopeNewest(builder)
      +scopePriceLowToHigh(builder)
      +scopePriceHighToLow(builder)
      +findPublishedBySlug(slug)
      +findWithRelations(id)
      +findWithLinks(id)
      +findPublishedPaginated(perPage, page)
      +findByCategoryPaginated(categoryId, perPage, page)
      +findNeedingPriceUpdate(limit)
      +findNeedingLinkValidation(limit)
      +findPendingVerification(limit)
      +findVerifiedForPublication(limit)
      +search(query, limit)
      +findRelated(productId, limit)
      +findFeatured(limit)
      +updateStatus(productId, status)
      +verify(productId, adminId)
      +publish(productId)
      +archive(productId)
      +requestVerification(productId)
      +bulkUpdateStatus(productIds, status)
      +bulkMarkPriceChecked(productIds)
      +bulkMarkLinksChecked(productIds)
      +bulkIncrementViews(productIds, increment)
      +bulkUpdateCategory(productIds, categoryId)
      +getCountByStatus()
      +getPublishedCount()
      +getTotalActiveCount()
      +getAveragePublishedPrice()
      +getTotalPublishedViews()
      +getCountByCategory()
      +slugExists(slug, excludeId)
      +isValidCategory(categoryId)
      +canTransitionTo(productId, newStatus)
      +hasActiveLinks(productId)
      +getLimitStatus()
      +generateSlug(name, excludeId)
      +isValidSlugFormat(slug)
      +isValidPriceFormat(price)
      +incrementViewCount(productId, increment)
      +updatePriceCheckTimestamp(productId)
      +updateLinkCheckTimestamp(productId)
    }
    class "CategoryModel\n<b>Category Model - SQL Encapsulator for Category Entity</b>" as Models_CategoryModel {
      #table : string
      #primaryKey : string
      #returnType : string
      #useSoftDeletes : bool
      #allowedFields : array
      #validationRules : array
      #validationMessages : array
      +scopeActive(builder)
      +scopeRoot(builder)
      +scopeByParent(builder, parentId)
      +scopeSorted(builder)
      +scopeHasChildren(builder)
      +scopeIsLeaf(builder)
      +scopeMaxDepth(builder, maxDepth)
      +findBySlug(slug)
      +findWithParent(id)
      +findRootCategories()
      +findSubCategories(parentId)
      +findCategoryTree()
      +findWithProductCounts()
      +findWithChildrenCounts()
      +findWithAllCounts(id)
      +findDescendants(categoryId)
      +findCategoryPath(categoryId)
      +isAncestorOf(ancestorId, descendantId)
      +bulkReparent(categoryIds, newParentId)
      +bulkUpdateSortOrder(sortOrders)
      +bulkSetActive(categoryIds, active)
      +slugExists(slug, excludeId)
      +isValidParent(parentId)
      +checkDeletionPreconditions(categoryId)
      +getTotalActiveCount()
      +getMaxDepth()
      +generateSlug(name, excludeId)
      +isValidSlugFormat(slug)
      +getSubtreeIds(parentId)
    }
    class "MarketplaceModel\n<b>Marketplace Model</b>" as Models_MarketplaceModel {
      #table : string
      #primaryKey : string
      #returnType : class-string<Marketplace>
      #allowedFields : array<string>
      #validationRules : array<string, array<string, string>>
      #useTimestamps : bool
      #useSoftDeletes : bool
      #dateFormat : string
      +findBySlug(slug)
      +findByName(name)
      +findActive(orderDirection)
      +findInactive(orderDirection)
      +findWithIcons()
      +findWithoutIcons()
      +findByColor(color)
      +searchByName(searchTerm, limit, offset)
      +findAllActive(orderDirection)
      +paginateActive(perPage, page)
      +findByIds(ids)
      +slugExists(slug, excludeId)
      +nameExists(name, excludeId)
      +getLinkStatistics()
      +findWithActiveLinks()
      +findWithoutActiveLinks()
      +findMostUsed(limit)
      +paginateWithFilters(filters, perPage, page)
      +findWithFontAwesomeIcons()
      +findArchived(orderDirection)
      +getStatistics()
      +getColorDistribution()
      +insert(data, returnID)
      +update(id, data)
      +delete(id, purge)
      +activate(id)
      +deactivate(id)
      +bulkArchive(ids)
      +bulkRestore(ids)
      +bulkActivate(ids)
      +bulkDeactivate(ids)
      +initializeSamples()
      +createSample(overrides)
    }
    class "MarketplaceBadgeModel\n<b>MarketplaceBadge Model</b>" as Models_MarketplaceBadgeModel {
      #table : string
      #primaryKey : string
      #returnType : class-string<MarketplaceBadge>
      #allowedFields : array<string>
      #validationRules : array<string, array<string, string>>
      #useTimestamps : bool
      #useSoftDeletes : bool
      #dateFormat : string
      +findByLabel(label)
      +findByIcon(icon)
      +findWithIcons()
      +findWithoutIcons()
      +findByColor(color)
      +searchByLabel(searchTerm, limit, offset)
      +findAllActive(orderDirection)
      +paginateActive(perPage, page)
      +findByIds(ids)
      +labelExists(label, excludeId)
      +findCommonBadges()
      +findByIconPrefix(iconPrefix)
      +findUsageStatistics(limit)
      +findUnassignedBadges()
      +findWithFontAwesomeIcons()
      +findArchived(orderDirection)
      +getStatistics()
      +insert(data, returnID)
      +update(id, data)
      +delete(id, purge)
      +bulkArchive(ids)
      +bulkRestore(ids)
      +initializeCommonBadges()
    }
    class "ProductBadgeModel\n<b>ProductBadge Model</b>" as Models_ProductBadgeModel {
      #table : string
      #primaryKey : string|bool
      #returnType : class-string<ProductBadge>
      #useTimestamps : bool
      #useSoftDeletes : bool
      #allowedFields : array<string>
      #validationRules : array<string, string>
      #validationMessages : array<string, string>
      +findByCompositeKey(productId, badgeId)
      +findByProductId(productId)
      +findByBadgeId(badgeId)
      +deleteAssociation(productId, badgeId)
      +deleteAllForProduct(productId)
      +deleteAllForBadge(badgeId)
      +bulkInsert(associations)
      +associationExists(productId, badgeId)
      +countBadgesForProduct(productId)
      +countProductsForBadge(badgeId)
      +findForMultipleProducts(productIds)
      +findForMultipleBadges(badgeIds)
      +insert(data, returnID)
      +update(id, data)
      +delete(id, purge)
    }
    class "AdminModel\n<b>Admin Model</b>" as Models_AdminModel {
      #table : string
      #primaryKey : string
      #returnType : class-string<Admin>
      #allowedFields : array<string>
      #validationRules : array<string, array<string, string>>
      #useTimestamps : bool
      #useSoftDeletes : bool
      #dateFormat : string
      +findByUsername(username)
      +findByEmail(email)
      +findByUsernameOrEmail(identifier)
      +verifyCredentials(identifier, password)
      +findActiveById(id)
      +findSuperAdmins()
      +findRegularAdmins()
      +countSuperAdmins()
      +isLastSuperAdmin(adminId)
      +findActiveAdmins()
      +findInactiveAdmins()
      +findLockedAdmins(maxAttempts)
      +findInactiveForDays(days)
      +findAdminsNeedingPasswordRehash()
      +searchAdmins(searchTerm, limit, offset)
      +paginateWithFilters(filters, perPage, page)
      +findByIds(ids)
      +recordSuccessfulLogin(adminId)
      +recordFailedLoginAttempt(adminId)
      +resetLoginAttempts(adminId)
      +updatePassword(adminId, newPasswordHash)
      +activateAccount(adminId)
      +deactivateAccount(adminId)
      +updateRole(adminId, newRole)
      +getStatistics()
      +getActivityTimeline(days)
      +usernameExists(username, excludeId)
      +emailExists(email, excludeId)
      +insert(data, returnID)
      +update(id, data)
      +delete(id, purge)
      +bulkArchive(ids)
      +bulkRestore(ids)
      +initializeSystemAdmin()
      +createSample(overrides)
    }
    class "AuditLogModel\n<b>Audit Log Model - Immutable SQL Encapsulator Layer for Audit Trail Data</b>" as Models_AuditLogModel {
      #table : string
      #primaryKey : string
      #returnType : string
      #useSoftDeletes : bool
      #useTimestamps : bool
      #allowedFields : array<string>
      #validationRules : array<string, string>
      #validationMessages : array<string, array<string, string>>
      #skipValidation : bool
      +update(id, data)
      +delete(id, purge)
      +save(data)
      +insertAuditLog(auditLog)
      #scopeByAdmin(builder, adminId)
      #scopeByActionType(builder, actionType)
      #scopeByEntityType(builder, entityType)
      #scopeByEntityId(builder, entityId)
      #scopeByDateRange(builder, startDate, endDate)
      #scopeRecentDays(builder, days)
      #scopeOrderByPerformedAt(builder, direction)
      #scopeWithAdminInfo(builder)
      #scopeByIpAddress(builder, ipAddress)
      #scopeSearchInSummary(builder, searchText)
      +findForEntity(entityType, entityId, limit)
      +findByAdmin(adminId, limit)
      +findByActionType(actionType, limit)
      +findRecent(days, limit)
      +search(criteria, limit)
      +getStatistics(days)
      +getActionTypeDistribution(days)
      +getEntityTypeDistribution(days)
      +getDailyActivity(days)
      +getAdminActivityStats(days, limit)
      +getEntityAuditTrail(entityType, entityId, page, perPage)
      +cleanupOldLogs(daysOlderThan, archiveFirst)
      +getQuerySignature(query)
      +validateAuditLogData(data)
    }
  }
  package Entities as Entities {
    class "Admin\n<b>Admin Entity</b>" as Entities_Admin {
      -username : string
      -email : string
      -password_hash : string
      -name : string
      -role : string
      -active : bool
      -last_login : ?DateTimeImmutable
      -login_attempts : int
      -password : ?string
      +__construct(username, email, name)
      +getUsername()
      +getEmail()
      +getPasswordHash()
      +getName()
      +getRole()
      +isActive()
      +getLastLogin()
      +getLoginAttempts()
      +getPassword()
      +setUsername(username)
      +setEmail(email)
      +setPasswordHash(password_hash)
      +setName(name)
      +setRole(role)
      +setActive(active)
      +setLastLogin(last_login)
      +setLoginAttempts(login_attempts)
      +setPassword(password)
      +isSuperAdmin()
      +isRegularAdmin()
      +activate()
      +deactivate()
      +promoteToSuperAdmin()
      +demoteToAdmin()
      +recordLogin()
      +recordFailedLogin()
      +resetLoginAttempts()
      +isLocked(maxAttempts)
      +passwordNeedsRehash()
      +verifyPassword(password)
      +setPasswordWithHash(password, options)
      +canBeArchivedBy(currentAdminId, superAdminCount)
      +canBeDeletedBy(currentAdminId, superAdminCount)
      +getInitials()
      +getRoleColorClass()
      +getRoleLabel()
      +getStatusLabel()
      +getStatusColorClass()
      +getFormattedLastLogin()
      +isRecentlyActive()
      +validate()
      +prepareForSave(isUpdate)
      +toArray()
      {static} +fromArray(data)
      {static} +createSystemAdmin()
      {static} +createSample()
      {static} -ensureString(input)
      {static} -ensureInt(input)
      {static} -ensureBool(input)
    }
    class "AuditLog\n<b>Audit Log Entity</b>" as Entities_AuditLog {
      -id : ?int
      -admin_id : ?int
      -action_type : string
      -entity_type : string
      -entity_id : int
      -old_values : ?string
      -new_values : ?string
      -changes_summary : ?string
      -ip_address : ?string
      -user_agent : ?string
      -performed_at : ?DateTimeImmutable
      +__construct(action_type, entity_type, entity_id)
      +getId()
      +getAdminId()
      +getActionType()
      +getEntityType()
      +getEntityId()
      +getOldValues()
      +getNewValues()
      +getChangesSummary()
      +getIpAddress()
      +getUserAgent()
      +getPerformedAt()
      +setId(id)
      +setAdminId(admin_id)
      +setActionType(action_type)
      +setEntityType(entity_type)
      +setEntityId(entity_id)
      +setOldValues(old_values)
      +setNewValues(new_values)
      +setChangesSummary(changes_summary)
      +setIpAddress(ip_address)
      +setUserAgent(user_agent)
      +setPerformedAt(performed_at)
      +hasOldValues()
      +hasNewValues()
      +getOldValuesArray()
      +getNewValuesArray()
      +wasPerformedBy(adminId)
      +wasSystemAction()
      +getFormattedPerformedAt(format)
      +getActionTypeLabel()
      +getActionIcon()
      +getActionColorClass()
      +getTimeAgo()
      +isRecent()
      +getEntityReference()
      +summaryContains(search)
      +getTruncatedSummary(length)
      +validate()
      -isValidJson(json)
      +toArray()
      {static} +fromArray(data)
      {static} +createSample()
    }
    class "BaseEntity" as Entities_BaseEntity {
      #id : ?int
      -changes : array<string, array{old: mixed, new: mixed}>|null
      +__set(key, value)
      +__get(key)
      +getId()
      +setId(id)
      +isNew()
      +exists()
      +initialize()
      +markAsUpdated()
      +restore()
      #trackChange(property, oldValue, newValue)
      +getChanges()
      +hasChanges()
      +clearChanges()
      +getChangesSummary()
      -formatChangeValue(value)
      #validateStateTransition(currentState, newState, allowedTransitions)
      -resolveStateValue(state)
      +prepareForSave(isUpdate)
      +validate()
      +canBeArchived()
      +canBeRestored()
      +getEntityType()
      +getAuditIdentifier()
      +createSnapshot()
      +compareWith(other)
      {abstract} +toArray()
      {static} {abstract} +fromArray(data)
    }
    class "Category" as Entities_Category {
      -name : string
      -slug : string
      -icon : string
      -sort_order : int
      -active : bool
      -product_count : ?int
      -children_count : ?int
      -parent_id : ?int
      +__construct(name, slug)
      +getParentId()
      +setParentId(parent_id)
      +isRoot()
      +isSubCategory()
      +getName()
      +getSlug()
      +getIcon()
      +getSortOrder()
      +isActive()
      +setName(name)
      +setSlug(slug)
      +setIcon(icon)
      +setSortOrder(sort_order)
      +setActive(active)
      +activate()
      +deactivate()
      +canBeDeleted()
      +canBeArchived()
      +archive()
      +restore()
      +isInUse()
      +validate()
      +getIconHtml()
      +getDisplayClasses()
      +toArray()
      {static} +fromArray(data)
      {static} +createSample()
      +getProductCount()
      +getChildrenCount()
      +setProductCount(count)
      +setChildrenCount(count)
    }
    class "Marketplace" as Entities_Marketplace {
      -name : string
      -slug : string
      -icon : string|null
      -color : string
      -active : bool
      +__construct(name, slug)
      +getName()
      +getSlug()
      +getIcon()
      +getColor()
      +isActive()
      +setName(name)
      +setSlug(slug)
      +setIcon(icon)
      +setColor(color)
      +setActive(active)
      +activate()
      +deactivate()
      +hasIcon()
      +getCssClasses()
      +getColorStyle()
      +getBackgroundStyle()
      +isInUse()
      +canBeArchived()
      +archive()
      +restore()
      +validate()
      +toArray()
      {static} +fromArray(data)
      {static} +createDefault()
      {static} +createSamples()
    }
    class "Badge\n<b>Badge Entity</b>" as Entities_Badge {
      -label : string
      -color : ?string
      +__construct(label)
      +getLabel()
      +getColor()
      +setLabel(label)
      +setColor(color)
      +hasColor()
      +getColorStyle()
      +getTailwindClasses()
      +getIcon()
      +isInUse()
      +canBeArchived()
      +archive()
      +restore()
      +validate()
      +toArray()
      {static} +fromArray(data)
      {static} +createCommon(type)
      {static} +createAllCommon()
      {static} +createSample()
    }
    class "MarketplaceBadge" as Entities_MarketplaceBadge {
      -label : string
      -icon : ?string
      -color : ?string
      +__construct(label)
      +getLabel()
      +getIcon()
      +getColor()
      +setLabel(label)
      +setIcon(icon)
      +setColor(color)
      +hasIcon()
      +hasColor()
      +getColorStyle()
      +getDisplayHtml()
      +getTailwindClasses()
      +isAssigned()
      +canBeArchived()
      +archive()
      +restore()
      +validate()
      +toArray()
      {static} +fromArray(data)
      {static} +createCommon(type)
      {static} +createAllCommon()
      {static} +createSample()
    }
    class "Product\n<b>Product Entity</b>" as Entities_Product {
      -links : array|null
      -category_id : ?int
      -slug : string
      -image : ?string
      -name : string
      -description : ?string
      -market_price : string
      -view_count : int
      -image_path : ?string
      -image_source_type : ImageSourceType
      -status : ProductStatus
      -published_at : ?DateTimeImmutable
      -verified_at : ?DateTimeImmutable
      -verified_by : ?int
      -last_price_check : ?DateTimeImmutable
      -last_link_check : ?DateTimeImmutable
      #stateConfig : array
      +publish()
      +__construct(name, slug)
      +setLinks(links)
      +getLinks()
      +getCategoryId()
      +getSlug()
      +getImage()
      +getName()
      +getDescription()
      +getMarketPrice()
      +getViewCount()
      +getImagePath()
      +getImageSourceType()
      +getStatus()
      +getPublishedAt()
      +getVerifiedAt()
      +getVerifiedBy()
      +getLastPriceCheck()
      +getLastLinkCheck()
      +setCategoryId(category_id)
      +setSlug(slug)
      +setImage(image)
      +setName(name)
      +setDescription(description)
      +setMarketPrice(market_price)
      +setViewCount(view_count)
      +setImagePath(image_path)
      +setImageSourceType(image_source_type)
      +setStatus(status)
      +setPublishedAt(published_at)
      +setVerifiedAt(verified_at)
      +setVerifiedBy(verified_by)
      +setLastPriceCheck(last_price_check)
      +setLastLinkCheck(last_link_check)
      +incrementViewCount()
      +requestVerification()
      +verify(adminId)
      +archive()
      +restore()
      +isPublished()
      +isDraft()
      +isPendingVerification()
      +isVerified()
      +isArchived()
      +markPriceChecked()
      +markLinksChecked()
      +needsPriceUpdate()
      +needsLinkValidation()
      +getDisplayImageUrl()
      +getFormattedMarketPrice()
      +getStatusLabel()
      +getStatusColorClass()
      +getStatusIcon()
      +toArray()
      {static} +fromArray(data)
      {static} +createSample()
    }
    class "Link\n<b>Link Entity with Smart Commission Logic</b>" as Entities_Link {
      -product_id : int
      -marketplace_id : int
      -store_name : string
      -price : string
      -url : ?string
      -rating : string
      -active : bool
      -sold_count : int
      -clicks : int
      -last_price_update : ?DateTimeImmutable
      -last_validation : ?DateTimeImmutable
      -affiliate_revenue : string
      -marketplace_badge_id : ?int
      +__construct(product_id, marketplace_id, store_name)
      +getProductId()
      +getMarketplaceId()
      +getStoreName()
      +setPrice(price)
      +getPrice()
      +getUrl()
      +getRating()
      +isActive()
      +getSoldCount()
      +getClicks()
      +getLastPriceUpdate()
      +getLastValidation()
      +getAffiliateRevenue()
      +getMarketplaceBadgeId()
      +setProductId(product_id)
      +setMarketplaceId(marketplace_id)
      +setStoreName(store_name)
      +setUrl(url)
      +setRating(rating)
      +setActive(active)
      +setSoldCount(sold_count)
      +setClicks(clicks)
      +setLastPriceUpdate(last_price_update)
      +setLastValidation(last_validation)
      +setAffiliateRevenue(affiliate_revenue)
      +setMarketplaceBadgeId(marketplace_badge_id)
      +activate()
      +deactivate()
      +incrementClicks()
      +incrementSoldCount(increment)
      +addAffiliateRevenue(amount)
      +updatePrice(newPrice, autoUpdateTimestamp)
      +markAsValidated()
      +markAsInvalid()
      +hasMarketplaceBadge()
      +needsPriceUpdate()
      +needsValidation()
      +isValid()
      +isAffiliateActive()
      +getFormattedPrice()
      +getFormattedRating()
      +getFormattedAffiliateRevenue()
      +getStarRatingHtml()
      +getFormattedSoldCount()
      +getClickThroughRate(totalProductViews)
      +getRevenuePerClick()
      +archive()
      +calculateRevenue(customRate)
      +getImpliedCommissionRate()
      +toArray()
      {static} +fromArray(data)
      {static} +createSample(productId, marketplaceId)
    }
    class "ProductBadge\n<b>ProductBadge Entity</b>" as Entities_ProductBadge {
      -product_id : int
      -badge_id : int
      -assigned_at : ?DateTimeImmutable
      -assigned_by : ?int
      +getAssignedBy()
      +setAssignedBy(assigned_by)
      +getAssignedAt()
      +setAssignedAt(date)
      +__construct(product_id, badge_id)
      +getProductId()
      +setProductId(product_id)
      +getBadgeId()
      +setBadgeId(badge_id)
      +isForProduct(product_id)
      +isForBadge(badge_id)
      +getCompositeKey()
      +equals(other)
      +toArray()
      {static} +fromArray(data)
      {static} +createSample()
    }
    package Traits as Entities.Traits {
      class "SoftDeletableTrait\n<b>SoftDeletable Trait</b>" as Entities_Traits_SoftDeletableTrait {
        #deleted_at : ?DateTimeImmutable
        +getDeletedAt()
        +setDeletedAt(deleted_at)
        +isDeleted()
        +softDelete(param)
        +restore()
        +wasDeletedWithinDays(days)
        +getDaysSinceDeletion()
      }
      class "TimestampableTrait\n<b>Timestampable Trait</b>" as Entities_Traits_TimestampableTrait {
        -created_at : ?DateTimeImmutable
        -updated_at : ?DateTimeImmutable
        +getCreatedAt()
        +setCreatedAt(created_at)
        +getUpdatedAt()
        +setUpdatedAt(updated_at)
        +touch()
        +initializeTimestamps()
        +isOlderThanDays(days)
      }
      class "StateMachineTrait\n<b>State Machine Trait for consistent state transitions across entities</b>" as Entities_Traits_StateMachineTrait {
        #stateConfig : array
        #stateProperty : string
        #stateHistoryProperty : string
        #enableStateHistory : bool
        #maxStateHistory : int
        -pendingTransitions : array
        -transitionErrors : array
        -isTransitioning : bool
        -lastTransition : ?array
        +transitionTo(newState, reason, context, actorId)
        +getCurrentState()
        +getNextStates(context)
        +canTransitionTo(targetState, context)
        +getStateHistory(limit)
        +getLastTransition()
        #getStateConfig()
        -validateTransition(currentState, targetState, context)
        -findApplicableTransitions(currentState, targetState)
        -evaluateGuard(guard, context)
        -executeValidator(validator, context)
        -executeBeforeTransition(oldState, newState, context)
        -executeAfterTransition(oldState, newState, context)
        -setStateProperty(state)
        -updateStateTimestamp(newState)
        -createTransitionRecord(oldState, newState, reason, context, actorId)
        -addToStateHistory(transition)
        -normalizeState(state)
        -formatStateName(state)
        -formatTransitionError(currentState, targetState)
        +getStateMetadata(state)
        +getAllStates()
        +resetState(reason, actorId)
        +isInState(state)
        +isInAnyState(states)
        +getTimeInCurrentState()
        +getFormattedTimeInCurrentState()
      }
    }
  }
  package Services as Services {
    class "CacheService\n<b>Implementasi Layanan Cache</b>" as Services_CacheService {
      -cache : CodeIgniterCache
      -defaultTtl : int
      -namespace : string
      -stats : array
      -currentTag : string|null
      +__construct(cache, namespace, defaultTtl)
      +get(key)
      +set(key, value, ttl)
      +delete(key)
      +clear()
      +has(key)
      +remember(key, callback, ttl)
      +increment(key, value)
      +decrement(key, value)
      +getMultiple(keys)
      +setMultiple(items, ttl)
      +deleteMultiple(keys)
      +getStats()
      +getKey(key)
      +setDefaultTtl(ttl)
      +getDefaultTtl()
      +isAvailable()
      +forever(key, value)
      +getWithTtl(key)
      +tag(tag)
      +flushTag(tags)
      +cacheWithContext(prefix, context, callback, ttl)
      +getHitStats()
      +resetStats()
      +getHandler()
      -generateContextKey(prefix, context)
      -getTagIndexKey(tag)
      -addKeyToTagIndex(key)
      -removeKeyFromTagIndices(key)
      -clearTagIndices()
      {static} +create(config)
    }
    class "RepositoryService\n<b>Repository Service Factory</b>" as Services_RepositoryService {
      -instances : array
      -config : array
      {static} +product(fresh)
      {static} -createProductRepository()
      {static} -createProductModel()
      {static} -createCacheService()
      {static} -createDatabaseConnection()
      {static} +register(name, class, dependencies, config)
      {static} +getRegisteredRepositories()
      {static} +getConfig(name)
      {static} +has(name)
      {static} +make(name)
      {static} -resolveDependency(dependency)
      {static} -resolveModel(modelIdentifier)
      {static} -resolveSpecificModel(modelClass)
      {static} -applyConfiguration(instance, config)
      {static} +clearInstances()
      {static} +clearInstance(name)
      {static} +getCachedInstances()
      {static} +preload(repositories)
      {static} +healthCheck()
      {static} +getStatistics()
      {static} +initialize()
      {static} +__callStatic(name, arguments)
    }
    class "BadgeService\n<b>Badge Service</b>" as Services_BadgeService {
      -badgeRepository : BadgeRepositoryInterface
      -badgeValidator : BadgeBusinessValidator
      +__construct(db, cache, auditService, badgeRepository, badgeValidator)
      +createBadge(requestDTO)
      +updateBadge(badgeId, requestDTO)
      +getBadge(badgeId, withArchived)
      +getBadgeByLabel(label, withArchived)
      +deleteBadge(badgeId, force)
      +archiveBadge(badgeId)
      +restoreBadge(badgeId)
      +bulkArchiveBadges(badgeIds)
      +bulkRestoreBadges(badgeIds)
      +bulkUpdateStatus(badgeIds, status, context)
      +getAllBadges(filters, perPage, page)
      +getActiveBadges(orderDirection)
      +getArchivedBadges(orderDirection)
      +searchBadges(searchTerm, limit, offset)
      +getBadgesByColor(color)
      +getBadgesWithoutColor()
      +getBadgesWithColor()
      +getCommonBadges()
      +getUnassignedBadges()
      +canArchiveBadge(badgeId)
      +canDeleteBadge(badgeId)
      +isLabelUnique(label, excludeId)
      +validateBadgeColor(color)
      +getBadgeStatistics()
      +getBadgeUsageCounts(limit, offset)
      +getColorDistribution()
      +initializeCommonBadges()
      +createSampleBadge(overrides)
      +cleanupUnusedBadges(daysUnused, archiveFirst)
      +clearBadgeCache()
      +preloadBadgeCache(badgeIds)
      +getBadgeCacheStats()
      +processBatchBadgeUpdates(badgeIds, updateOperation, batchSize, progressCallback)
      +importBadges(importData, options)
      +exportBadges(badgeIds, options)
      +validateBusinessRules(dto, context)
      +getServiceName()
    }
    class "AuditService\n<b>Enterprise-grade Audit Service</b>" as Services_AuditService {
      -auditLogModel : AuditLogModel
      -request : ?RequestInterface
      -enabled : bool
      -config : array
      +__construct(auditLogModel, request, config)
      +logCrudOperation(actionType, entityType, entityId, admin, oldEntity, newEntity, notes, context)
      +logCreate(entityType, entityId, newEntity, admin, notes)
      +logUpdate(entityType, entityId, oldEntity, newEntity, admin, notes)
      +logDelete(entityType, entityId, entity, admin, softDelete, notes)
      +logRestore(entityType, entityId, entity, admin, notes)
      +logStateTransition(entityType, entityId, fromState, toState, admin, metadata, notes)
      +logAuthentication(actionType, admin, success, failureReason, ipAddress, userAgent)
      +getEntityAuditTrail(entityType, entityId, filters, limit, offset)
      +getAdminActivity(adminId, filters, limit, offset)
      +getRecentActivity(limit, entityType, actionType)
      +getStatistics(period)
      +cleanupOldLogs(daysOld)
      +exportToCsv(filters)
      +setEnabled(enabled)
      +isEnabled()
      +getConfig()
      -generateChangesSummary(oldEntity, newEntity)
      -prepareEntityData(entity)
      -mapStateTransitionToAction(fromState, toState)
      -formatPropertyName(property)
      -formatChangeValue(value)
      -logToFile(logData, errorMessage)
      -getDefaultConfig()
      {static} +create()
    }
    class "ValidationService\n<b>Enterprise-grade Business Rule Validation Service</b>" as Services_ValidationService {
      -productRepository : ProductRepositoryInterface
      -categoryModel : CategoryModel
      -linkRepository : LinkRepositoryInterface
      -adminModel : AdminModel
      -validation : Validation
      -config : array
      -validationCache : array
      +__construct(productRepository, categoryModel, linkRepository, adminModel, validation, config)
      +validateProductCreate(data, adminId, context)
      +validateProductUpdate(productId, data, adminId)
      +validateProductPublish(productId, adminId, forcePublish)
      +validateProductDelete(productId, adminId, forceDelete)
      +validateCategoryOperation(categoryId, operation, data)
      +validateLinkOperation(linkData, operation, linkId)
      +validateBulkOperation(entityIds, entityType, operation, adminId)
      +checkDailyProductLimit(adminId)
      +validateAdminPermission(adminId, operation, entityType)
      -createError(code, message, context)
      -validateProductFields(data, context)
      -validateProductBusinessRules(data, adminId, context)
      -validateSystemConstraints(data, adminId, context)
      -validateProductRelations(data, context)
      -validateUpdateBusinessRules(product, data, adminId)
      -validateCategoryFields(data)
      -validateCategoryUniqueness(data, excludeId)
      -validateProductForBulkOperation(productId, operation, adminId)
      -validateCategoryForBulkOperation(categoryId, operation)
      -getDefaultConfig()
      +clearCache()
      {static} +create()
    }
    class "CategoryService\n<b>CategoryService - Business orchestrator for category operations</b>" as Services_CategoryService {
      -categoryRepository : CategoryRepositoryInterface
      -productRepository : ProductRepositoryInterface
      -transactionService : TransactionService
      -categoryValidator : CategoryValidator
      -slugValidator : SlugValidator
      -auditService : AuditService
      +__construct(categoryRepository, productRepository, transactionService, categoryValidator, slugValidator, auditService)
      +create(request, createdBy)
      +update(categoryId, request, updatedBy)
      +delete(categoryId, deletedBy, force)
      +find(categoryId, withCounts)
      +findBySlug(slug, activeOnly, withCounts)
      +findAllActive(limit, withCounts)
      +getTree(activeOnly)
      +activate(categoryId, activatedBy)
      +deactivate(categoryId, deactivatedBy)
      +archive(categoryId, archivedBy)
      +restore(categoryId, restoredBy)
      +updateSortOrder(orderData, updatedBy)
      +moveCategory(categoryId, newParentId, movedBy)
      +getStatistics()
      +getCategoryUsage(activeOnly)
      +getNavigation(limit)
      +getOptions(activeOnly, includeRoot, excludeCategoryId)
      +validateCanDelete(categoryId)
      +validateCanArchive(categoryId)
      +search(keyword, filters, pagination)
      +bulkUpdateStatus(categoryIds, action, changedBy)
      -createCategoryResponse(category)
      -validateNoCircularReference(categoryId, newParentId)
      -getAllChildren(categoryId)
      +getRoots(activeOnly, limit)
      +getSubCategories(parentId, activeOnly, limit)
      +isMaxLimitReached()
    }
    class "AuthService" as Services_AuthService {
      -adminRepository : AdminRepositoryInterface
      -session : Session
      -request : RequestInterface
      -cacheService : CacheService
      -auditService : AuditService
      +__construct(adminRepository, session, request, cacheService, auditService)
      +login(identifier, password, rememberMe)
      +logout(adminId)
      +isLoggedIn()
      +getCurrentAdminId()
      +getCurrentAdmin()
      +validateSession()
      +getLoginAttempts(identifier)
      +requestPasswordReset(email)
      +validateResetToken(token)
      +resetPassword(token, newPassword)
      +updateCurrentPassword(currentPassword, newPassword)
      +getActiveSessions()
      +terminateAllOtherSessions()
      -validateLoginInput(identifier, password)
      -findAdminByIdentifier(identifier)
      -verifyPassword(password, hash)
      -recordFailedLoginAttempt(identifier, adminId)
      -resetLoginAttempts(identifier)
      -setLockout(identifier)
      -updateAdminLoginInfo(admin)
      -createSession(admin, rememberMe)
      -destroySession()
      -prepareAdminData(admin)
      -getInitials(name)
      -invalidateAllSessions(adminId)
      -formatLockoutTime(seconds)
      -getLoginAttemptsCacheKey(identifier)
      -getLockoutCacheKey(identifier)
      -getSessionCacheKey(sessionId)
    }
    class "LinkService" as Services_LinkService {
      -linkModel : LinkModel
      -productModel : ProductModel
      -marketplaceModel : MarketplaceModel
      -marketplaceBadgeModel : MarketplaceBadgeModel
      -validationService : ValidationService
      -auditService : AuditService
      -cacheService : CacheService
      -db : ConnectionInterface
      -config : array
      +__construct(linkModel, productModel, marketplaceModel, marketplaceBadgeModel, validationService, auditService, cacheService, db, config)
      +create(request, adminId)
      +update(request, adminId)
      +delete(linkId, adminId, force)
      +activate(linkId, adminId)
      +deactivate(linkId, adminId, reason)
      +recordClick(linkId, ipAddress, userAgent)
      +recordSale(linkId, saleAmount, quantity, metadata)
      +updatePrice(linkId, newPrice, autoUpdate, adminId)
      +validate(linkId, force)
      +bulkUpdate(request, adminId)
      +getAnalytics(linkId, period)
      +getLinksNeedingPriceUpdate(limit)
      +getLinksNeedingValidation(limit)
      +getTopPerformers(by, limit, period)
      +getProductLinkStats(productId)
      +getMarketplaceStats(marketplaceId, period)
      -setActiveStatus(linkId, active, adminId, reason)
      -performLinkValidation(link)
      -validateUrl(url)
      -checkUrlAccessibility(url)
      -calculateCommission(price, commissionRate)
      -calculateEffectiveCommissionRate(link)
      -calculatePriceRange(links)
      -calculateAverageRating(links)
      -calculateClickThroughRate(linkId)
      -calculatePerformanceTrend(linkId, period)
      -getPriceHistory(linkId, period)
      -getMarketplaceComparison(marketplaceId, price, rating)
      -getAllowedMarketplaceDomains()
      -isDomainAllowed(host, allowedDomains)
      -getProductName(productId)
      -getMarketplaceName(marketplaceId)
      -clearLinkCaches(linkId, productId)
      -clearProductLinkCaches(productId)
      -getCacheKey(suffix)
      -publishEvent(eventType, payload)
      -getAdminModel()
      -logError(message, context)
      -logEvent(event)
      -getDefaultConfig()
    }
    class "TransactionService" as Services_TransactionService {
      -db : ConnectionInterface
      -config : array
      -metrics : array
      -transactionLevel : int
      -isRolledBack : bool
      +__construct(db, config)
      +start(isolationLevel, withSavepoint)
      +commit(force)
      +rollback(force, savepointName)
      +execute(callback, options)
      +executeBatch(items, processor, options)
      -process(chunk)
      +executeQuery(sql, params, options)
      +isActive()
      +getTransactionLevel()
      +isRolledBack()
      +getMetrics()
      +resetMetrics()
      +getConnectionInfo()
      -isRetryableError(exception)
      -isDeadlock(exception)
      -setIsolationLevel(isolationLevel)
      -setLockTimeout(timeoutSeconds)
      -logTransaction(message, context)
      -logError(message, exception, context)
      +getQueryLog()
      +createSavepoint(name)
      +releaseSavepoint(name)
      {static} +wrap(db)
      {static} +create(config)
      {static} +getDefaultConfig()
      +__destruct()
    }
    class "ResponseFormatter" as Services_ResponseFormatter {
      #config : array
      #paginationService : PaginationService|null
      #requestId : string
      +__construct(config, paginationService)
      +success(data, message, code, meta)
      +error(message, code, errors, meta)
      +validationError(validationErrors, message)
      +notFound(message, resource, identifier)
      +unauthorized(message, reason)
      +forbidden(message, permission)
      +paginated(items, paginationQuery, totalItems, message, additionalMeta)
      +created(data, message, location)
      +updated(data, message)
      +deleted(message)
      +noContent()
      +sendJson(response, formattedResponse, headers)
      #buildMeta(additionalMeta)
      #getTimestamp()
      #generateRequestId()
      #getDebugInfo()
      #getExecutionTime()
      #cleanNullValues(response)
      +exception(exception, includeStackTrace)
      +collection(dtos, message)
      +item(dto, message)
      +getRequestId()
      +setRequestId(requestId)
    }
    class "PaginationService" as Services_PaginationService {
      #config : PagerConfig
      #pager : Pager|null
      +__construct(config)
      +createPagination(query, totalItems)
      +createLinks(baseUrl, query, totalItems, additionalParams)
      +createPager(group, totalItems, perPage, currentPage)
      +createFromRequest(requestData, config)
      +getDefault()
      #calculateTotalPages(totalItems, perPage)
      #calculateFrom(page, perPage, totalItems)
      #calculateTo(page, perPage, totalItems)
      #buildUrl(baseUrl, page, perPage, additionalParams)
      +generateCacheKey(baseKey, query)
      +generateCachePattern(baseKey, query)
      +isValidPage(page, perPage, totalItems)
      +getPerPageOptions()
      +getSummary(query, totalItems)
    }
    class "AuthorizationService" as Services_AuthorizationService {
      -adminRepository : AdminRepositoryInterface
      +__construct(adminRepository)
      +can(userId, permission, resource)
      +authorize(userId, permission, resource)
      +getPermissions(userId)
      +canAny(userId, permissions, resource)
      +canAll(userId, permissions, resource)
      +getRole(userId)
      -checkOwnershipPermission(userId, permission, resource, userPermissions)
      +isSuperAdmin(userId)
      +isAdmin(userId)
      +isEditor(userId)
      +isValidPermission(permission)
    }
    class "MarketplaceService" as Services_MarketplaceService {
      -marketplaceRepository : MarketplaceRepositoryInterface
      -validationService : ValidationService
      -auditService : AuditService
      -cacheService : CacheService
      -linkService : LinkService
      -db : ConnectionInterface
      -config : array
      +__construct(marketplaceRepository, validationService, auditService, cacheService, linkService, db, config)
      +create(request, creatorId)
      +update(request, updaterId)
      +delete(marketplaceId, deleterId, force)
      +activate(marketplaceId, activatorId)
      +deactivate(marketplaceId, deactivatorId, reason)
      -setActiveStatus(marketplaceId, adminId, active, reason)
      +getMarketplace(marketplaceId, includeStats)
      +getMarketplaces(filters, includeStats, limit)
      +updateConfiguration(request, updaterId)
      +getStatistics(marketplaceId)
      +testConnection(marketplaceId, adminId)
      -isValidDomain(domain)
      -clearMarketplaceCaches(marketplaceId)
      -getCacheKey(suffix)
      -getDefaultConfig()
    }
    class "BaseService\n<b>Base Service Abstract Class</b>" as Services_BaseService {
      #db : ConnectionInterface
      #cache : CacheInterface
      #auditService : AuditService
      #currentAdminId : int|null
      -pendingCacheOperations : array<(Closure|string)>
      -metrics : array
      -initializedAt : string
      -operationCount : int
      +__construct(db, cache, auditService)
      +transaction(operation, transactionName)
      +transactionWithRetry(operation, maxRetries, retryDelayMs)
      +authorize(permission, resource)
      +validateDTO(dto, context)
      +validateDTOOrFail(dto, context)
      +coordinateRepositories(repositories, operation)
      +getEntity(repository, id, throwIfNotFound)
      +audit(actionType, entityType, entityId, oldValues, newValues, additionalContext)
      +clearCacheForEntity(repository, entityId, pattern)
      +clearServiceCache()
      +withCaching(cacheKey, callback, ttl)
      +batchOperation(items, itemOperation, batchSize, progressCallback)
      +setAdminContext(adminId)
      +getCurrentAdminId()
      +getServiceCacheKey(operation, parameters)
      +getInitializedAt()
      +isReady()
      +getHealthStatus()
      +getPerformanceMetrics()
      +resetMetrics()
      +validateConfiguration()
      #queueCacheOperation(operation)
      -executePendingCacheOperations()
      -clearPendingCacheOperations()
      -handleTransactionError(exception, transactionName)
      -isRetryableError(exception)
      -checkPermission(adminId, permission, resource)
      -getEntityShortName(entityClass)
      -validateDependencies()
      -calculateOpsPerSecond()
      {abstract} +validateBusinessRules(dto, context)
      {abstract} +getServiceName()
    }
    class "AdminService\n<b>Admin Service - Business Orchestrator Layer for Administrator Operations</b>" as Services_AdminService {
      -adminRepository : AdminRepositoryInterface
      -auditLogRepository : AuditLogRepositoryInterface
      -transactionService : TransactionService
      -authService : AuthService
      -currentAdminId : int|null
      +__construct(adminRepository, auditLogRepository, transactionService, authService)
      +setCurrentAdmin(adminId)
      +getCurrentAdminId()
      +authenticate(loginDto)
      +logout(adminId, ipAddress)
      +createAdmin(createDto)
      +updateAdmin(updateDto)
      +getAdmin(adminId)
      +deleteAdmin(adminId)
      +restoreAdmin(adminId)
      +changePassword(changeDto)
      +resetPassword(adminId)
      +unlockAccount(adminId)
      +promoteToSuperAdmin(adminId)
      +demoteToRegularAdmin(adminId)
      +bulkUpdateStatus(bulkDto)
      +bulkDeleteAdmins(bulkDto)
      +searchAdmins(searchDto)
      +getStatistics()
      -transformAdminToResponse(admin)
      -createAuditLog(actionType, entityType, entityId, adminId, data)
      -validateSuperAdminPermission(adminId)
      +initializeSystemAdmin(username, email, password)
      +healthCheck()
    }
    package Product as Services.Product {
      class "ProductOrchestrator\n<b>ProductOrchestrator - Main Facade/Coordinator for Product Domain</b>" as Services_Product_ProductOrchestrator {
        -crudService : ProductCRUDInterface
        -workflowService : ProductWorkflowInterface
        -queryService : ProductQueryInterface
        -bulkService : ProductBulkInterface
        -maintenanceService : ProductMaintenanceInterface
        +__construct(crudService, workflowService, queryService, bulkService, maintenanceService)
        +transaction(operation, transactionName)
        +transactionWithRetry(operation, maxRetries, retryDelayMs)
        +authorize(permission, resource)
        +validateDTO(dto, context)
        +validateDTOOrFail(dto, context)
        +validateBusinessRules(dto, context)
        +coordinateRepositories(repositories, operation)
        +getEntity(repository, id, throwIfNotFound)
        +audit(actionType, entityType, entityId, oldValues, newValues, additionalContext)
        +clearCacheForEntity(repository, entityId, pattern)
        +clearServiceCache()
        +withCaching(cacheKey, callback, ttl)
        +batchOperation(items, itemOperation, batchSize, progressCallback)
        +setAdminContext(adminId)
        +getCurrentAdminId()
        +getServiceName()
        +getServiceCacheKey(operation, parameters)
        +getInitializedAt()
        +isReady()
        +getHealthStatus()
        +getPerformanceMetrics()
        +resetMetrics()
        +validateConfiguration()
        +createProduct(request)
        +getProduct(productId, includeRelations, adminMode)
        +getProductBySlug(slug, incrementViewCount)
        +updateProduct(request)
        +deleteProduct(request)
        +restoreProduct(productId, adminId)
        +quickEditProduct(request)
        +canDeleteProduct(productId, hardDelete)
        +productToResponse(product, adminMode, relations)
        +productsToResponses(products, adminMode, relations)
        +publishProduct(request)
        +verifyProduct(productId, adminId, notes)
        +requestVerification(productId, adminId)
        +archiveProduct(productId, adminId, reason)
        +unarchiveProduct(productId, adminId)
        +toggleProductStatus(request)
        +updateProductStatus(productId, status, adminId, notes, force)
        +revertToDraft(productId, adminId, reason)
        +canTransitionTo(productId, targetStatus, includeBusinessRules)
        +validateForPublication(productId)
        +validateForVerification(productId)
        +canPublishProduct(productId)
        +canArchiveProduct(productId)
        +getAllowedTransitions(productId)
        +sendForReview(productId, adminId, notes)
        +rejectProduct(productId, adminId, reason)
        +schedulePublication(productId, publishAt, adminId, notes)
        +cancelScheduledPublication(productId, adminId, reason)
        +getScheduledPublications(limit, offset)
        +processScheduledPublications(batchSize)
        +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
        +countProductsByStatus(status, includeArchived)
        +getProductsNeedingVerification(limit, offset, includeRelations)
        +getProductsPendingPublication(limit, offset, includeRelations)
        +getWorkflowStatistics(period)
        +getStatusHistory(productId, limit, offset)
        +getAverageStatusTimes(period)
        +getWorkflowBottlenecks(thresholdHours, limit)
        +bulkPublish(productIds, adminId, parameters)
        +bulkVerify(productIds, adminId, parameters)
        +bulkArchive(productIds, adminId, reason)
        +bulkRequestVerification(productIds, adminId)
        +getStateMachineConfig()
        +validateTransition(from, to, context)
        +addTransitionGuard(transitionName, guardCallback)
        +overrideTransition(productId, from, to, adminId, reason)
        +listProducts(query, adminMode)
        +searchProducts(keyword, filters, limit, offset, adminMode)
        +advancedSearch(criteria, orderBy, limit, offset, adminMode)
        +fullTextSearch(searchTerm, fields, limit, offset, useWildcards)
        +getProductsByCategory(categoryId, includeSubcategories, limit, offset, publishedOnly)
        +getProductsByCategories(categoryIds, operator, limit, offset, publishedOnly)
        +getUncategorizedProducts(limit, offset, publishedOnly)
        +getProductsByMarketplace(marketplaceId, activeLinksOnly, limit, offset, publishedOnly)
        +getProductsByMarketplaces(marketplaceIds, operator, activeLinksOnly, limit, offset, publishedOnly)
        +getProductsWithoutLinks(limit, offset, publishedOnly)
        +getPublishedProducts(limit, offset, orderBy)
        +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
        +getProductsByStatuses(statuses, operator, limit, offset, includeRelations)
        +getDraftProducts(limit, offset, includeRelations)
        +getPendingVerificationProducts(limit, offset, includeRelations)
        +getVerifiedProducts(limit, offset, includeRelations)
        +getArchivedProducts(limit, offset, includeRelations)
        +getPopularProducts(limit, publishedOnly)
        +getTrendingProducts(limit, period)
        +getRecentlyAddedProducts(limit, publishedOnly)
        +getRecentlyUpdatedProducts(limit, publishedOnly)
        +getFeaturedProducts(limit)
        +getProductsByPriceRange(minPrice, maxPrice, limit, offset, publishedOnly)
        +getProductsBelowPrice(price, limit, offset, publishedOnly)
        +getProductsAbovePrice(price, limit, offset, publishedOnly)
        +getCheapestProducts(limit, publishedOnly)
        +getMostExpensiveProducts(limit, publishedOnly)
        +getProductsNeedingPriceUpdate(daysThreshold, limit, publishedOnly)
        +getProductsNeedingLinkValidation(daysThreshold, limit, publishedOnly)
        +getProductsWithMissingImages(limit, offset, publishedOnly)
        +getProductsWithMissingDescriptions(limit, offset, publishedOnly)
        +getProductsWithOutdatedInfo(daysThreshold, limit, publishedOnly)
        +getProductsWithBadges(badgeIds, operator, limit, offset, publishedOnly)
        +getProductsWithMarketplaceBadges(marketplaceBadgeIds, operator, limit, offset, publishedOnly)
        +getProductsVerifiedBy(adminId, limit, offset, publishedOnly)
        +getProductRecommendations(currentProductId, limit, criteria)
        +getSimilarProducts(productId, limit, similarityFactors)
        +getFrequentlyBoughtTogether(productId, limit)
        +getCrossSellProducts(productId, limit)
        +getUpsellProducts(productId, limit)
        +countProducts(criteria, includeArchived)
        +countProductsByStatus(status, includeArchived)
        +countProductsByCategory(categoryId, publishedOnly)
        +getPriceStatistics(criteria)
        +getViewStatistics(criteria)
        +clearQueryCaches(patterns)
        +warmQueryCaches(queryConfigs)
        +getQueryCacheStatistics()
        +generateQueryCacheKey(operation, parameters)
        +validateQueryParameters(parameters, context)
        +buildFilterSummary(query)
        +getQueryExecutionPlan(query, explain)
        +batchQuery(queries, parallel)
        +streamQueryResults(query, callback, batchSize)
        +getQueryPerformanceMetrics(query)
        +bulkAction(request)
        +executeBulkWithCallback(productIds, itemCallback, context, useTransaction, batchSize)
        +bulkUpdateStatus(productIds, status, adminId, parameters)
        +bulkPublish(productIds, adminId, parameters)
        +bulkVerify(productIds, adminId, parameters)
        +bulkArchive(productIds, adminId, reason, parameters)
        +bulkRestore(productIds, adminId, parameters)
        +bulkDelete(productIds, adminId, parameters)
        +bulkRequestVerification(productIds, adminId, parameters)
        +bulkRevertToDraft(productIds, adminId, reason)
        +bulkUpdateData(productIds, data, adminId, parameters)
        +bulkUpdatePrices(priceUpdates, adminId, parameters)
        +bulkUpdateCategories(productIds, categoryId, adminId, parameters)
        +bulkAssignBadges(productIds, badgeIds, adminId, parameters)
        +bulkRemoveBadges(productIds, badgeIds, adminId)
        +bulkUpdateImages(productIds, imageUrl, sourceType, adminId)
        +bulkImport(productsData, adminId, parameters)
        +bulkExport(productIds, parameters)
        +bulkClone(productIds, adminId, parameters)
        +bulkMerge(productIds, adminId, parameters)
        +bulkMarkPricesChecked(productIds, adminId)
        +bulkMarkLinksChecked(productIds, adminId)
        +bulkRegenerateSlugs(productIds, adminId, parameters)
        +bulkUpdateMetadata(productIds, metadata, adminId, merge_strategy)
        +bulkCleanup(parameters)
        +validateBulkAction(productIds, action, parameters)
        +preflightCheck(productIds, operation, parameters)
        +estimateResourceRequirements(productIds, operation, parameters)
        +checkBulkDeletionDependencies(productIds, hardDelete)
        +startBackgroundBulkJob(request)
        +getBulkJobStatus(jobId)
        +cancelBulkJob(jobId, adminId, reason)
        +listBulkJobs(limit, offset, status)
        +cleanupBulkJobs(olderThanDays)
        +getBulkStatistics(period)
        +getBulkPerformanceMetrics(limit)
        +generateBulkReport(startDate, endDate, format)
        +retryFailedBulkItems(jobId, itemIds, adminId, retryParameters)
        +getBulkErrorDetails(jobId, itemIds)
        +createRecoveryPlan(jobId)
        +executeRecoveryPlan(jobId, recoverySteps, adminId)
        +bulkClearCaches(productIds, parameters)
        +bulkWarmCaches(productIds, parameters)
        +calculateOptimalBatchSize(operation, totalItems, constraints)
        +createOptimizedBatches(productIds, operation, parameters)
        +executeWithOptimizedBatching(productIds, batchCallback, optimizationParameters)
        +clearAllProductCaches()
        +clearProductCache(productId, options)
        +clearCacheMatching(pattern, options)
        +warmProductCaches(productIds, options)
        +getCacheStatistics()
        +optimizeCacheConfiguration(constraints)
        +preloadFrequentProductCache(criteria)
        +getProductStatistics(period, options)
        +getDashboardStatistics(options)
        +getPerformanceMetrics(period)
        +getBusinessIntelligenceData(dimensions, metrics, filters)
        +calculateProductHealthScore(productId)
        +getSystemHealthStatus()
        +runDatabaseMaintenance(tasks)
        +validateDataIntegrity(options)
        +rebuildProductData(options)
        +archiveOldProducts(criteria)
        +cleanupProductData(options)
        +importProducts(source, options)
        +exportProducts(criteria, options)
        +generateImportTemplate(format, options)
        +validateImportData(data, format, options)
        +scheduleImportExportJob(config, options)
        +createBackup(options)
        +restoreBackup(backup, options)
        +listBackups(options)
        +verifyBackup(backup)
        +createDisasterRecoveryPlan()
        +reindexProductSearch(options)
        +recalculateAggregates(options)
        +synchronizeWithExternalSystems(systems, options)
        +generateReport(report_type, parameters, options)
        +migrateProductData(migration_config, options)
        +setupMonitoring(monitors, options)
        +getSystemAlerts(options)
        +acknowledgeAlert(alert_id, options)
        +getMonitoringDashboard()
        +runDiagnostics(tests, options)
        +debugProduct(productId, options)
        +getProductLogs(filters, options)
        +generateHealthReport(options)
        +updateSystemConfiguration(config, options)
        +getSystemConfiguration(options)
        +resetConfiguration(options)
        -getOrchestratorCallCount()
        +getServiceComposition()
        +routeToService(method, parameters)
        -getMethodServiceMap()
        -getServiceByType(type)
      }
      package Concrete as Services.Product.Concrete {
        class "ProductCRUDService\n<b>ProductCRUDService - Concrete Implementation for Product CRUD Operations</b>" as Services_Product_Concrete_ProductCRUDService {
          -productRepository : ProductRepositoryInterface
          -categoryRepository : CategoryRepositoryInterface
          -linkRepository : LinkRepositoryInterface
          -auditLogRepository : AuditLogRepositoryInterface
          -productValidator : ProductValidator
          -serviceStats : array
          +__construct(db, cache, auditService, productRepository, categoryRepository, linkRepository, auditLogRepository, productValidator)
          +getServiceName()
          +validateBusinessRules(dto, context)
          +createProduct(request)
          +getProduct(productId, includeRelations, adminMode)
          +getProductBySlug(slug, incrementViewCount)
          +updateProduct(request)
          +deleteProduct(request)
          +restoreProduct(productId, adminId)
          +quickEditProduct(request)
          +canDeleteProduct(productId, hardDelete)
          +productToResponse(product, adminMode, relations)
          +productsToResponses(products, adminMode, relations)
          -validateCreateBusinessRules(dto, context)
          -validateUpdateBusinessRules(dto, context)
          -validateDeleteBusinessRules(dto, context)
          -validateQuickEditBusinessRules(dto, context)
          -applyProductUpdates(product, request)
          -applyQuickEdits(product, request)
          -loadProductRelations(product, relationTypes)
          -canAdminViewProduct(product)
          -invalidateProductCache(productId)
        }
        class "ProductWorkflowService\n<b>ProductWorkflowService - Concrete Implementation for Product Status & Workflow Operations</b>" as Services_Product_Concrete_ProductWorkflowService {
          -productRepository : ProductRepositoryInterface
          -auditLogRepository : AuditLogRepositoryInterface
          -productValidator : ProductValidator
          -workflowStats : array
          +__construct(db, cache, auditService, productRepository, auditLogRepository, productValidator)
          +getServiceName()
          +validateBusinessRules(dto, context)
          +publishProduct(request)
          +verifyProduct(productId, adminId, notes)
          +requestVerification(productId, adminId)
          +archiveProduct(productId, adminId, reason)
          +unarchiveProduct(productId, adminId)
          +toggleProductStatus(request)
          +updateProductStatus(productId, status, adminId, notes, force)
          +revertToDraft(productId, adminId, reason)
          +canTransitionTo(productId, targetStatus, includeBusinessRules)
          +validateForPublication(productId)
          +validateForVerification(productId)
          +canPublishProduct(productId)
          +canArchiveProduct(productId)
          +getAllowedTransitions(productId)
          +sendForReview(productId, adminId, notes)
          +rejectProduct(productId, adminId, reason)
          +schedulePublication(productId, publishAt, adminId, notes)
          +cancelScheduledPublication(productId, adminId, reason)
          +getScheduledPublications(limit, offset)
          +processScheduledPublications(batchSize)
          +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
          +countProductsByStatus(status, includeArchived)
          +getProductsNeedingVerification(limit, offset, includeRelations)
          +getProductsPendingPublication(limit, offset, includeRelations)
          +getWorkflowStatistics(period)
          +getStatusHistory(productId, limit, offset)
          +getAverageStatusTimes(period)
          +getWorkflowBottlenecks(thresholdHours, limit)
          +bulkPublish(productIds, adminId, parameters)
          +bulkVerify(productIds, adminId, parameters)
          +bulkArchive(productIds, adminId, reason)
          +bulkRequestVerification(productIds, adminId)
          +getStateMachineConfig()
          +validateTransition(from, to, context)
          +addTransitionGuard(transitionName, guardCallback)
          +overrideTransition(productId, from, to, adminId, reason)
          -validatePublishBusinessRules(dto, context)
          -validateToggleStatusBusinessRules(dto, context)
          -calculateAverageStatusTimes(startDate, endDate)
          -identifyWorkflowBottlenecks(averageTimes)
          -invalidateProductCache(productId)
          +getWorkflowStats()
        }
        class "ProductQueryService\n<b>ProductQueryService - Concrete Implementation for Product Search, Filtering & Listing Operations</b>" as Services_Product_Concrete_ProductQueryService {
          -productRepository : ProductRepositoryInterface
          -categoryRepository : CategoryRepositoryInterface
          -linkRepository : LinkRepositoryInterface
          -marketplaceRepository : MarketplaceRepositoryInterface
          -queryStats : array
          -totalExecutionTime : float
          +__construct(db, cache, auditService, productRepository, categoryRepository, linkRepository, marketplaceRepository)
          +getServiceName()
          +validateBusinessRules(dto, context)
          +listProducts(query, adminMode)
          +searchProducts(keyword, filters, limit, offset, adminMode)
          +advancedSearch(criteria, orderBy, limit, offset, adminMode)
          +fullTextSearch(searchTerm, fields, limit, offset, useWildcards)
          +getProductsByCategory(categoryId, includeSubcategories, limit, offset, publishedOnly)
          +getProductsByCategories(categoryIds, operator, limit, offset, publishedOnly)
          +getUncategorizedProducts(limit, offset, publishedOnly)
          +getProductsByMarketplace(marketplaceId, activeLinksOnly, limit, offset, publishedOnly)
          +getProductsByMarketplaces(marketplaceIds, operator, activeLinksOnly, limit, offset, publishedOnly)
          +getProductsWithoutLinks(limit, offset, publishedOnly)
          +getPublishedProducts(limit, offset, orderBy)
          +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
          +getProductsByStatuses(statuses, operator, limit, offset, includeRelations)
          +getDraftProducts(limit, offset, includeRelations)
          +getPendingVerificationProducts(limit, offset, includeRelations)
          +getVerifiedProducts(limit, offset, includeRelations)
          +getArchivedProducts(limit, offset, includeRelations)
          +getPopularProducts(limit, publishedOnly)
          +getTrendingProducts(limit, period)
          +getRecentlyAddedProducts(limit, publishedOnly)
          +getRecentlyUpdatedProducts(limit, publishedOnly)
          +getFeaturedProducts(limit)
          +getProductsByPriceRange(minPrice, maxPrice, limit, offset, publishedOnly)
          +getProductsBelowPrice(price, limit, offset, publishedOnly)
          +getProductsAbovePrice(price, limit, offset, publishedOnly)
          +getCheapestProducts(limit, publishedOnly)
          +getMostExpensiveProducts(limit, publishedOnly)
          +getProductsNeedingPriceUpdate(daysThreshold, limit, publishedOnly)
          +getProductsNeedingLinkValidation(daysThreshold, limit, publishedOnly)
          +getProductsWithMissingImages(limit, offset, publishedOnly)
          +getProductsWithMissingDescriptions(limit, offset, publishedOnly)
          +getProductsWithOutdatedInfo(daysThreshold, limit, publishedOnly)
          +getProductsWithBadges(badgeIds, operator, limit, offset, publishedOnly)
          +getProductsWithMarketplaceBadges(marketplaceBadgeIds, operator, limit, offset, publishedOnly)
          +getProductsVerifiedBy(adminId, limit, offset, publishedOnly)
          +getProductRecommendations(currentProductId, limit, criteria)
          +getSimilarProducts(productId, limit, similarityFactors)
          +getFrequentlyBoughtTogether(productId, limit)
          +getCrossSellProducts(productId, limit)
          +getUpsellProducts(productId, limit)
          +countProducts(criteria, includeArchived)
          +countProductsByStatus(status, includeArchived)
          +countProductsByCategory(categoryId, publishedOnly)
          +getPriceStatistics(criteria)
          +getViewStatistics(criteria)
          +clearQueryCaches(patterns)
          +warmQueryCaches(queryConfigs)
          +getQueryCacheStatistics()
          +generateQueryCacheKey(operation, parameters)
          +validateQueryParameters(parameters, context)
          +buildFilterSummary(query)
          +getQueryExecutionPlan(query, explain)
          +batchQuery(queries, parallel)
          +streamQueryResults(query, callback, batchSize)
          +getQueryPerformanceMetrics(query)
          -estimateQueryRows(filters)
          -analyzeQueryComplexity(filters)
          -generateQueryRecommendations(complexity, executionTime, resultCount)
          -getCacheMemoryUsage()
          -getMostFrequentQueries()
          #withCaching(cacheKey, callback, ttl)
          +getQueryStats()
        }
        class "ProductBulkService\n<b>ProductBulkService - Business Orchestrator for Bulk Product Operations</b>" as Services_Product_Concrete_ProductBulkService {
          -productRepository : ProductRepositoryInterface
          -auditLogRepository : AuditLogRepositoryInterface
          -linkRepository : LinkRepositoryInterface
          -productValidator : ProductValidator
          -cacheService : CacheService
          -transactionService : TransactionService
          -bulkStats : array
          +__construct(productRepository, auditLogRepository, linkRepository, productValidator, cacheService, transactionService, db, cache, auditService)
          +getServiceName()
          +validateBusinessRules(dto, context)
          -validateBulkActionBusinessRules(dto, context)
          +bulkAction(request)
          +executeBulkWithCallback(productIds, itemCallback, context, useTransaction, batchSize)
          +bulkUpdateStatus(productIds, status, adminId, parameters)
          +bulkPublish(productIds, adminId, parameters)
          +bulkVerify(productIds, adminId, parameters)
          +bulkArchive(productIds, adminId, reason, parameters)
          +bulkRestore(productIds, adminId, parameters)
          +bulkDelete(productIds, adminId, parameters)
          +bulkRequestVerification(productIds, adminId, parameters)
          +bulkRevertToDraft(productIds, adminId, reason)
          +bulkUpdateData(productIds, data, adminId, parameters)
          +bulkUpdatePrices(priceUpdates, adminId, parameters)
          +bulkUpdateCategories(productIds, categoryId, adminId, parameters)
          +bulkAssignBadges(productIds, badgeIds, adminId, parameters)
          +bulkRemoveBadges(productIds, badgeIds, adminId)
          +bulkUpdateImages(productIds, imageUrl, sourceType, adminId)
          +bulkImport(productsData, adminId, parameters)
          +bulkExport(productIds, parameters)
          +bulkClone(productIds, adminId, parameters)
          +bulkMerge(productIds, adminId, parameters)
          +bulkMarkPricesChecked(productIds, adminId)
          +bulkMarkLinksChecked(productIds, adminId)
          +bulkRegenerateSlugs(productIds, adminId, parameters)
          +bulkUpdateMetadata(productIds, metadata, adminId, merge_strategy)
          +bulkCleanup(parameters)
          +validateBulkAction(productIds, action, parameters)
          +preflightCheck(productIds, operation, parameters)
          +estimateResourceRequirements(productIds, operation, parameters)
          +checkBulkDeletionDependencies(productIds, hardDelete)
          +startBackgroundBulkJob(request)
          +getBulkJobStatus(jobId)
          +cancelBulkJob(jobId, adminId, reason)
          +listBulkJobs(limit, offset, status)
          +cleanupBulkJobs(olderThanDays)
          +getBulkStatistics(period)
          +getBulkPerformanceMetrics(limit)
          +generateBulkReport(startDate, endDate, format)
          +retryFailedBulkItems(jobId, itemIds, adminId, retryParameters)
          +getBulkErrorDetails(jobId, itemIds)
          +createRecoveryPlan(jobId)
          +executeRecoveryPlan(jobId, recoverySteps, adminId)
          +bulkClearCaches(productIds, parameters)
          +bulkWarmCaches(productIds, parameters)
          +calculateOptimalBatchSize(operation, totalItems, constraints)
          +createOptimizedBatches(productIds, operation, parameters)
          +executeWithOptimizedBatching(productIds, batchCallback, optimizationParameters)
          -processBulkPublishChunk(productIds, adminId, parameters)
          -processBulkDeleteChunk(productIds, adminId, parameters)
          -mergeResults(target, source)
          -validateBulkActionForProduct(product, action, parameters)
          -estimateBulkOperationTime(itemCount, action)
          -estimateMemoryRequirements(itemCount, action)
          -checkMemoryAvailable()
          -checkTimeAvailable()
          -checkAdminPermissions(operation)
          -estimateOperationImpact(productIds, operation, parameters)
          -generateSlug(product, strategy)
          -slugify(text)
          -mergeProductData(target, source, fieldPriority)
          -smartMergeProducts(target, source, parameters)
          -getBulkOperationRecommendation(operation)
          -convertToCsv(data)
          -convertToXml(data)
          -convertReportToFormat(data, format)
          -formatBytes(bytes)
          -convertToBytes(memoryLimit)
          -validateForPublication(productId)
          -canDeleteProduct(productId, hardDelete)
          -hasForceDeletePermission()
          +getBulkOperationStatistics()
          +resetBulkStatistics()
        }
      }
      package Cache as Services.Product.Cache {
        class "ProductCacheManager\n<b>ProductCacheManager - Unified Cache Management for Product Domain</b>" as Services_Product_Cache_ProductCacheManager {
          -cacheService : CacheService
          -cacheInvalidator : ProductCacheInvalidator
          -keyGenerator : ProductCacheKeyGenerator
          -productRepository : ProductRepositoryInterface
          -logger : LoggerInterface
          -config : array
          -statistics : array
          +__construct(cacheService, cacheInvalidator, keyGenerator, productRepository, logger, config)
          +getEntity(productId, throwIfNotFound)
          +setEntity(product, options)
          +rememberEntity(productId, callback, options)
          +getQuery(queryType, parameters)
          +setQuery(queryType, parameters, results, options)
          +rememberQuery(queryType, parameters, callback, options)
          +getAggregate(aggregateType, parameters)
          +setAggregate(aggregateType, parameters, data, options)
          +rememberAggregate(aggregateType, parameters, callback, options)
          +multiLevelGet(productId, operationType, primaryCallback, options)
          -populateCaches(productId, data, context, options)
          +getCacheStrategy(operationType, context)
          +shouldCache(operationType, context)
          +warmCache(criteria)
          +prefetch(predictions, options)
          +getCacheMetrics()
          +resetStatistics()
          -scheduleAsyncWrite(key, value, ttl, options)
          -compressResults(results)
          -generateOptimizationRecommendations(hitRates)
          -generateRecommendations(operationType, context)
          -getOperationFrequency(operationType)
          -warmCommonQueries(products)
          -warmAggregates()
          +getConfiguration()
          +updateConfiguration(config)
        }
        class "ProductCacheKeyGenerator\n<b>ProductCacheKeyGenerator - Standardized Cache Key Generation for Product Domain</b>" as Services_Product_Cache_ProductCacheKeyGenerator {
          -tenantId : string
          +setTenant(tenantId)
          +getTenant()
          +forEntity(productId)
          +forEntityWithRelations(productId, relations)
          +forEntityBySlug(slug)
          +forEntityBulk(productIds)
          +forListQuery(query, adminMode)
          +forSearch(keyword, filters, limit, offset, adminMode)
          +forCategory(categoryId, includeSubcategories, limit, offset, publishedOnly)
          +forStatus(status, limit, offset, adminMode)
          +forPopular(limit, publishedOnly, period)
          +forPublished(limit, offset, orderBy)
          +forStatistics(period, includeGraphData)
          +forDashboard(options)
          +forBusinessIntelligence(dimensions, metrics, filters)
          +forRecommendations(currentProductId, limit, criteria)
          +forHealthScore(productId)
          +forPriceUpdateMaintenance(daysThreshold, limit, publishedOnly)
          +forLinkValidationMaintenance(daysThreshold, limit, publishedOnly)
          +forServiceOperation(serviceName, operation, parameters)
          +patternForAll()
          +patternForProduct(productId)
          +patternForLists()
          +patternForSearches()
          +patternForCategories()
          +patternForStatuses()
          +patternForStatistics()
          +patternForServices()
          +patternForLevel(level)
          -buildKey(parts)
          -hashQueryParameters(parameters)
          -normalizeArray(data)
          +getTtlForKey(cacheKey, level, context)
          +parseKey(cacheKey)
          -detectLevel(cacheKey)
          +isValidKey(cacheKey)
          +withTtlHint(baseKey, ttl)
          +withoutTtlHint(keyWithHint)
          +getKeyMetrics(cacheKey)
          -estimateKeySize(cacheKey)
          -calculateCollisionRisk(cacheKey)
        }
        class "ProductCacheInvalidator\n<b>ProductCacheInvalidator - Atomic Cache Invalidation for Product Domain</b>" as Services_Product_Cache_ProductCacheInvalidator {
          -cacheService : CacheService
          -productRepository : ProductRepositoryInterface
          -logger : LoggerInterface
          -statistics : array
          +__construct(cacheService, productRepository, logger)
          +invalidateEntity(productId, options)
          +invalidateQueryCache(patterns, options)
          +invalidateAggregateCache(types)
          +invalidateByEvent(eventType, context)
          +bulkInvalidate(productIds, options)
          +invalidateAll(options)
          +getInvalidationStats()
          +resetStats()
          -invalidateRelatedQueries(productId)
          +validatePattern(pattern)
          +getCachePatterns()
          +getEventPatternMap()
        }
      }
      package Factories as Services.Product.Factories {
        class "ProductResponseFactory\n<b>ProductResponseFactory - DTO Transformation Factory for Product Domain</b>" as Services_Product_Factories_ProductResponseFactory {
          -urlGenerator : UrlGeneratorService
          -config : array
          +__construct(urlGenerator, config)
          +fromEntity(product, context)
          +fromArray(data, context)
          +toCollection(products, context)
          +fromEntityWithRelations(product, relations, context)
          +withFullDetails(product, allRelations, context)
          +createListResponse(items, metadata)
          +createPaginatedResponse(products, pagination, context)
          +createSearchResponse(products, query, filters, context)
          +createBulkActionResult(action, successCount, failedCount, skippedCount, duration, details)
          +createBatchResult(operation, results, context)
          +createErrorResponse(code, message, details, statusCode)
          +createValidationError(errors, message)
          +createNotFoundError(resource, id)
          +createUnauthorizedError(permission)
          -extractBaseData(product, adminMode)
          -addCalculatedFields(data, product, context)
          -addUrls(data, product, context)
          -filterFieldsByContext(data, adminMode)
          -processRelations(relations, context)
          -transformRelationItem(item, context)
          -formatPrice(price)
          -generateImageUrls(imagePath)
          -generateResizedImageUrl(imagePath, size)
          -generateRelationUrl(item)
          -calculateDiscountPercentage(originalPrice, salePrice)
          -addDetailFields(data, product, context)
          -addAnalyticsData(data, product, context)
          -computeProductMetrics(product, relations)
          -buildListMetadata(metadata)
          -buildPaginationLinks(pagination)
          -generateSearchSuggestions(query, results)
          -generateBatchRecommendations(operation, results)
          -validateResponseData(data)
          -formatResponseData(data, context)
          -addResponseMetadata(data, context)
          -generateKeywords(product)
          -getViewsToday(productId)
          -getViewsThisWeek(productId)
          -getConversionRate(productId)
          -getAverageTimeOnPage(productId)
          -getBounceRate(productId)
          -calculateCompletenessScore(product)
          -calculateQualityScore(product, relations)
          -calculatePerformanceScore(product)
          -getAuditTrail(productId)
          -generateRecommendations(product, relations)
          +getConfiguration()
          +updateConfiguration(config)
        }
      }
      package Validators as Services.Product.Validators {
        class "ProductBusinessValidator\n<b>ProductBusinessValidator - Complex Business Rule Validation for Product Domain</b>" as Services_Product_Validators_ProductBusinessValidator {
          -productRepository : ProductRepositoryInterface
          -categoryRepository : CategoryRepositoryInterface
          -linkRepository : LinkRepositoryInterface
          -marketplaceRepository : MarketplaceRepositoryInterface
          -orderRepository : OrderRepositoryInterface
          -auditLogRepository : AuditLogRepositoryInterface
          -logger : LoggerInterface
          -rules : array
          -statistics : array
          +__construct(productRepository, categoryRepository, linkRepository, marketplaceRepository, orderRepository, auditLogRepository, logger, rules)
          +validateCreate(data, context)
          +validateUpdate(productId, data, context)
          +validateDelete(productId, hardDelete, context)
          +validatePublish(productId, context)
          +validateStatusTransition(fromStatus, toStatus, productId, context)
          +validateArchive(productId, context)
          +validatePriceChange(oldPrice, newPrice, productId, context)
          +validateCategoryChange(oldCategoryId, newCategoryId, productId, context)
          +validateMarketplaceLinks(productId, context)
          +validateBulkOperation(productIds, operation, context)
          -validateSlugUniqueness(slug, excludeProductId, context)
          -validatePrice(price, productId, context)
          -validateCategory(categoryId, context)
          -validateDailyCreationLimit(adminId, context)
          -validateImageSource(sourceType, imageUrl, context)
          -buildValidationResult(valid, errors, warnings, ruleChecks, startTime, additionalData)
          -logValidation(operation, result, context)
          +getStatistics()
          +resetStatistics()
          +getBusinessRules()
          +updateBusinessRules(rules)
        }
      }
    }
  }
  package Repositories as Repositories {
    class "BaseRepository\n<b>Base Repository Abstract Class</b>" as Repositories_BaseRepository {
      #model : Model
      #cache : CacheInterface
      #db : ConnectionInterface
      #entityClass : class-string<TEntity>
      #tableName : string
      #cachePrefix : string
      #defaultCacheTtl : int
      #useAtomicCache : bool
      -pendingCacheInvalidations : array<string>
      +__construct(model, cache, db, entityClass, tableName)
      +findById(id)
      +findByIdOrFail(id)
      +findAll(criteria)
      +paginate(query, filters)
      +save(entity)
      +create(data)
      +update(id, data)
      +delete(id)
      +forceDelete(id)
      +restore(id)
      +bulkUpdate(ids, data)
      +bulkDelete(ids)
      +bulkRestore(ids)
      +exists(id)
      +count(criteria)
      +transaction(callback)
      +clearCache()
      +clearEntityCache(id)
      +clearCacheMatching(pattern)
      +getEntityCacheKey(id)
      +getQueryCacheKey(parameters)
      +remember(key, callback, ttl)
      +rememberForever(key, callback)
      +findByIds(ids)
      +findBy(criteria, orderBy, limit, offset)
      +findOneBy(criteria)
      +getEntityClass()
      +getTableName()
      +getCacheStats()
      +preloadCache(ids)
      +atomicCacheOperation(cacheKey, dataCallback, cacheCallback, ttl)
      #applyCriteria(builder, criteria)
      -generateCachePrefix()
      -getEntityShortName()
      -queueCacheInvalidation(cacheKeyOrPattern)
      -queueCacheOperation(operation)
      -executePendingCacheOperations()
      -clearPendingCacheOperations()
      #getModel()
      #getCache()
    }
    interface "BaseRepositoryInterface\n<b>Base Repository Interface</b>" as Repositories_BaseRepositoryInterface {
      +findById(id)
      +findByIdOrFail(id)
      +findAll(criteria)
      +paginate(query, filters)
      +save(entity)
      +create(data)
      +update(id, data)
      +delete(id)
      +forceDelete(id)
      +restore(id)
      +bulkUpdate(ids, data)
      +bulkDelete(ids)
      +bulkRestore(ids)
      +exists(id)
      +count(criteria)
      +transaction(callback)
      +clearCache()
      +clearEntityCache(id)
      +clearCacheMatching(pattern)
      +getEntityCacheKey(id)
      +getQueryCacheKey(parameters)
      +remember(key, callback, ttl)
      +rememberForever(key, callback)
      +findByIds(ids)
      +findBy(criteria, orderBy, limit, offset)
      +findOneBy(criteria)
      +getEntityClass()
      +getTableName()
      +getCacheStats()
      +preloadCache(ids)
      +atomicCacheOperation(cacheKey, dataCallback, cacheCallback, ttl)
    }
    package Interfaces as Repositories.Interfaces {
      interface "ProductRepositoryInterface\n<b>ProductRepositoryInterface - Kontrak untuk repository Product</b>" as Repositories_Interfaces_ProductRepositoryInterface {
        +findBySlug(slug, activeOnly, useCache)
        +findPublished(limit, offset, orderBy, useCache)
        +findPopular(limit, offset, publishedOnly, useCache)
        +search(keyword, filters, limit, offset, orderBy, useCache)
        +publish(productId, publishedBy)
        +verify(productId, verifiedBy)
        +archive(productId, archivedBy)
        +restore(productId, restoredBy)
        +updateStatus(productId, status, changedBy)
        +incrementViewCount(productId)
        +markPriceChecked(productId)
        +markLinksChecked(productId)
        +findNeedsPriceUpdate(daysThreshold, limit, publishedOnly)
        +findNeedsLinkValidation(daysThreshold, limit, publishedOnly)
        +countByStatus(status, includeArchived)
        +countByCategory(categoryId, publishedOnly)
        +getStatistics(period)
        +updateProduct(productId, data)
        +bulkUpdateStatus(productIds, status, changedBy)
        +bulkArchive(productIds, archivedBy)
        +findByCategory(categoryId, includeSubcategories, limit, offset, publishedOnly, useCache)
        +findByMarketplace(marketplaceId, activeLinksOnly, limit, offset, publishedOnly)
        +getRecommendations(currentProductId, limit, criteria)
      }
      interface "CategoryRepositoryInterface\n<b>Category Repository Interface</b>" as Repositories_Interfaces_CategoryRepositoryInterface {
        +findBySlug(slug)
        +findWithParent(id)
        +findRootCategories()
        +findSubCategories(parentId)
        +findCategoryTree()
        +findWithProductCounts()
        +findWithChildrenCounts()
        +findWithAllCounts(id)
        +findDescendants(categoryId)
        +findCategoryPath(categoryId)
        +isAncestorOf(ancestorId, descendantId)
        +bulkReparent(categoryIds, newParentId)
        +bulkUpdateSortOrder(sortOrders)
        +bulkSetActive(categoryIds, active)
        +slugExists(slug, excludeId)
        +isValidParent(parentId)
        +checkDeletionPreconditions(categoryId)
        +getTotalActiveCount()
        +getMaxDepth()
        +generateSlug(name, excludeId)
        +isValidSlugFormat(slug)
        +getSubtreeIds(parentId)
        +activate(id)
        +deactivate(id)
        +findActiveCategories()
        +findInactiveCategories()
        +isInUse(categoryId)
        +getStatistics()
        +createSample(overrides)
      }
      interface "LinkRepositoryInterface\n<b>Link Repository Interface</b>" as Repositories_Interfaces_LinkRepositoryInterface {
        +find(id, useCache)
        +findOrFail(id, useCache)
        +findAll(conditions, limit, offset, useCache)
        +save(entity)
        +first(conditions, useCache)
        +findActiveForProduct(productId, useCache)
        +findByProductAndMarketplace(productId, marketplaceId, useCache)
        +findNeedingPriceUpdate(marketplaceId, limit, useCache)
        +findNeedingValidation(limit, useCache)
        +findTopPerforming(limit, minRevenue, useCache)
        +findWithBadges(limit, useCache)
        +findByMarketplaceSorted(marketplaceId, orderBy, direction, useCache)
        +getStatistics(useCache)
        +getProductLinkStatistics(productId, useCache)
        +getMarketplaceLinkStatistics(marketplaceId, useCache)
        +incrementClicks(linkId)
        +updatePrice(linkId, price)
        +updateRevenueWithCommission(linkId, commissionRate)
        +bulkUpdateStatus(linkIds, active)
        +markAsValidated(linkId)
        +archive(linkId)
        +restore(linkId)
        +invalidateProductCache(productId)
        +invalidateMarketplaceCache(marketplaceId)
        +bulkCreate(linksData)
        +bulkUpdatePrices(priceMap)
        +isStoreNameUnique(storeName, productId, marketplaceId, excludeLinkId)
        +validateUrl(url)
        +getEntityType()
      }
      interface "MarketplaceRepositoryInterface" as Repositories_Interfaces_MarketplaceRepositoryInterface {
        +find(id, withTrashed)
        +findBySlug(slug, withTrashed)
        +findByName(name, withTrashed)
        +findByIdOrSlug(identifier, withTrashed)
        +findAll(filters, sortBy, sortDirection, withTrashed)
        +save(marketplace)
        +delete(id, force)
        +restore(id)
        +exists(id, withTrashed)
        +activate(marketplaceId)
        +deactivate(marketplaceId, reason)
        +archive(marketplaceId, notes)
        +isActive(marketplaceId)
        +bulkUpdateStatus(marketplaceIds, status, reason)
        +getLinks(marketplaceId, activeOnly, withTrashed, limit, offset)
        +countLinks(marketplaceId, activeOnly)
        +countActiveLinks(marketplaceId)
        +getProducts(marketplaceId, activeOnly, limit, offset)
        +countProducts(marketplaceId, activeOnly)
        +getCategories(marketplaceId, activeOnly)
        +getTopSellingProducts(marketplaceId, limit, period)
        +getLinkStatistics(marketplaceId, period)
        +search(keyword, activeOnly, withTrashed, limit, offset)
        +findByIds(marketplaceIds, activeOnly, withTrashed)
        +findWithActiveLinks(minLinks, activeOnly, limit)
        +findWithoutActiveLinks(activeOnly, limit)
        +getByPerformance(metric, period, activeOnly, limit)
        +getStatistics(marketplaceId)
        +countByStatus(withTrashed)
        +countAll(withTrashed)
        +countActive()
        +getGrowthStatistics(period)
        +getRevenueRanking(period, limit)
        +getClickRanking(period, limit)
        +getConversionRanking(period, limit)
        +getPerformanceComparison(marketplaceIds, period)
        +bulkUpdate(marketplaceIds, updateData)
        +bulkActivate(marketplaceIds, reason)
        +bulkDeactivate(marketplaceIds, reason)
        +bulkDelete(marketplaceIds, force)
        +bulkRestore(marketplaceIds)
        +canDelete(marketplaceId)
        +canDeactivate(marketplaceId)
        +isSlugUnique(slug, excludeId)
        +isNameUnique(name, excludeId)
        +validate(marketplace)
        +hasAffiliateProgram(marketplaceId)
        +supportsFeatures(marketplaceId, features)
        +clearCache(marketplaceId)
        +getCacheTtl()
        +setCacheTtl(ttl)
        +getDefaults(activeOnly)
        +createDefaultMarketplaces()
        +getSuggestions(query, activeOnly, limit)
        +getAllowedDomains(marketplaceId)
        +getConfiguration(marketplaceId)
        +updateConfiguration(marketplaceId, config)
        +getIconUrl(marketplaceId, size)
        +generateReport(marketplaceId, period, format)
        +isPopular(marketplaceId, threshold)
        +getHealthStatus(marketplaceId)
        +findSimilar(marketplaceId, limit)
        +getSummary(marketplaceId)
      }
      interface "AdminRepositoryInterface\n<b>Admin Repository Interface</b>" as Repositories_Interfaces_AdminRepositoryInterface {
        +findByUsername(username)
        +findByEmail(email)
        +findByUsernameOrEmail(identifier)
        +verifyCredentials(identifier, password)
        +findActiveById(id)
        +findSuperAdmins()
        +findRegularAdmins()
        +countSuperAdmins()
        +isLastSuperAdmin(adminId)
        +findActiveAdmins()
        +findInactiveAdmins()
        +findLockedAdmins(maxAttempts)
        +findInactiveForDays(days)
        +findAdminsNeedingPasswordRehash()
        +searchAdmins(searchTerm, limit, offset)
        +paginateWithFilters(filters, perPage, page)
        +recordSuccessfulLogin(adminId)
        +recordFailedLoginAttempt(adminId)
        +resetLoginAttempts(adminId)
        +updatePassword(adminId, newPasswordHash)
        +activateAccount(adminId)
        +deactivateAccount(adminId)
        +updateRole(adminId, newRole)
        +getStatistics()
        +getActivityTimeline(days)
        +usernameExists(username, excludeId)
        +emailExists(email, excludeId)
        +bulkArchive(ids)
        +bulkRestore(ids)
        +initializeSystemAdmin()
        +createSample(overrides)
      }
      interface "AuditLogRepositoryInterface\n<b>AuditLog Repository Interface</b>" as Repositories_Interfaces_AuditLogRepositoryInterface {
        +findByAdminId(adminId, limit, offset)
        +findByEntity(entityType, entityId, limit, offset)
        +findByActionType(actionType, limit, offset)
        +findSystemActions(limit, offset)
        +findByDateRange(startDate, endDate, limit, offset)
        +findRecent(hours, limit, offset)
        +searchBySummary(searchTerm, limit, offset)
        +findByIpAddress(ipAddress, limit, offset)
        +paginateWithFilters(filters, perPage, page)
        +findWithAdminInfo(limit, offset)
        +getEntityHistory(entityType, entityId)
        +getStatisticsByDateRange(startDate, endDate)
        +getMostActiveAdmins(limit, startDate, endDate)
        +getActivityTimeline(days)
        +hasEntityHistory(entityType, entityId)
        +getLastAdminActivity(adminId)
        +bulkInsert(auditLogs)
        +cleanOldLogs(olderThan)
        +getDatabaseSize()
        +createLogEntry(adminId, actionType, entityType, entityId, oldValues, newValues, ipAddress, userAgent)
        +getActionTypeDistribution(days)
        +getEntityTypeDistribution(days)
        +getDailyActivity(days)
        +getEntityAuditTrail(entityType, entityId, page, perPage)
        +cleanupOldLogs(daysOlderThan, archiveFirst)
      }
      interface "BadgeRepositoryInterface\n<b>Badge Repository Interface</b>" as Repositories_Interfaces_BadgeRepositoryInterface {
        +findByLabel(label)
        +findByColor(color)
        +findWithoutColor()
        +findWithColor()
        +searchByLabel(searchTerm, limit, offset)
        +findAllActive(orderDirection)
        +labelExists(label, excludeId)
        +countByColorStatus()
        +findMostUsed(limit)
        +findArchived(orderDirection)
        +getStatistics()
        +findCommonBadges()
        +initializeCommonBadges()
        +findUnassignedBadges()
        +canBeArchived(id)
        +archiveBadge(id)
        +restoreBadge(id)
        +bulkArchive(ids)
        +bulkRestore(ids)
        +findByLabels(labels)
        +findWithUsageCount(limit, offset)
        +paginateWithFilters(query, filters)
      }
      interface "ProductBadgeRepositoryInterface\n<b>ProductBadge Repository Interface</b>" as Repositories_Interfaces_ProductBadgeRepositoryInterface {
        +findByCompositeKey(productId, badgeId)
        +findByProductId(productId)
        +findByBadgeId(badgeId)
        +associate(productId, badgeId, assignedBy)
        +dissociate(productId, badgeId)
        +syncForProduct(productId, badgeIds, assignedBy)
        +syncForBadge(badgeId, productIds, assignedBy)
        +removeAllForProduct(productId)
        +removeAllForBadge(badgeId)
        +associationExists(productId, badgeId)
        +countBadgesForProduct(productId)
        +countProductsForBadge(badgeId)
        +findForMultipleProducts(productIds)
        +findForMultipleBadges(badgeIds)
        +paginateProductIdsForBadge(badgeId, query)
        +paginateBadgeIdsForProduct(productId, query)
        +getStatistics()
        +bulkCreate(associations)
        +bulkDeleteAssociations(associations)
      }
      interface "MarketplaceBadgeRepositoryInterface\n<b>MarketplaceBadge Repository Interface</b>" as Repositories_Interfaces_MarketplaceBadgeRepositoryInterface {
        +findByLabel(label)
        +findByIcon(icon)
        +findWithIcons()
        +findWithoutIcons()
        +findByColor(color)
        +searchByLabel(searchTerm, limit, offset)
        +findAllActive(orderDirection)
        +paginateActive(perPage, page)
        +findByIds(ids)
        +labelExists(label, excludeId)
        +findCommonBadges()
        +findByIconPrefix(iconPrefix)
        +findUsageStatistics(limit)
        +findUnassignedBadges()
        +findWithFontAwesomeIcons()
        +findArchived(orderDirection)
        +getStatistics()
        +bulkArchive(ids)
        +bulkRestore(ids)
        +initializeCommonBadges()
      }
    }
    package Concrete as Repositories.Concrete {
      class "ProductRepository\n<b>ProductRepository - Concrete implementation for Product repository</b>" as Repositories_Concrete_ProductRepository {
        +__construct(model, cache)
        +getEntityType()
        +findBySlug(slug, activeOnly, useCache)
        +findPublished(limit, offset, orderBy, useCache)
        +findPopular(limit, offset, publishedOnly, useCache)
        +search(keyword, filters, limit, offset, orderBy, useCache)
        +publish(productId, publishedBy)
        +verify(productId, verifiedBy)
        +archive(productId, archivedBy)
        +restore(productId, restoredBy)
        +updateStatus(productId, status, changedBy)
        +incrementViewCount(productId)
        +markPriceChecked(productId)
        +markLinksChecked(productId)
        +findNeedsPriceUpdate(daysThreshold, limit, publishedOnly)
        +findNeedsLinkValidation(daysThreshold, limit, publishedOnly)
        +countByStatus(status, includeArchived)
        +countByCategory(categoryId, publishedOnly)
        +getStatistics(period)
        +updateProduct(productId, data)
        +bulkUpdateStatus(productIds, status, changedBy)
        +bulkArchive(productIds, archivedBy)
        +findByCategory(categoryId, includeSubcategories, limit, offset, publishedOnly, useCache)
        +findByMarketplace(marketplaceId, activeLinksOnly, limit, offset, publishedOnly)
        +getRecommendations(currentProductId, limit, criteria)
        #getProductModel()
      }
      class "CategoryRepository\n<b>Category Repository Concrete Implementation</b>" as Repositories_Concrete_CategoryRepository {
        +__construct(model, cache, db)
        +findBySlug(slug)
        +findWithParent(id)
        +findRootCategories()
        +findSubCategories(parentId)
        +findCategoryTree()
        +findWithProductCounts()
        +findWithChildrenCounts()
        +findWithAllCounts(id)
        +findDescendants(categoryId)
        +findCategoryPath(categoryId)
        +isAncestorOf(ancestorId, descendantId)
        +bulkReparent(categoryIds, newParentId)
        +bulkUpdateSortOrder(sortOrders)
        +bulkSetActive(categoryIds, active)
        +slugExists(slug, excludeId)
        +isValidParent(parentId)
        +checkDeletionPreconditions(categoryId)
        +getTotalActiveCount()
        +getMaxDepth()
        +generateSlug(name, excludeId)
        +isValidSlugFormat(slug)
        +getSubtreeIds(parentId)
        +activate(id)
        +deactivate(id)
        +findActiveCategories()
        +findInactiveCategories()
        +isInUse(categoryId)
        +getStatistics()
        +createSample(overrides)
        +save(entity)
        +delete(id)
        +restore(id)
        #applyCriteria(builder, criteria)
        -getModel()
      }
      class "LinkRepository\n<b>Link Repository - Concrete Implementation</b>" as Repositories_Concrete_LinkRepository {
        #model : LinkModel
        -db : ConnectionInterface
        +__construct(model, cache, db)
        +findByProduct(productId)
        +find(id, useCache)
        +findOrFail(id, useCache)
        +findAll(conditions, limit, offset, useCache)
        +save(entity)
        +first(conditions, useCache)
        +findActiveForProduct(productId, useCache)
        +findByProductAndMarketplace(productId, marketplaceId, useCache)
        +findNeedingPriceUpdate(marketplaceId, limit, useCache)
        +findNeedingValidation(limit, useCache)
        +findTopPerforming(limit, minRevenue, useCache)
        +findWithBadges(limit, useCache)
        +findByMarketplaceSorted(marketplaceId, orderBy, direction, useCache)
        +getStatistics(useCache)
        +getProductLinkStatistics(productId, useCache)
        +getMarketplaceLinkStatistics(marketplaceId, useCache)
        +incrementClicks(linkId)
        +updatePrice(linkId, price)
        +updateRevenueWithCommission(linkId, commissionRate)
        +bulkUpdateStatus(linkIds, active)
        +markAsValidated(linkId)
        +archive(linkId)
        +restore(linkId)
        +invalidateProductCache(productId)
        +invalidateMarketplaceCache(marketplaceId)
        -invalidateLinkCache(linkId)
        +bulkCreate(linksData)
        +bulkUpdatePrices(priceMap)
        +isStoreNameUnique(storeName, productId, marketplaceId, excludeLinkId)
        +validateUrl(url)
        -validateStoreNameUniqueness(link)
        -invalidateCachesForLink(link, isNew)
        +getEntityType()
        #getCacheKey(suffix)
      }
      class "MarketplaceRepository" as Repositories_Concrete_MarketplaceRepository {
        -marketplaceModel : MarketplaceModel
        -linkModel : LinkModel
        -cacheService : CacheService
        -auditService : AuditService
        -db : ConnectionInterface
        -cacheTtl : int
        -cachePrefix : string
        +__construct(marketplaceModel, linkModel, cacheService, auditService, db)
        +find(id, withTrashed)
        +findBySlug(slug, withTrashed)
        +findByName(name, withTrashed)
        +findByIdOrSlug(identifier, withTrashed)
        +findAll(filters, sortBy, sortDirection, withTrashed)
        +save(marketplace)
        +delete(id, force)
        +restore(id)
        +exists(id, withTrashed)
        +activate(marketplaceId)
        +deactivate(marketplaceId, reason)
        +archive(marketplaceId, notes)
        +isActive(marketplaceId)
        +bulkUpdateStatus(marketplaceIds, status, reason)
        +getLinks(marketplaceId, activeOnly, withTrashed, limit, offset)
        +countLinks(marketplaceId, activeOnly)
        +countActiveLinks(marketplaceId)
        +getProducts(marketplaceId, activeOnly, limit, offset)
        +getCategories(marketplaceId, activeOnly)
        +getTopSellingProducts(marketplaceId, limit, period)
        +getLinkStatistics(marketplaceId, period)
        +search(keyword, activeOnly, withTrashed, limit, offset)
        +findByIds(marketplaceIds, activeOnly, withTrashed)
        +findWithActiveLinks(minLinks, activeOnly, limit)
        +getByPerformance(metric, period, activeOnly, limit)
        +getStatistics(marketplaceId)
        +countByStatus(withTrashed)
        +countAll(withTrashed)
        +countActive()
        +getGrowthStatistics(period)
        +bulkUpdate(marketplaceIds, updateData)
        +bulkActivate(marketplaceIds, reason)
        +bulkDeactivate(marketplaceIds, reason)
        +canDelete(marketplaceId)
        +canDeactivate(marketplaceId)
        +isSlugUnique(slug, excludeId)
        +isNameUnique(name, excludeId)
        +validate(marketplace)
        -getCacheKey(suffix)
        -applyFilters(builder, filters)
        -getRevenueForPeriod(marketplaceId, period)
        -deactivateAllLinks(marketplaceId, reason)
        -getDateCondition(period, field)
        -getPreviousPeriodCount(period)
        -getTotalRevenue(marketplaceId)
        -isDefaultMarketplace(marketplaceId)
        -getMarketplaceStatistics(marketplaceId)
        -getSystemStatistics()
        +clearCache(marketplaceId)
        {static} +create()
        +countProducts(marketplaceId, activeOnly)
        +findWithoutActiveLinks(activeOnly, limit)
        +getRevenueRanking(period, limit)
        +getClickRanking(period, limit)
        +getConversionRanking(period, limit)
        +getPerformanceComparison(marketplaceIds, period)
        +bulkDelete(marketplaceIds, force)
        +bulkRestore(marketplaceIds)
        +hasAffiliateProgram(marketplaceId)
        +supportsFeatures(marketplaceId, features)
        +getCacheTtl()
        +setCacheTtl(ttl)
        +getDefaults(activeOnly)
        +createDefaultMarketplaces()
        +getSuggestions(query, activeOnly, limit)
        +getAllowedDomains(marketplaceId)
        +getConfiguration(marketplaceId)
        +updateConfiguration(marketplaceId, config)
        +getIconUrl(marketplaceId, size)
        +generateReport(marketplaceId, period, format)
        +isPopular(marketplaceId, threshold)
        +getHealthStatus(marketplaceId)
        +findSimilar(marketplaceId, limit)
        +getSummary(marketplaceId)
      }
      class "AdminRepository\n<b>Admin Repository Concrete Implementation</b>" as Repositories_Concrete_AdminRepository {
        +__construct(model, cache, db)
        +findByUsername(username)
        +findByEmail(email)
        +findByUsernameOrEmail(identifier)
        +verifyCredentials(identifier, password)
        +findActiveById(id)
        +findSuperAdmins()
        +findRegularAdmins()
        +countSuperAdmins()
        +isLastSuperAdmin(adminId)
        +findActiveAdmins()
        +findInactiveAdmins()
        +findLockedAdmins(maxAttempts)
        +findInactiveForDays(days)
        +findAdminsNeedingPasswordRehash()
        +searchAdmins(searchTerm, limit, offset)
        +paginateWithFilters(filters, perPage, page)
        +recordSuccessfulLogin(adminId)
        +recordFailedLoginAttempt(adminId)
        +resetLoginAttempts(adminId)
        +updatePassword(adminId, newPasswordHash)
        +activateAccount(adminId)
        +deactivateAccount(adminId)
        +updateRole(adminId, newRole)
        +getStatistics()
        +getActivityTimeline(days)
        +usernameExists(username, excludeId)
        +emailExists(email, excludeId)
        +bulkArchive(ids)
        +bulkRestore(ids)
        +initializeSystemAdmin()
        +createSample(overrides)
        -getModel()
        #applyCriteria(builder, criteria)
      }
      class "AuditLogRepository\n<b>AuditLog Repository</b>" as Repositories_Concrete_AuditLogRepository {
        +__construct(model, cache, db)
        +findByAdminId(adminId, limit, offset)
        +findByEntity(entityType, entityId, limit, offset)
        +findByActionType(actionType, limit, offset)
        +findSystemActions(limit, offset)
        +findByDateRange(startDate, endDate, limit, offset)
        +findRecent(hours, limit, offset)
        +searchBySummary(searchTerm, limit, offset)
        +findByIpAddress(ipAddress, limit, offset)
        +paginateWithFilters(filters, perPage, page)
        +findWithAdminInfo(limit, offset)
        +getEntityHistory(entityType, entityId)
        +getStatisticsByDateRange(startDate, endDate)
        +getMostActiveAdmins(limit, startDate, endDate)
        +getActivityTimeline(days)
        +hasEntityHistory(entityType, entityId)
        +getLastAdminActivity(adminId)
        +bulkInsert(auditLogs)
        +cleanOldLogs(olderThan)
        +getDatabaseSize()
        +createLogEntry(adminId, actionType, entityType, entityId, oldValues, newValues, ipAddress, userAgent)
        +getActionTypeDistribution(days)
        +getEntityTypeDistribution(days)
        +getDailyActivity(days)
        +getEntityAuditTrail(entityType, entityId, page, perPage)
        +cleanupOldLogs(daysOlderThan, archiveFirst)
        +delete(id)
        +forceDelete(id)
        +restore(id)
        +bulkDelete(ids)
        +bulkRestore(ids)
        +save(entity)
        +update(id, data)
      }
      class "BadgeRepository\n<b>Badge Repository Concrete Implementation</b>" as Repositories_Concrete_BadgeRepository {
        #badgeModel : BadgeModel
        +__construct(model, cache, db)
        +findByLabel(label)
        +findByColor(color)
        +findWithoutColor()
        +findWithColor()
        +searchByLabel(searchTerm, limit, offset)
        +findAllActive(orderDirection)
        +labelExists(label, excludeId)
        +countByColorStatus()
        +findMostUsed(limit)
        +findArchived(orderDirection)
        +getStatistics()
        +findCommonBadges()
        +initializeCommonBadges()
        +findUnassignedBadges()
        +canBeArchived(id)
        +archiveBadge(id)
        +restoreBadge(id)
        +bulkArchive(ids)
        +bulkRestore(ids)
        +findByLabels(labels)
        +findWithUsageCount(limit, offset)
        +paginateWithFilters(query, filters)
        -applyAdvancedFilters(builder, filters)
        #applyCriteria(builder, criteria)
        +create(data)
        +update(id, data)
        +delete(id)
        #getModel()
      }
      class "MarketplaceBadgeRepository\n<b>MarketplaceBadge Repository</b>" as Repositories_Concrete_MarketplaceBadgeRepository {
        +__construct(model, cache, db)
        +findByLabel(label)
        +findByIcon(icon)
        +findWithIcons()
        +findWithoutIcons()
        +findByColor(color)
        +searchByLabel(searchTerm, limit, offset)
        +findAllActive(orderDirection)
        +paginateActive(perPage, page)
        +labelExists(label, excludeId)
        +findCommonBadges()
        +findByIconPrefix(iconPrefix)
        +findUsageStatistics(limit)
        +findUnassignedBadges()
        +findWithFontAwesomeIcons()
        +findArchived(orderDirection)
        +getStatistics()
        +bulkArchive(ids)
        +bulkRestore(ids)
        +initializeCommonBadges()
      }
      class "ProductBadgeRepository\n<b>ProductBadge Repository</b>" as Repositories_Concrete_ProductBadgeRepository {
        #productBadgeModel : ProductBadgeModel
        +__construct(model, cache, db)
        +findByCompositeKey(productId, badgeId)
        +findByProductId(productId)
        +findByBadgeId(badgeId)
        +associate(productId, badgeId, assignedBy)
        +dissociate(productId, badgeId)
        +syncForProduct(productId, badgeIds, assignedBy)
        +syncForBadge(badgeId, productIds, assignedBy)
        +removeAllForProduct(productId)
        +removeAllForBadge(badgeId)
        +associationExists(productId, badgeId)
        +countBadgesForProduct(productId)
        +countProductsForBadge(badgeId)
        +findForMultipleProducts(productIds)
        +findForMultipleBadges(badgeIds)
        +paginateProductIdsForBadge(badgeId, query)
        +paginateBadgeIdsForProduct(productId, query)
        +getStatistics()
        +bulkCreate(associations)
        +bulkDeleteAssociations(associations)
        +findById(id)
        +findByIdOrFail(id)
        +delete(id)
        +forceDelete(id)
        +restore(id)
        +exists(id)
        -getCompositeCacheKey(productId, badgeId)
        -parseCompositeId(id)
        +save(entity)
        +create(data)
        +update(id, data)
      }
    }
  }
  package Enums as Enums {
    enum "ProductStatus\n<b>Product Status Enumeration</b>" as Enums_ProductStatus {
      {static} +all()
      {static} +valuesAsString()
      {static} +activeStatuses()
      {static} +pendingActionStatuses()
      {static} +editableStatuses()
      +canBePublished()
      +isLive()
      +nextStatus()
      +previousStatus()
      +label()
      +colorClass()
      +icon()
      +canTransitionTo(targetStatus)
      +allowedTransitions()
    }
    enum "ImageSourceType\n<b>Image Source Type Enumeration</b>" as Enums_ImageSourceType {
      {static} +all()
      {static} +valuesAsString()
      +requiresLocalStorage()
      +requiresUrlValidation()
      +getStoragePath()
      +getMaxFileSize()
      +getAllowedExtensions()
      +getValidationRules()
      +label()
      +description()
      +icon()
      +colorClass()
      +isRecommendedForVerification()
      +generateFilename(productSlug, extension)
      +getDisplaySource(identifier)
      +validateSource(source)
      +getRecommendedDimensions()
      +shouldResize()
    }
    enum "ProductBulkActionType\n<b>Product Bulk Action Type Enum</b>" as Enums_ProductBulkActionType {
      +displayName()
      +description()
      +requiresConfirmation()
      +isDestructive()
      +requiresBackgroundProcessing()
      +requiresParameters()
      +availableParameters()
      +icon()
      +cssClass()
      {static} +mvpActions()
      {static} +adminOnlyActions()
      +isMvpAction()
      +isAdminOnly()
      +confirmationMessage(count)
      +successMessage(count)
    }
    enum "BulkActionStatusType\n<b>Bulk Action Status Type Enum</b>" as Enums_BulkActionStatusType {
      +displayName()
      +description()
      +isFinal()
      +isActive()
      +isProcessing()
      +isSuccess()
      +isFailure()
      +cssClass()
      +icon()
      +nextPossibleStatuses()
      +canTransitionTo(targetStatus)
      {static} +inProgressStatuses()
      {static} +completionStatuses()
      {static} +mvpStatuses()
      +priority()
      {static} +fromString(status)
      {static} +tryFromString(status)
      {static} +values()
      {static} +allWithDisplayNames()
    }
  }
  package Exceptions as Exceptions {
    class "ProductNotFoundException\n<b>Product Not Found Exception</b>" as Exceptions_ProductNotFoundException {
      +__construct(message, details, code, previous)
      {static} +forId(productId)
      {static} +forSlug(slug)
      {static} +forStatus(productId, status)
      +hasProductId()
      +getProductId()
      +getSearchMethod()
      +getSuggestions()
      +toLogContext()
      +toArray()
    }
    class "DomainException\n<b>Domain Exception Base Class</b>" as Exceptions_DomainException {
      #errorCode : string
      #details : array
      #httpStatusCode : int
      +__construct(message, errorCode, details, httpStatusCode, previous)
      +getErrorCode()
      +getDetails()
      +getHttpStatusCode()
      +withDetails(details)
      +toArray()
      +toJson()
      +toLogContext()
      #generateTraceId()
      +hasDetail(key)
      +getDetail(key, default)
      +toString()
      +isClientError()
      +isServerError()
    }
    class "ValidationException\n<b>Validation Exception</b>" as Exceptions_ValidationException {
      #errors : array
      +__construct(message, errors, details, code, previous)
      {static} +fromCodeIgniterValidation(validationErrors, entityName)
      {static} +fromEntityValidation(entity, validationResult)
      {static} +forField(field, message, additionalErrors)
      {static} +forBusinessRule(businessRule, message, context)
      +getErrors()
      +getFieldErrors(field)
      +hasFieldErrors(field)
      +countErrors()
      +getErrorFields()
      +merge(other)
      +toLogContext()
      +toArray()
      +isSimpleValidation()
      +getFirstError()
      +getFirstErrorField()
    }
    class "CategoryNotFoundException" as Exceptions_CategoryNotFoundException {
      {static} +forId(id)
    }
    class "LinkNotFoundException" as Exceptions_LinkNotFoundException {
      {static} +forId(id)
    }
    class "InvalidArgumentException\n<b>Custom InvalidArgumentException dengan fitur tambahan</b>" as Exceptions_InvalidArgumentException {
      #errorCode : string
      #context : array
      #httpStatusCode : int
      +__construct(message, errorCode, context, code, previous)
      +getErrorCode()
      +getContext()
      +getHttpStatusCode()
      +setHttpStatusCode(httpStatusCode)
      {static} +forInvalidValue(argumentName, actualValue, expectedType)
      {static} +forMissingArgument(argumentName)
      {static} +forOutOfRange(argumentName, value, min, max)
      {static} +forInvalidOption(argumentName, value, allowedValues)
      +toArray()
      +toJson()
      +toLogContext()
      +isClientError()
      +isServerError()
    }
    class "AdminNotFoundException" as Exceptions_AdminNotFoundException {
      #httpStatusCode : int
      -adminId : ?int
      -identifier : ?string
      -searchMethod : ?string
      +__construct(message, details, previous)
      {static} +forId(adminId, withTrashed)
      {static} +forUsername(username, withTrashed)
      {static} +forEmail(email, withTrashed)
      {static} +forIdentifier(identifier, withTrashed)
      +getAdminId()
      +getIdentifier()
      +getSearchMethod()
      +isIdSearch()
      +isUsernameSearch()
      +isEmailSearch()
      +getSuggestions()
      +toArray()
      +toLogContext()
    }
    class "MarketplaceNotFoundException" as Exceptions_MarketplaceNotFoundException {
      #httpStatusCode : int
      -marketplaceId : ?int
      -identifier : ?string
      -searchMethod : ?string
      -marketplaceType : ?string
      +__construct(message, details, previous)
      {static} +forId(marketplaceId, withTrashed)
      {static} +forSlug(slug, withTrashed)
      {static} +forName(name, withTrashed)
      {static} +forIdentifier(identifier, withTrashed)
      {static} +forType(type, activeOnly)
      +getMarketplaceId()
      +getIdentifier()
      +getSearchMethod()
      +getMarketplaceType()
      +isIdSearch()
      +isSlugSearch()
      +isNameSearch()
      +isTypeSearch()
      +getSuggestions()
      +getAlternatives()
      +toArray()
      +toLogContext()
    }
    class "AuthorizationException" as Exceptions_AuthorizationException {
      #httpStatusCode : int
      -permission : ?string
      -userId : ?int
      -resourceType : ?string
      -resourceId : ?int
      -requiredRole : ?string
      +__construct(message, permission, userId, resourceType, resourceId, requiredRole, details, previous)
      {static} +forPermission(permission, userId, resourceType, resourceId, additionalDetails)
      {static} +forRole(requiredRole, currentRole, userId, additionalDetails)
      {static} +forOwnership(resourceType, resourceId, userId, additionalDetails)
      {static} +forAdminAccess(userId)
      {static} +forSuperAdminAccess(userId)
      +getPermission()
      +getUserId()
      +getResourceType()
      +getResourceId()
      +getRequiredRole()
      +isPermissionDenied()
      +isRoleDenied()
      +isOwnershipDenied()
      +toArray()
      +toLogContext()
      -getFailureType()
      +getUserMessage()
    }
  }
  package Contracts as Contracts {
    interface "CacheInterface\n<b>Cache Interface</b>" as Contracts_CacheInterface {
      +get(key)
      +set(key, value, ttl)
      +delete(key)
      +clear()
      +has(key)
      +remember(key, callback, ttl)
      +increment(key, value)
      +decrement(key, value)
      +getMultiple(keys)
      +setMultiple(items, ttl)
      +deleteMultiple(keys)
      +getStats()
      +getKey(key)
      +setDefaultTtl(ttl)
      +getDefaultTtl()
      +isAvailable()
      +forever(key, value)
      +getWithTtl(key)
      +tag(tag)
      +flushTag(tags)
      +cacheWithContext(prefix, context, callback, ttl)
      +getHitStats()
      +resetStats()
    }
    interface "BaseInterface\n<b>Base Interface</b>" as Contracts_BaseInterface {
      +transaction(operation, transactionName)
      +transactionWithRetry(operation, maxRetries, retryDelayMs)
      +authorize(permission, resource)
      +validateDTO(dto, context)
      +validateDTOOrFail(dto, context)
      +validateBusinessRules(dto, context)
      +coordinateRepositories(repositories, operation)
      +getEntity(repository, id, throwIfNotFound)
      +audit(actionType, entityType, entityId, oldValues, newValues, additionalContext)
      +clearCacheForEntity(repository, entityId, pattern)
      +clearServiceCache()
      +withCaching(cacheKey, callback, ttl)
      +batchOperation(items, itemOperation, batchSize, progressCallback)
      +setAdminContext(adminId)
      +getCurrentAdminId()
      +getServiceName()
      +getServiceCacheKey(operation, parameters)
      +getInitializedAt()
      +isReady()
      +getHealthStatus()
      +getPerformanceMetrics()
      +resetMetrics()
      +validateConfiguration()
    }
    interface "ProductCRUDInterface\n<b>ProductCRUDInterface - Contract for basic CRUD operations on Product</b>" as Contracts_ProductCRUDInterface {
      +createProduct(request)
      +getProduct(productId, includeRelations, adminMode)
      +getProductBySlug(slug, incrementViewCount)
      +updateProduct(request)
      +deleteProduct(request)
      +restoreProduct(productId, adminId)
      +quickEditProduct(request)
      +canDeleteProduct(productId, hardDelete)
      +productToResponse(product, adminMode, relations)
      +productsToResponses(products, adminMode, relations)
    }
    interface "ProductInterface\n<b>ProductServiceInterface - Master Interface for Product Domain</b>" as Contracts_ProductInterface {
    }
    interface "ProductWorkflowInterface\n<b>ProductWorkflowInterface - Contract for Product Status & Workflow Operations</b>" as Contracts_ProductWorkflowInterface {
      +publishProduct(request)
      +verifyProduct(productId, adminId, notes)
      +requestVerification(productId, adminId)
      +archiveProduct(productId, adminId, reason)
      +unarchiveProduct(productId, adminId)
      +toggleProductStatus(request)
      +updateProductStatus(productId, status, adminId, notes, force)
      +revertToDraft(productId, adminId, reason)
      +canTransitionTo(productId, targetStatus, includeBusinessRules)
      +validateForPublication(productId)
      +validateForVerification(productId)
      +canPublishProduct(productId)
      +canArchiveProduct(productId)
      +getAllowedTransitions(productId)
      +sendForReview(productId, adminId, notes)
      +rejectProduct(productId, adminId, reason)
      +schedulePublication(productId, publishAt, adminId, notes)
      +cancelScheduledPublication(productId, adminId, reason)
      +getScheduledPublications(limit, offset)
      +processScheduledPublications(batchSize)
      +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
      +countProductsByStatus(status, includeArchived)
      +getProductsNeedingVerification(limit, offset, includeRelations)
      +getProductsPendingPublication(limit, offset, includeRelations)
      +getWorkflowStatistics(period)
      +getStatusHistory(productId, limit, offset)
      +getAverageStatusTimes(period)
      +getWorkflowBottlenecks(thresholdHours, limit)
      +bulkPublish(productIds, adminId, parameters)
      +bulkVerify(productIds, adminId, parameters)
      +bulkArchive(productIds, adminId, reason)
      +bulkRequestVerification(productIds, adminId)
      +getStateMachineConfig()
      +validateTransition(from, to, context)
      +addTransitionGuard(transitionName, guardCallback)
      +overrideTransition(productId, from, to, adminId, reason)
    }
    interface "ProductQueryInterface\n<b>ProductQueryInterface - Contract for Product Search, Filtering & Listing Operations</b>" as Contracts_ProductQueryInterface {
      +listProducts(query, adminMode)
      +searchProducts(keyword, filters, limit, offset, adminMode)
      +advancedSearch(criteria, orderBy, limit, offset, adminMode)
      +fullTextSearch(searchTerm, fields, limit, offset, useWildcards)
      +getProductsByCategory(categoryId, includeSubcategories, limit, offset, publishedOnly)
      +getProductsByCategories(categoryIds, operator, limit, offset, publishedOnly)
      +getUncategorizedProducts(limit, offset, publishedOnly)
      +getProductsByMarketplace(marketplaceId, activeLinksOnly, limit, offset, publishedOnly)
      +getProductsByMarketplaces(marketplaceIds, operator, activeLinksOnly, limit, offset, publishedOnly)
      +getProductsWithoutLinks(limit, offset, publishedOnly)
      +getPublishedProducts(limit, offset, orderBy)
      +getProductsByStatus(status, limit, offset, includeRelations, adminMode)
      +getProductsByStatuses(statuses, operator, limit, offset, includeRelations)
      +getDraftProducts(limit, offset, includeRelations)
      +getPendingVerificationProducts(limit, offset, includeRelations)
      +getVerifiedProducts(limit, offset, includeRelations)
      +getArchivedProducts(limit, offset, includeRelations)
      +getPopularProducts(limit, publishedOnly)
      +getTrendingProducts(limit, period)
      +getRecentlyAddedProducts(limit, publishedOnly)
      +getRecentlyUpdatedProducts(limit, publishedOnly)
      +getFeaturedProducts(limit)
      +getProductsByPriceRange(minPrice, maxPrice, limit, offset, publishedOnly)
      +getProductsBelowPrice(price, limit, offset, publishedOnly)
      +getProductsAbovePrice(price, limit, offset, publishedOnly)
      +getCheapestProducts(limit, publishedOnly)
      +getMostExpensiveProducts(limit, publishedOnly)
      +getProductsNeedingPriceUpdate(daysThreshold, limit, publishedOnly)
      +getProductsNeedingLinkValidation(daysThreshold, limit, publishedOnly)
      +getProductsWithMissingImages(limit, offset, publishedOnly)
      +getProductsWithMissingDescriptions(limit, offset, publishedOnly)
      +getProductsWithOutdatedInfo(daysThreshold, limit, publishedOnly)
      +getProductsWithBadges(badgeIds, operator, limit, offset, publishedOnly)
      +getProductsWithMarketplaceBadges(marketplaceBadgeIds, operator, limit, offset, publishedOnly)
      +getProductsVerifiedBy(adminId, limit, offset, publishedOnly)
      +getProductRecommendations(currentProductId, limit, criteria)
      +getSimilarProducts(productId, limit, similarityFactors)
      +getFrequentlyBoughtTogether(productId, limit)
      +getCrossSellProducts(productId, limit)
      +getUpsellProducts(productId, limit)
      +countProducts(criteria, includeArchived)
      +countProductsByStatus(status, includeArchived)
      +countProductsByCategory(categoryId, publishedOnly)
      +getPriceStatistics(criteria)
      +getViewStatistics(criteria)
      +clearQueryCaches(patterns)
      +warmQueryCaches(queryConfigs)
      +getQueryCacheStatistics()
      +generateQueryCacheKey(operation, parameters)
      +validateQueryParameters(parameters, context)
      +buildFilterSummary(query)
      +getQueryExecutionPlan(query, explain)
      +batchQuery(queries, parallel)
      +streamQueryResults(query, callback, batchSize)
      +getQueryPerformanceMetrics(query)
    }
    interface "ProductBulkInterface\n<b>ProductBulkInterface - Contract for Bulk Product Operations</b>" as Contracts_ProductBulkInterface {
      +bulkAction(request)
      +executeBulkWithCallback(productIds, itemCallback, context, useTransaction, batchSize)
      +bulkUpdateStatus(productIds, status, adminId, parameters)
      +bulkPublish(productIds, adminId, parameters)
      +bulkVerify(productIds, adminId, parameters)
      +bulkArchive(productIds, adminId, reason, parameters)
      +bulkRestore(productIds, adminId, parameters)
      +bulkDelete(productIds, adminId, parameters)
      +bulkRequestVerification(productIds, adminId, parameters)
      +bulkRevertToDraft(productIds, adminId, reason)
      +bulkUpdateData(productIds, data, adminId, parameters)
      +bulkUpdatePrices(priceUpdates, adminId, parameters)
      +bulkUpdateCategories(productIds, categoryId, adminId, parameters)
      +bulkAssignBadges(productIds, badgeIds, adminId, parameters)
      +bulkRemoveBadges(productIds, badgeIds, adminId)
      +bulkUpdateImages(productIds, imageUrl, sourceType, adminId)
      +bulkImport(productsData, adminId, parameters)
      +bulkExport(productIds, parameters)
      +bulkClone(productIds, adminId, parameters)
      +bulkMerge(productIds, adminId, parameters)
      +bulkMarkPricesChecked(productIds, adminId)
      +bulkMarkLinksChecked(productIds, adminId)
      +bulkRegenerateSlugs(productIds, adminId, parameters)
      +bulkUpdateMetadata(productIds, metadata, adminId, merge_strategy)
      +bulkCleanup(parameters)
      +validateBulkAction(productIds, action, parameters)
      +preflightCheck(productIds, operation, parameters)
      +estimateResourceRequirements(productIds, operation, parameters)
      +checkBulkDeletionDependencies(productIds, hardDelete)
      +startBackgroundBulkJob(request)
      +getBulkJobStatus(jobId)
      +cancelBulkJob(jobId, adminId, reason)
      +listBulkJobs(limit, offset, status)
      +cleanupBulkJobs(olderThanDays)
      +getBulkStatistics(period)
      +getBulkPerformanceMetrics(limit)
      +generateBulkReport(startDate, endDate, format)
      +retryFailedBulkItems(jobId, itemIds, adminId, retryParameters)
      +getBulkErrorDetails(jobId, itemIds)
      +createRecoveryPlan(jobId)
      +executeRecoveryPlan(jobId, recoverySteps, adminId)
      +bulkClearCaches(productIds, parameters)
      +bulkWarmCaches(productIds, parameters)
      +calculateOptimalBatchSize(operation, totalItems, constraints)
      +createOptimizedBatches(productIds, operation, parameters)
      +executeWithOptimizedBatching(productIds, batchCallback, optimizationParameters)
    }
    interface "ProductMaintenanceInterface\n<b>ProductMaintenanceInterface - Contract for Product Maintenance, Cache, Statistics & Utility Operations</b>" as Contracts_ProductMaintenanceInterface {
      +clearAllProductCaches()
      +clearProductCache(productId, options)
      +clearCacheMatching(pattern, options)
      +warmProductCaches(productIds, options)
      +getCacheStatistics()
      +optimizeCacheConfiguration(constraints)
      +preloadFrequentProductCache(criteria)
      +getProductStatistics(period, options)
      +getDashboardStatistics(options)
      +getPerformanceMetrics(period)
      +getBusinessIntelligenceData(dimensions, metrics, filters)
      +calculateProductHealthScore(productId)
      +getSystemHealthStatus()
      +runDatabaseMaintenance(tasks)
      +validateDataIntegrity(options)
      +rebuildProductData(options)
      +archiveOldProducts(criteria)
      +cleanupProductData(options)
      +importProducts(source, options)
      +exportProducts(criteria, options)
      +generateImportTemplate(format, options)
      +validateImportData(data, format, options)
      +scheduleImportExportJob(config, options)
      +createBackup(options)
      +restoreBackup(backup, options)
      +listBackups(options)
      +verifyBackup(backup)
      +createDisasterRecoveryPlan()
      +reindexProductSearch(options)
      +recalculateAggregates(options)
      +synchronizeWithExternalSystems(systems, options)
      +generateReport(report_type, parameters, options)
      +migrateProductData(migration_config, options)
      +setupMonitoring(monitors, options)
      +getSystemAlerts(options)
      +acknowledgeAlert(alert_id, options)
      +getMonitoringDashboard()
      +runDiagnostics(tests, options)
      +debugProduct(productId, options)
      +getProductLogs(filters, options)
      +generateHealthReport(options)
      +updateSystemConfiguration(config, options)
      +getSystemConfiguration(options)
      +resetConfiguration(options)
    }
    interface "BadgeInterface\n<b>Badge Interface</b>" as Contracts_BadgeInterface {
      +createBadge(requestDTO)
      +updateBadge(badgeId, requestDTO)
      +getBadge(badgeId, withArchived)
      +getBadgeByLabel(label, withArchived)
      +deleteBadge(badgeId, force)
      +archiveBadge(badgeId)
      +restoreBadge(badgeId)
      +bulkArchiveBadges(badgeIds)
      +bulkRestoreBadges(badgeIds)
      +bulkUpdateStatus(badgeIds, status, context)
      +getAllBadges(filters, perPage, page)
      +getActiveBadges(orderDirection)
      +getArchivedBadges(orderDirection)
      +searchBadges(searchTerm, limit, offset)
      +getBadgesByColor(color)
      +getBadgesWithoutColor()
      +getBadgesWithColor()
      +getCommonBadges()
      +getUnassignedBadges()
      +canArchiveBadge(badgeId)
      +canDeleteBadge(badgeId)
      +isLabelUnique(label, excludeId)
      +validateBadgeColor(color)
      +getBadgeStatistics()
      +getBadgeUsageCounts(limit, offset)
      +getColorDistribution()
      +initializeCommonBadges()
      +createSampleBadge(overrides)
      +cleanupUnusedBadges(daysUnused, archiveFirst)
      +clearBadgeCache()
      +preloadBadgeCache(badgeIds)
      +getBadgeCacheStats()
      +processBatchBadgeUpdates(badgeIds, updateOperation, batchSize, progressCallback)
      +importBadges(importData, options)
      +exportBadges(badgeIds, options)
    }
    interface "MarketplaceBadgeInterface\n<b>Marketplace Badge Interface</b>" as Contracts_MarketplaceBadgeInterface {
      +createMarketplaceBadge(requestDTO)
      +updateMarketplaceBadge(badgeId, requestDTO)
      +getMarketplaceBadge(badgeId, withArchived)
      +getMarketplaceBadgeByLabel(label, withArchived)
      +getMarketplaceBadgesByIcon(icon)
      +deleteMarketplaceBadge(badgeId, force)
      +archiveMarketplaceBadge(badgeId)
      +restoreMarketplaceBadge(badgeId)
      +bulkArchiveMarketplaceBadges(badgeIds)
      +bulkRestoreMarketplaceBadges(badgeIds)
      +bulkUpdateStatus(badgeIds, status, context)
      +getAllMarketplaceBadges(filters, perPage, page)
      +getActiveMarketplaceBadges(orderDirection)
      +getArchivedMarketplaceBadges(orderDirection)
      +searchMarketplaceBadges(searchTerm, limit, offset)
      +getMarketplaceBadgesByIconPrefix(iconPrefix)
      +getMarketplaceBadgesWithIcons()
      +getMarketplaceBadgesWithoutIcons()
      +getMarketplaceBadgesByColor(color)
      +getCommonMarketplaceBadges()
      +getUnassignedMarketplaceBadges()
      +getMarketplaceBadgesWithFontAwesomeIcons()
      +canArchiveMarketplaceBadge(badgeId)
      +canDeleteMarketplaceBadge(badgeId)
      +isMarketplaceBadgeLabelUnique(label, excludeId)
      +validateMarketplaceBadgeIcon(icon)
      +validateMarketplaceBadgeColor(color)
      +getMarketplaceBadgeUsageStatistics(limit)
      +getMarketplaceBadgeStatistics()
      +getMarketplaceBadgeIconDistribution()
      +getMarketplaceBadgeColorDistribution()
      +initializeCommonMarketplaceBadges()
      +createSampleMarketplaceBadge(overrides)
      +cleanupUnusedMarketplaceBadges(daysUnused, archiveFirst)
      +assignBadgeToLink(badgeId, linkId)
      +removeBadgeFromLink(badgeId, linkId)
      +getLinksForMarketplaceBadge(badgeId, limit, offset)
      +getMarketplaceBadgesForLink(linkId)
      +clearMarketplaceBadgeCache()
      +preloadMarketplaceBadgeCache(badgeIds)
      +getMarketplaceBadgeCacheStats()
      +processBatchMarketplaceBadgeUpdates(badgeIds, updateOperation, batchSize, progressCallback)
      +importMarketplaceBadges(importData, options)
      +exportMarketplaceBadges(badgeIds, options)
    }
  }
  package DTOs as DTOs {
    class "BaseDTO\n<b>Base Data Transfer Object (DTO)</b>" as DTOs_BaseDTO {
      -validationErrors : array<string, string[]>
      -isValidated : bool
      -originalData : array<string, mixed>
      #__construct(data)
      {static} +fromArray(data)
      +toArray()
      -convertArray(array)
      -hydrate(data)
      -castToType(value, property)
      -castToSingleType(value, typeName, property)
      -validateTypes()
      -validateProperty(property, value)
      {abstract} +validate()
      +getValidationErrors()
      +isValid()
      +getFirstError()
      #addValidationError(property, message)
      +getOriginalData()
      -snakeToCamel(input)
      -camelToSnake(input)
      +jsonSerialize()
      +toJson()
      +__toString()
      +getDtoName()
      +get(name)
      +has(name)
      +getPropertyNames()
      {static} +getSchema()
      +with(changes)
      #validateRequiredFields(data, requiredFields)
    }
    package Requests as DTOs.Requests {
      package Product as DTOs.Requests.Product {
        class "CreateProductRequest\n<b>DTO for creating a new product</b>" as DTOs_Requests_Product_CreateProductRequest {
          -name : string
          -slug : string
          -description : ?string
          -categoryId : ?int
          -marketPrice : string
          -image : ?string
          -imageSourceType : ImageSourceType
          -status : ProductStatus
          -imagePath : ?string
          -createdBy : ?int
          -__construct()
          {static} +fromRequest(requestData, createdBy)
          -validateAndHydrate(data)
          -generateSlug(data)
          -validateAndFormatPrice(price, errors)
          -parseImageSourceType(type, errors)
          -parseProductStatus(status, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getName()
          +getSlug()
          +getDescription()
          +getCategoryId()
          +getMarketPrice()
          +getImage()
          +getImageSourceType()
          +getStatus()
          +getImagePath()
          +getCreatedBy()
          +toDatabaseArray()
          +toArray()
        }
        class "UpdateProductRequest\n<b>DTO for updating an existing product</b>" as DTOs_Requests_Product_UpdateProductRequest {
          -productId : int
          -name : ?string
          -slug : ?string
          -description : ?string
          -categoryId : ?int
          -marketPrice : ?string
          -image : ?string
          -imageSourceType : ?ImageSourceType
          -status : ?ProductStatus
          -imagePath : ?string
          -regenerateSlug : bool
          -updatedBy : ?int
          -changedFields : array<string, mixed>
          -__construct(productId)
          {static} +fromRequest(productId, requestData, updatedBy)
          -validateAndHydrate(data)
          -getOriginalDataSnapshot()
          -identifyChangedFields(originalData)
          -validateAndFormatPrice(price, errors)
          -parseImageSourceType(type, errors)
          -parseProductStatus(status, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getProductId()
          +getName()
          +getSlug()
          +getDescription()
          +getCategoryId()
          +getMarketPrice()
          +getImage()
          +getImageSourceType()
          +getStatus()
          +getImagePath()
          +shouldRegenerateSlug()
          +getUpdatedBy()
          +getChangedFields()
          +hasChanges()
          +isFieldChanged(field)
          +getChangeSummary()
          -formatChangeValue(value)
          +toDatabaseArray()
          +toArray()
        }
        class "PublishProductRequest\n<b>DTO for publishing a product (immediate, scheduled, or force publish)</b>" as DTOs_Requests_Product_PublishProductRequest {
          -productId : int
          -adminId : int
          -scheduledAt : ?DateTimeImmutable
          -notes : ?string
          -forcePublish : bool
          -requestedAt : DateTimeImmutable
          -publishType : string
          -__construct(productId, adminId)
          {static} +fromRequest(productId, adminId, requestData)
          {static} +forImmediatePublish(productId, adminId, notes)
          {static} +forScheduledPublish(productId, adminId, scheduledAt, notes)
          {static} +forForcePublish(productId, adminId, notes)
          -validateAndHydrate(data)
          -parseScheduledAt(dateString, errors)
          -validatePublishData()
          {static} +rules()
          {static} +messages()
          +validatePrerequisites(productData, linksData)
          +getProductId()
          +getAdminId()
          +getScheduledAt()
          +getNotes()
          +isForcePublish()
          +getRequestedAt()
          +getPublishType()
          +isScheduled()
          +isImmediate()
          +getPublishTimestamp()
          +toDatabaseArray()
          +toAdminActionLog(oldProductData)
          -generateChangeSummary(oldProductData)
          +withScheduledAt(newScheduledAt)
          +withNotes(notes)
          +toArray()
        }
        class "ProductQuickEditRequest\n<b>Data Transfer Object for Product Quick Edit Request</b>" as DTOs_Requests_Product_ProductQuickEditRequest {
          -productId : int
          -userId : int
          -name : string|null
          -slug : string|null
          -description : string|null
          -price : float|null
          -status : ProductStatus|null
          -categoryId : int|null
          -requestedAt : DateTimeImmutable
          -ipAddress : string
          -regenerateSlug : bool
          -__construct()
          {static} +fromArray(data)
          -validateAndHydrate(data)
          +getProductId()
          +getUserId()
          +getName()
          +getSlug()
          +getDescription()
          +getPrice()
          +getStatus()
          +getCategoryId()
          +getRequestedAt()
          +getIpAddress()
          +shouldRegenerateSlug()
          +getChangedFields()
          +hasField(fieldName)
          +toArray()
          +toJson()
        }
        class "ProductDeleteRequest\n<b>Data Transfer Object for Product Delete Request</b>" as DTOs_Requests_Product_ProductDeleteRequest {
          -productId : int
          -userId : int
          -reason : string
          -hardDelete : bool
          -cascade : bool
          -requestedAt : DateTimeImmutable
          -ipAddress : string
          -userAgent : string
          -__construct()
          {static} +fromArray(data)
          -validateAndHydrate(data)
          +getProductId()
          +getUserId()
          +getReason()
          +isHardDelete()
          +isCascade()
          +getRequestedAt()
          +getIpAddress()
          +getUserAgent()
          +toArray()
          +toJson()
          +toAuditMessage()
        }
        class "ProductBulkActionRequest\n<b>Data Transfer Object for Product Bulk Action Request</b>" as DTOs_Requests_Product_ProductBulkActionRequest {
          -action : ProductBulkActionType
          -productIds : array<int>
          -userId : int
          -parameters : array
          -processInBackground : bool
          -jobId : int|null
          -requestedAt : DateTimeImmutable
          -ipAddress : string
          -userAgent : string
          -__construct()
          {static} +fromArray(data)
          -validateAndHydrate(data)
          -validateParameters(parameters, errors)
          +getAction()
          +getProductIds()
          +getUserId()
          +getParameters()
          +getParameter(key, default)
          +shouldProcessInBackground()
          +getJobId()
          +setJobId(jobId)
          +getRequestedAt()
          +getIpAddress()
          +getUserAgent()
          +getBatchSize()
          +isLargeBatch()
          +getActionDescription()
          +toArray()
          +toAuditMessage()
        }
        class "ProductToggleStatusRequest" as DTOs_Requests_Product_ProductToggleStatusRequest {
          -productId : int
          -adminId : int
          -targetStatus : ProductStatus
          -notes : ?string
          -forceStatusChange : bool
          -requestedAt : DateTimeImmutable
          -ipAddress : string
          -userAgent : string
          -__construct()
          {static} +fromRequest(requestData, adminId, ipAddress, userAgent)
          {static} +create(productId, adminId, targetStatus, notes, forceStatusChange)
          -validateAndHydrate(data, adminId, ipAddress, userAgent)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getProductId()
          +getAdminId()
          +getTargetStatus()
          +getNotes()
          +isForceStatusChange()
          +getRequestedAt()
          +getIpAddress()
          +getUserAgent()
          +toArray()
          +toDatabaseArray()
          +getAuditMessage()
          +validate()
        }
      }
      package Link as DTOs.Requests.Link {
        class "CreateLinkRequest\n<b>DTO for creating a new affiliate link</b>" as DTOs_Requests_Link_CreateLinkRequest {
          -productId : int
          -marketplaceId : int
          -storeName : string
          -price : string
          -url : string
          -rating : ?string
          -active : bool
          -marketplaceBadgeId : ?int
          -commissionRate : ?float
          -createdBy : ?int
          -__construct()
          {static} +fromRequest(requestData, createdBy)
          -validateAndHydrate(data)
          -validateAndFormatPrice(price, errors)
          -validateAndFormatUrl(url, errors)
          -validateRating(rating, errors)
          -validateCommissionRate(rate, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getProductId()
          +getMarketplaceId()
          +getStoreName()
          +getPrice()
          +getUrl()
          +getRating()
          +isActive()
          +getMarketplaceBadgeId()
          +getCommissionRate()
          +getCreatedBy()
          +hasRating()
          +hasMarketplaceBadge()
          +hasCommissionRate()
          +getCommissionRateDisplay()
          +getCommissionRateDecimal()
          +toDatabaseArray()
          +toArray()
          +validate()
        }
        class "UpdateLinkRequest\n<b>DTO for updating an existing affiliate link</b>" as DTOs_Requests_Link_UpdateLinkRequest {
          -linkId : int
          -storeName : ?string
          -price : ?string
          -url : ?string
          -rating : ?string
          -active : ?bool
          -marketplaceBadgeId : ?int
          -commissionRate : ?float
          -updatedBy : ?int
          -updatePriceTimestamp : bool
          -markAsValidated : bool
          -changedFields : array<string, mixed>
          -__construct(linkId)
          {static} +fromRequest(linkId, requestData, updatedBy)
          -validateAndHydrate(data)
          -getOriginalDataSnapshot()
          -identifyChangedFields(originalData)
          -validateAndFormatPrice(price, errors)
          -validateAndFormatUrl(url, errors)
          -validateRating(rating, errors)
          -validateCommissionRate(rate, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getLinkId()
          +getStoreName()
          +getPrice()
          +getUrl()
          +getRating()
          +isActive()
          +getMarketplaceBadgeId()
          +getCommissionRate()
          +getUpdatedBy()
          +shouldUpdatePriceTimestamp()
          +shouldMarkAsValidated()
          +hasRating()
          +hasMarketplaceBadge()
          +hasCommissionRate()
          +getChangedFields()
          +hasChanges()
          +isPriceChanged()
          +isCommissionRateChanged()
          +isStatusChanged()
          +getUpdateScenario()
          +getCommissionRateDisplay()
          +getCommissionRateDecimal()
          +getChangesSummary()
          -formatChangeValue(value, field)
          -formatFieldName(field)
          +toDatabaseArray()
          +toArray()
          +validate()
        }
        class "BulkLinkUpdateRequest\n<b>DTO for bulk updating multiple affiliate links</b>" as DTOs_Requests_Link_BulkLinkUpdateRequest {
          -linkIds : array
          -storeName : ?string
          -price : ?string
          -url : ?string
          -rating : ?string
          -active : ?bool
          -marketplaceBadgeId : ?int
          -commissionRate : ?float
          -updatedBy : ?int
          -updatePriceTimestamp : bool
          -markAsValidated : bool
          -updateReason : string
          -skipValidation : bool
          -batchSize : int
          -updateData : array<string, mixed>
          -__construct()
          {static} +fromRequest(requestData, updatedBy)
          -validateAndHydrate(data)
          -validateLinkIds(linkIds, errors)
          -validateAndFormatPrice(price, errors)
          -validateAndFormatUrl(url, errors)
          -validateRating(rating, errors)
          -validateCommissionRate(rate, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getLinkIds()
          +getStoreName()
          +getPrice()
          +getUrl()
          +getRating()
          +isActive()
          +getMarketplaceBadgeId()
          +getCommissionRate()
          +getUpdatedBy()
          +shouldUpdatePriceTimestamp()
          +shouldMarkAsValidated()
          +getUpdateReason()
          +shouldSkipValidation()
          +getBatchSize()
          +getUpdateData()
          +isUpdatingStoreName()
          +isUpdatingPrice()
          +isUpdatingUrl()
          +isUpdatingRating()
          +isUpdatingActiveStatus()
          +isUpdatingMarketplaceBadge()
          +isUpdatingCommissionRate()
          +getLinkCount()
          +isLargeBatch()
          +getLinkIdChunks()
          +getUpdateSummary()
          +getCommissionRateDisplay()
          +getCommissionRateDecimal()
          +toDatabaseArray()
          +toArray()
          +validate()
        }
      }
      package Category as DTOs.Requests.Category {
        class "CreateCategoryRequest\n<b>DTO for creating a new category</b>" as DTOs_Requests_Category_CreateCategoryRequest {
          -name : string
          -slug : string
          -description : ?string
          -icon : string
          -sortOrder : int
          -active : bool
          -parentId : ?int
          -commissionRate : ?float
          -createdBy : ?int
          -color : ?string
          -metaTitle : ?string
          -metaDescription : ?string
          -__construct()
          {static} +fromRequest(requestData, createdBy)
          {static} +fromArray(data)
          {static} +create(name, slug, description, icon, sortOrder, active, parentId, commissionRate, createdBy, color, metaTitle, metaDescription)
          -validateAndHydrate(data)
          -generateSlug(data)
          -validateCommissionRate(rate, errors)
          -validateColor(color, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +validate()
          +isValid()
          +getName()
          +getSlug()
          +getDescription()
          +getIcon()
          +getSortOrder()
          +isActive()
          +getParentId()
          +getCommissionRate()
          +getCreatedBy()
          +getColor()
          +getMetaTitle()
          +getMetaDescription()
          +hasParent()
          +hasCommissionRate()
          +getCommissionRateDisplay()
          +toDatabaseArray()
          +toArray()
          +toSummary()
          +__toString()
          {static} -normalizeArrayKeys(data)
        }
        class "UpdateCategoryRequest" as DTOs_Requests_Category_UpdateCategoryRequest {
          -categoryId : int
          -name : ?string
          -slug : ?string
          -description : ?string
          -icon : ?string
          -sortOrder : ?int
          -active : ?bool
          -parentId : ?int
          -commissionRate : ?float
          -updatedBy : ?int
          -color : ?string
          -metaTitle : ?string
          -metaDescription : ?string
          -regenerateSlug : bool
          -changedFields : array
          -__construct(categoryId)
          {static} +fromRequest(categoryId, requestData, updatedBy)
          {static} +create(categoryId, updates, updatedBy)
          -validateAndHydrate(data, updatedBy)
          -getOriginalDataSnapshot()
          -identifyChangedFields(originalData)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getCategoryId()
          +getName()
          +getSlug()
          +getDescription()
          +getIcon()
          +getSortOrder()
          +isActive()
          +getParentId()
          +getCommissionRate()
          +getUpdatedBy()
          +getColor()
          +getMetaTitle()
          +getMetaDescription()
          +shouldRegenerateSlug()
          +getChangedFields()
          +hasChanges()
          +isFieldChanged(field)
          +getChangeSummary()
          -formatChangeValue(value)
          +toDatabaseArray()
          +toArray()
          +toSummary()
        }
      }
      package Marketplace as DTOs.Requests.Marketplace {
        class "CreateMarketplaceRequest\n<b>DTO for creating a new marketplace</b>" as DTOs_Requests_Marketplace_CreateMarketplaceRequest {
          -name : string
          -slug : string
          -description : ?string
          -icon : ?string
          -color : string
          -active : bool
          -domain : ?string
          -affiliateProgramUrl : ?string
          -defaultCommissionRate : ?float
          -apiKey : ?string
          -apiSecret : ?string
          -webhookUrl : ?string
          -createdBy : ?int
          -__construct()
          {static} +fromRequest(requestData, createdBy)
          -validateAndHydrate(data)
          -generateSlug(data)
          -validateColor(color, errors)
          -validateDomain(domain, errors)
          -validateUrl(url, fieldName, errors)
          -validateCommissionRate(rate, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getName()
          +getSlug()
          +getDescription()
          +getIcon()
          +getColor()
          +isActive()
          +getDomain()
          +getAffiliateProgramUrl()
          +getDefaultCommissionRate()
          +getApiKey()
          +getApiSecret()
          +getWebhookUrl()
          +getCreatedBy()
          +hasDomain()
          +hasAffiliateProgram()
          +hasApiCredentials()
          +hasWebhookUrl()
          +hasDefaultCommissionRate()
          +getDefaultCommissionRateDisplay()
          +getDefaultCommissionRateDecimal()
          +toDatabaseArray()
          +toArray()
          +toSummary()
        }
        class "UpdateMarketplaceRequest\n<b>DTO for updating an existing marketplace</b>" as DTOs_Requests_Marketplace_UpdateMarketplaceRequest {
          -marketplaceId : int
          -name : ?string
          -slug : ?string
          -description : ?string
          -icon : ?string
          -color : ?string
          -active : ?bool
          -domain : ?string
          -affiliateProgramUrl : ?string
          -defaultCommissionRate : ?float
          -apiKey : ?string
          -apiSecret : ?string
          -webhookUrl : ?string
          -updatedBy : ?int
          -regenerateSlug : bool
          -clearApiCredentials : bool
          -changedFields : array<string, mixed>
          -__construct(marketplaceId)
          {static} +fromRequest(marketplaceId, requestData, updatedBy)
          -validateAndHydrate(data)
          -getOriginalDataSnapshot()
          -identifyChangedFields(originalData)
          -validateColor(color, errors)
          -validateDomain(domain, errors)
          -validateUrl(url, fieldName, errors)
          -validateCommissionRate(rate, errors)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getMarketplaceId()
          +getName()
          +getSlug()
          +getDescription()
          +getIcon()
          +getColor()
          +isActive()
          +getDomain()
          +getAffiliateProgramUrl()
          +getDefaultCommissionRate()
          +getApiKey()
          +getApiSecret()
          +getWebhookUrl()
          +getUpdatedBy()
          +shouldRegenerateSlug()
          +shouldClearApiCredentials()
          +hasDomain()
          +hasAffiliateProgram()
          +hasApiCredentials()
          +hasWebhookUrl()
          +hasDefaultCommissionRate()
          +getChangedFields()
          +hasChanges()
          +isStatusChanged()
          +isDomainChanged()
          +isCommissionRateChanged()
          +isApiCredentialsChanged()
          +getUpdateScenario()
          +getDefaultCommissionRateDisplay()
          +getDefaultCommissionRateDecimal()
          +getChangeSummary()
          -formatChangeValue(value, field)
          -formatFieldName(field)
          +toDatabaseArray()
          +toArray()
          +toSummary()
        }
      }
      package Auth as DTOs.Requests.Auth {
        class "LoginRequest" as DTOs_Requests_Auth_LoginRequest {
          -identifier : string
          -password : string
          -rememberMe : bool
          -redirectUrl : ?string
          -ipAddress : ?string
          -userAgent : ?string
          -__construct()
          {static} +fromRequest(requestData, ipAddress, userAgent)
          {static} +create(identifier, password, rememberMe)
          -validateAndHydrate(data, ipAddress, userAgent)
          -sanitizeInput(data)
          -validateIdentifier(identifier, errors)
          -validatePassword(password, errors)
          -validateOptionalFields(data, errors)
          -validateBusinessRules(data, errors)
          -sanitizeRedirectUrl(url)
          -isValidRedirectUrl(url)
          {static} +rules()
          {static} +messages()
          +getIdentifier()
          +getPassword()
          +getRememberMe()
          +getRedirectUrl()
          +getIpAddress()
          +getUserAgent()
          +isEmailIdentifier()
          +isUsernameIdentifier()
          +getIdentifierType()
          +toLogArray()
          +toArray()
          +toDatabaseArray()
          +getSanitizedIdentifier()
          +hasRedirect()
          +getFullRedirectUrl(baseUrl)
        }
      }
      package System as DTOs.Requests.System {
        class "SystemHealthRequest" as DTOs_Requests_System_SystemHealthRequest {
          -components : ?array
          -deepCheck : bool
          -includeMetrics : bool
          -forceRefresh : bool
          -adminId : ?int
          -requestedAt : DateTimeImmutable
          -ipAddress : string
          -userAgent : string
          -__construct()
          {static} +fromRequest(requestData, adminId, ipAddress, userAgent)
          {static} +quickCheck(adminId)
          {static} +fullCheck(adminId)
          -validateAndHydrate(data, adminId, ipAddress, userAgent)
          -validateBusinessRules(errors)
          {static} +rules()
          {static} +messages()
          +getComponents()
          +isDeepCheck()
          +shouldIncludeMetrics()
          +isForceRefresh()
          +getAdminId()
          +getRequestedAt()
          +getIpAddress()
          +getUserAgent()
          +checkComponent(component)
          +checkDatabase()
          +checkCache()
          +checkStorage()
          +checkEmail()
          +getCheckType()
          +toArray()
          +toDatabaseArray()
          +getAuditMessage()
          +validate()
          +getCacheKey()
          +getEstimatedDuration()
        }
      }
    }
    package Queries as DTOs.Queries {
      class "ProductQuery\n<b>Product Query DTO</b>" as DTOs_Queries_ProductQuery {
        -status : ?array
        -categoryIds : ?array
        -search : ?string
        -minPrice : ?float
        -maxPrice : ?float
        -marketplaceId : ?int
        -badgeIds : ?array
        -hasActiveLinks : ?bool
        -needsPriceUpdate : ?bool
        -needsLinkValidation : ?bool
        -dateFrom : ?string
        -dateTo : ?string
        -dateField : ?string
        -sortBy : string
        -sortDirection : string
        -includeTrashed : bool
        -adminMode : bool
        -verifiedBy : ?int
        -__construct()
        {static} +fromRequest(requestData, adminMode)
        {static} +forPublic()
        {static} +forAdmin()
        -applyFilters(filters)
        -parseStatusFilter(statusInput)
        -parseIdFilter(idInput)
        -sanitizeSearch(search)
        -parsePrice(price)
        -validateSortField(field)
        -validateSortDirection(direction)
        -validateDateField(field)
        +toRepositoryFilters()
        +getSortString()
        +getCacheKey(prefix)
        +validate()
        +isPublicQuery()
        +isAdminQuery()
        +hasFilters()
        +toFilterSummary()
        +getStatus()
        +getCategoryIds()
        +getSearch()
        +getMinPrice()
        +getMaxPrice()
        +getMarketplaceId()
        +getBadgeIds()
        +getHasActiveLinks()
        +getNeedsPriceUpdate()
        +getNeedsLinkValidation()
        +getDateFrom()
        +getDateTo()
        +getDateField()
        +getSortBy()
        +getSortDirection()
        +getIncludeTrashed()
        +getAdminMode()
        +getVerifiedBy()
        +with(changes)
        +toArray()
      }
      class "PaginationQuery\n<b>Pagination Query DTO</b>" as DTOs_Queries_PaginationQuery {
        -page : int
        -perPage : int
        -maxPerPage : int
        -defaultPerPage : int
        -cachePrefix : string
        -cacheTtl : ?int
        -totalItems : ?int
        -totalPages : ?int
        -__construct()
        {static} +fromRequest(requestData, config)
        {static} +default(config)
        -applyRequestParameters(requestData)
        -parsePage(page)
        -parsePerPage(perPage, maxPerPage)
        +getOffset()
        +getLimit()
        +isFirstPage()
        +isDefault()
        +validate()
        +getCacheKey(prefix)
        +getCachePattern(prefix)
        +getCacheKeyWithTotal(totalItems, prefix)
        +withTotalItems(totalItems)
        +generateMetadata(totalItems)
        +generateLinks(baseUrl, queryParams, totalItems)
        -buildUrl(baseUrl, params, page)
        +pageExists(totalItems)
        +getClampedPage(totalItems)
        +nextPage()
        +previousPage()
        +withPage(page)
        +withPerPage(perPage)
        +withCacheConfig(prefix, ttl)
        +getPage()
        +getPerPage()
        +getMaxPerPage()
        +getDefaultPerPage()
        +getCachePrefix()
        +getCacheTtl()
        +getTotalItems()
        +getTotalPages()
        +toArray()
        +toString()
      }
    }
    package Responses as DTOs.Responses {
      class "LinkResponse\n<b>Link Response DTO</b>" as DTOs_Responses_LinkResponse {
        +id : int
        +product_id : int
        +marketplace_id : int
        +store_name : string
        +price : string
        +formatted_price : string
        +url : ?string
        +rating : string
        +formatted_rating : string
        +star_rating_html : string
        +active : bool
        +sold_count : int
        +formatted_sold_count : string
        +clicks : int
        +last_price_update : ?string
        +last_validation : ?string
        +affiliate_revenue : string
        +formatted_revenue : string
        +marketplace_badge_id : ?int
        +created_at : ?string
        +updated_at : ?string
        +commission_rate_display : string
        +commission_rate_percent : string
        +is_default_commission : bool
        +revenue_per_click : string
        {static} +fromEntity(link)
        {static} +collection(links)
        +toArray()
        +toJson(pretty)
        +toSummary()
        +toDetail()
        +needsPriceUpdate()
        +needsValidation()
        +getClickThroughRate(totalProductViews)
        +getCommissionInfo()
        +getStatusBadge()
      }
      class "ProductResponse\n<b>Product Response DTO</b>" as DTOs_Responses_ProductResponse {
        -id : int
        -name : string
        -slug : string
        -description : ?string
        -marketPrice : string
        -viewCount : int
        -imageUrl : ?string
        -imageSourceType : ?string
        -status : string
        -statusLabel : ?string
        -statusColorClass : ?string
        -categoryId : ?int
        -categoryName : ?string
        -categorySlug : ?string
        -categoryIcon : ?string
        -createdAt : ?string
        -updatedAt : ?string
        -publishedAt : ?string
        -verifiedAt : ?string
        -verifiedBy : ?int
        -lastPriceCheck : ?string
        -lastLinkCheck : ?string
        -deletedAt : ?string
        -imagePath : ?string
        -adminMode : bool
        -includeTrashed : bool
        -baseImageUrl : string
        -currency : string
        -formatPrices : bool
        -formattedCache : ?array
        -__construct()
        {static} +fromEntity(product, config)
        {static} +fromArray(data, config)
        {static} +collection(items, config)
        #applyConfiguration(config)
        #populateFromEntity(product)
        -populateFromArray(data)
        -resolveImageUrl(product)
        -resolveImageUrlFromArray(data)
        -formatTimestamp(timestamp)
        -formatTimestampFromString(timestamp)
        +getFormattedMarketPrice()
        +getNumericMarketPrice()
        +getFormattedViewCount()
        +isPublished()
        +hasImage()
        +hasCategory()
        +getCategoryInfo()
        +getStatusInfo()
        +getImageInfo()
        +toPublicArray()
        +toAdminArray()
        +toArray()
        +getCacheKey(prefix)
        +getSummary()
        +getId()
        +getName()
        +getSlug()
        +getDescription()
        +getMarketPrice()
        +getViewCount()
        +getImageUrl()
        +getImageSourceType()
        +getStatus()
        +getStatusLabel()
        +getStatusColorClass()
        +getCategoryId()
        +getCategoryName()
        +getCategorySlug()
        +getCategoryIcon()
        +getCreatedAt()
        +getUpdatedAt()
        +getPublishedAt()
        +getVerifiedAt()
        +getVerifiedBy()
        +getLastPriceCheck()
        +getLastLinkCheck()
        +getDeletedAt()
        +getImagePath()
        +isAdminMode()
        +getBaseImageUrl()
        +getCurrency()
        +withConfig(config)
        +withCategory(category)
        +toJson(pretty)
      }
      class "ProductDetailResponse" as DTOs_Responses_ProductDetailResponse {
        +currency : 
        +verifiedAt : 
        +verifiedBy : 
        +adminMode : 
        +id : 
        +slug : 
        +baseImageUrl : 
        -category : ?array
        -links : array
        -marketplaces : array
        -badges : array
        -marketplaceBadges : array
        -verifiedByAdmin : ?array
        -statistics : array
        -recentActions : array
        -loadedRelations : array
        -loadCategory : bool
        -loadLinks : bool
        -loadMarketplaces : bool
        -loadBadges : bool
        -loadMarketplaceBadges : bool
        -loadVerificationInfo : bool
        -loadStatistics : bool
        -loadRecentActions : bool
        -formattedRelations : ?array
        -__construct()
        {static} +fromEntityWithRelations(product, relations, config)
        {static} +withAllRelations(product, allRelations, config)
        -applyRelationConfig(config)
        -loadRelations(relations)
        -loadAllRelations(allRelations)
        -loadCategoryRelation(categoryData)
        -loadLinksRelation(linksData)
        -loadMarketplacesRelation(marketplacesData)
        -loadBadgesRelation(badgesData)
        -loadMarketplaceBadgesRelation(badgesData)
        -loadVerificationInfo(adminData)
        -loadStatistics(statsData)
        -loadRecentActions(actionsData)
        -getFormattedCategory()
        -getFormattedLinks()
        -formatLinkPrice(price)
        -generateStarRating(rating)
        -formatMarketplaceInfo(marketplace)
        -formatMarketplaceBadgeInfo(badge)
        -getFormattedBadges()
        -getFormattedMarketplaces()
        -getFormattedVerificationInfo()
        -getFormattedStatistics()
        -calculateAverageRating()
        -findLowestPrice()
        -findHighestPrice()
        -getFormattedRecentActions()
        -getAllFormattedRelations()
        +toDetailArray()
        +toArray()
        +hasRelation(relation)
        +getLoadedRelationsCount()
        +getDetailCacheKey(prefix)
        +getDetailSummary()
        +getCategory()
        +getLinks()
        +getMarketplaces()
        +getBadges()
        +getMarketplaceBadges()
        +getVerifiedByAdmin()
        +getStatistics()
        +getRecentActions()
        +getLoadedRelations()
        +isLoadCategory()
        +isLoadLinks()
        +isLoadMarketplaces()
        +isLoadBadges()
        +isLoadMarketplaceBadges()
        +isLoadVerificationInfo()
        +isLoadStatistics()
        +isLoadRecentActions()
        +withRelations(newRelations)
        +withRelationConfig(relationConfig)
        +toDetailJson(pretty)
      }
      class "CategoryResponse" as DTOs_Responses_CategoryResponse {
        +id : int
        +name : string
        +slug : string
        +statistics : ?array
        +product_count : ?int
        +children_count : ?int
        +highlight_query : ?string
        {static} +fromEntity(category, options)
      }
      class "CategoryTreeResponse" as DTOs_Responses_CategoryTreeResponse {
        {static} +fromEntity(entity)
        {static} +fromTree(tree, param2)
        {static} +create(param)
      }
      class "LinkAnalyticsResponse" as DTOs_Responses_LinkAnalyticsResponse {
        {static} +fromEntity(entity)
        {static} +fromTree(tree)
        {static} +create(param)
      }
      class "BulkActionResult\n<b>Bulk Action Result DTO</b>" as DTOs_Responses_BulkActionResult {
        -successCount : int
        -failedCount : int
        -failedItems : array<int, string>
        -requiresBackgroundJob : bool
        -jobId : string|null
        -completedAt : DateTimeImmutable
        -__construct()
        {static} +immediate(successCount, failedCount, failedItems)
        {static} +backgroundJob(jobId, totalItems)
        {static} +fromArray(data)
        +requiresBackgroundJob()
        +getSuccessCount()
        +getFailedCount()
        +getFailedItems()
        +getJobId()
        +getCompletedAt()
        +getTotalProcessed()
        +isCompleteSuccess()
        +hasFailures()
        +isProcessing()
        +getSuccessPercentage()
        +addFailedItem(itemId, errorMessage)
        +addSuccess()
        +toArray()
        +getSummaryMessage()
      }
      class "BulkActionStatus\n<b>Bulk Action Status DTO</b>" as DTOs_Responses_BulkActionStatus {
        -jobId : string
        -status : BulkActionStatusType
        -progress : int
        -processedCount : int
        -totalCount : int
        -successCount : int
        -failedCount : int
        -failedItems : array<int, string>
        -createdAt : DateTimeImmutable
        -startedAt : DateTimeImmutable|null
        -completedAt : DateTimeImmutable|null
        -updatedAt : DateTimeImmutable|null
        -errorMessage : string|null
        -requestData : array|null
        -__construct()
        {static} +createInitial(jobId, request)
        {static} +createProcessing(jobId, request)
        {static} +createCompleted(jobId, result)
        {static} +createFailed(jobId, errorMessage)
        {static} +fromArray(data)
        {static} -parseDateTime(dateString)
        +updateProgress(processedCount, successCount, failedCount, failedItems)
        +markAsCompleted()
        +markAsFailed(errorMessage)
        +getJobId()
        +getStatus()
        +isPending()
        +isProcessing()
        +isCompleted()
        +isFailed()
        +getProgress()
        +getProcessedCount()
        +getTotalCount()
        +getSuccessCount()
        +getFailedCount()
        +getFailedItems()
        +getErrorMessage()
        +getEstimatedTimeRemaining()
        +getDuration()
        +getFormattedDuration()
        +toArray()
        +getStatusMessage()
      }
      class "AdminResponse" as DTOs_Responses_AdminResponse {
        -id : int
        -username : string
        -email : string
        -name : string
        -role : string
        -active : bool
        -lastLogin : ?string
        -createdAt : ?string
        -updatedAt : ?string
        -lastActivity : ?string
        -loginAttempts : ?int
        -roleLabel : ?string
        -roleColorClass : ?string
        -statusLabel : ?string
        -statusColorClass : ?string
        -initials : ?string
        -permissions : ?array
        -activityLogs : ?array
        -loginHistory : ?array
        -sessions : ?array
        -includeSensitive : bool
        -includeDetails : bool
        -dateFormat : string
        -__construct()
        {static} +fromEntity(admin, options)
        {static} +fromArray(data, options)
        {static} +collection(admins, options)
        -applyConfiguration(config)
        -populateFromEntity(admin)
        -populateFromArray(data)
        -formatTimestamp(timestamp)
        -formatTimestampFromString(timestamp)
        -calculateLastActivity(lastLogin, updatedAt)
        -generateInitials(name)
        -generateRoleLabel(role)
        -generateRoleColorClass(role)
        +isRecentlyActive(minutes)
        +toPublicArray()
        +toAdminArray()
        +toArray()
        +getCacheKey(prefix)
        +getSummary()
        +getId()
        +getUsername()
        +getEmail()
        +getName()
        +getRole()
        +isActive()
        +getLastLogin()
        +getCreatedAt()
        +getUpdatedAt()
        +getLastActivity()
        +getInitials()
        +getRoleLabel()
        +getRoleColorClass()
        +getStatusLabel()
        +getStatusColorClass()
        +getLoginAttempts()
        +getPermissions()
        +getActivityLogs()
        +getLoginHistory()
        +getSessions()
        +withConfig(config)
        +withAdditionalData(additionalData)
        +toJson(pretty)
      }
      class "MarketplaceResponse" as DTOs_Responses_MarketplaceResponse {
        -id : int
        -name : string
        -slug : string
        -description : ?string
        -icon : ?string
        -color : string
        -active : bool
        -domain : ?string
        -affiliateProgramUrl : ?string
        -defaultCommissionRate : ?float
        -apiKey : ?string
        -apiSecret : ?string
        -webhookUrl : ?string
        -createdAt : ?string
        -updatedAt : ?string
        -deletedAt : ?string
        -linksCount : ?int
        -activeLinksCount : ?int
        -productsCount : ?int
        -statistics : ?array
        -configuration : ?array
        -topProducts : ?array
        -recentActivity : ?array
        -healthStatus : ?string
        -statusLabel : ?string
        -statusColorClass : ?string
        -iconHtml : ?string
        -colorStyle : ?string
        -cssClasses : ?string
        -commissionRateDisplay : ?string
        -includeSensitive : bool
        -includeDetails : bool
        -includeConfiguration : bool
        -dateFormat : string
        -__construct()
        {static} +fromEntity(marketplace, options)
        {static} +fromArray(data, options)
        {static} +collection(marketplaces, options)
        -applyConfiguration(config)
        -populateFromEntity(marketplace)
        -populateFromArray(data)
        -formatTimestamp(timestamp)
        -formatTimestampFromString(timestamp)
        -generateCssClasses(color)
        +hasAffiliateProgram()
        +hasApiConfiguration()
        +hasDefaultCommissionRate()
        +getDefaultCommissionRateDecimal()
        +getDefaultCommissionRatePercentage()
        +isPopular(threshold)
        +toPublicArray()
        +toAdminArray()
        +toArray()
        +getCacheKey(prefix)
        +getSummary()
        +getId()
        +getName()
        +getSlug()
        +getDescription()
        +getIcon()
        +getColor()
        +isActive()
        +getDomain()
        +getAffiliateProgramUrl()
        +getDefaultCommissionRate()
        +getApiKey()
        +getApiSecret()
        +getWebhookUrl()
        +getCreatedAt()
        +getUpdatedAt()
        +getDeletedAt()
        +getLinksCount()
        +getActiveLinksCount()
        +getProductsCount()
        +getStatistics()
        +getConfiguration()
        +getTopProducts()
        +getRecentActivity()
        +getHealthStatus()
        +getStatusLabel()
        +getStatusColorClass()
        +getIconHtml()
        +getColorStyle()
        +getCssClasses()
        +getCommissionRateDisplay()
        +withConfig(config)
        +withAdditionalData(additionalData)
        +toJson(pretty)
      }
      class "AuditLogResponse" as DTOs_Responses_AuditLogResponse {
        -id : ?int
        -adminId : ?int
        -actionType : string
        -entityType : string
        -entityId : int
        -oldValues : ?string
        -newValues : ?string
        -changesSummary : ?string
        -ipAddress : ?string
        -userAgent : ?string
        -performedAt : string
        -adminName : ?string
        -adminUsername : ?string
        -adminInitials : ?string
        -adminDisplayName : ?string
        -actionTypeLabel : ?string
        -actionIcon : ?string
        -actionColorClass : ?string
        -entityReference : ?string
        -timeAgo : ?string
        -truncatedSummary : ?string
        -oldValuesArray : ?array
        -newValuesArray : ?array
        -parsedChanges : ?array
        -includeValues : bool
        -includeDetails : bool
        -includeRelated : bool
        -summaryLength : int
        -dateFormat : string
        -__construct()
        {static} +fromEntity(auditLog, options)
        {static} +fromArray(data, options)
        {static} +collection(auditLogs, options)
        -applyConfiguration(config)
        -populateFromEntity(auditLog)
        -populateFromArray(data)
        -formatTimestampFromString(timestamp)
        -generateInitials(name)
        -generateActionTypeLabel(actionType)
        -generateActionIcon(actionType)
        -generateActionColorClass(actionType)
        -generateEntityReference(entityType, entityId)
        -calculateTimeAgo(timestamp)
        -truncateSummary(summary, length)
        -parseJsonIfValid(json)
        -parseChangesSummary(summary)
        +wasPerformedBy(adminId)
        +wasSystemAction()
        +isRecent(minutes)
        +hasChanges()
        +toTimelineArray()
        +toDetailArray()
        +toArray()
        +getCacheKey(prefix)
        +getSummary()
        +getId()
        +getAdminId()
        +getActionType()
        +getEntityType()
        +getEntityId()
        +getOldValues()
        +getNewValues()
        +getChangesSummary()
        +getIpAddress()
        +getUserAgent()
        +getPerformedAt()
        +getAdminName()
        +getAdminUsername()
        +getAdminInitials()
        +getAdminDisplayName()
        +getActionTypeLabel()
        +getActionIcon()
        +getActionColorClass()
        +getEntityReference()
        +getTimeAgo()
        +getTruncatedSummary()
        +getOldValuesArray()
        +getNewValuesArray()
        +getParsedChanges()
        +withConfig(config)
        +withAdditionalData(additionalData)
        +toJson(pretty)
      }
      class "DashboardStatisticsResponse" as DTOs_Responses_DashboardStatisticsResponse {
        -summaryCards : array
        -trendMetrics : array
        -charts : array
        -recentActivities : array
        -topLists : array
        -performanceMetrics : array
        -systemHealth : array
        -period : string
        -generatedAt : string
        -timezone : ?string
        -widgetConfig : array
        -dataSources : array
        -includeCharts : bool
        -includeActivities : bool
        -includeHealth : bool
        -activitiesLimit : int
        -topListsLimit : int
        -__construct()
        {static} +create(config)
        {static} +fromArray(data)
        -applyConfiguration(config)
        +addSummaryCard(key, title, value, options)
        +updateSummaryCard(key, updates)
        +addTrendMetric(key, title, dataPoints, options)
        +addChart(key, title, type, data, options)
        +addLineChart(key, title, datasets, labels, options)
        +addBarChart(key, title, datasets, labels, options)
        +addPieChart(key, title, data, labels, options)
        +addRecentActivity(activity)
        +setRecentActivities(activities)
        +addTopList(key, title, items, options)
        +addPerformanceMetric(key, title, value, target, options)
        +addSystemHealthCheck(component, status, details)
        +addDataSource(source, metadata)
        -generateColors(count)
        -calculatePerformanceStatus(percentage, thresholds)
        -getHealthIcon(status)
        -getHealthColor(status)
        +getSummaryCards()
        +getTrendMetrics()
        +getCharts()
        +getRecentActivities()
        +getTopLists()
        +getPerformanceMetrics()
        +getSystemHealth()
        +getPeriod()
        +getGeneratedAt()
        +getTimezone()
        +getWidgetConfig()
        +getDataSources()
        +setPeriod(period)
        +setTimezone(timezone)
        +toDashboardArray()
        +toWidgetArray()
        +toArray()
        +getCacheKey(prefix)
        +toJson(pretty)
        {static} +createAdminDashboard(data, config)
        {static} +createProductDashboard(data, config)
      }
    }
  }
  package Validators as Validators {
    class "ProductValidator\n<b>Enterprise-grade Product Validator</b>" as Validators_ProductValidator {
      -validation : Validation
      -productModel : ProductModel
      -categoryModel : CategoryModel
      -linkModel : LinkModel
      -cacheService : CacheService
      -baseRules : array
      -imageRules : array
      -statusRules : array
      -validationCache : array
      +__construct(validation, productModel, categoryModel, linkModel, cacheService)
      +validateCreate(data, options)
      +validateUpdate(productId, data, options)
      +validatePublish(request, product)
      +validateDelete(productId, force, options)
      +validateArchive(productId)
      +validateRestore(productId)
      +validateVerify(productId)
      +validateBulk(productIds, operation, options)
      +validatePrice(price, options)
      +validateImage(imageData, sourceType)
      +validateName(name, excludeProductId)
      +validateDescription(description)
      +getRulesForContext(context, data)
      -runValidation(data, rules)
      -validateBusinessRules(data, context, options)
      -canProductBeUpdated(product, updateData)
      -isSlugUnique(slug, excludeId)
      -isProductNameUnique(name, excludeId)
      -checkDailyProductLimit(adminId)
      -validateUploadedImage(imageData)
      -validateImageUrl(url)
      -validateExternalImage(data)
      -containsDangerousHtml(text)
      -getFieldLabel(field)
      -getRuleFromMessage(message)
      -buildValidationResult(isValid, errors, context)
      {static} +create()
    }
    class "SlugValidator\n<b>Enterprise-grade Slug Validator</b>" as Validators_SlugValidator {
      -validation : Validation
      -cacheService : CacheService
      -productModel : 
      -categoryModel : 
      -marketplaceModel : 
      -pageModel : 
      +__construct()
      +validate(slug, entityType, context, excludeId, options)
      +generate(source, entityType, excludeId, options)
      +suggestAlternatives(originalSlug, entityType, excludeId, options)
      +isValid(slug, entityType, context, excludeId, options)
      +normalize(slug, options)
      +analyzeSeo(slug, options)
      +isReserved(slug, entityType)
      +getReservedSlugs(entityType)
      -validateFormat(slug, options)
      -validateLength(slug, options)
      -validateReserved(slug, entityType, options)
      -validateUniqueness(slug, entityType, excludeId, options)
      -validateSeo(slug, options)
      -validateEntitySpecific(slug, entityType, context, options)
      -checkDatabaseUniqueness(slug, entityType, excludeId)
      -generateUniqueSlug(baseSlug, entityType, excludeId, options)
      -cleanString(string, options)
      -removeAccents(string)
      -truncateSlug(slug, maxLength)
      -removeStopWords(slug, stopWords, separator)
      -limitWords(slug, maxWords, separator)
      -generateRandomSuffix(length)
      -findInvalidCharacters(slug)
      -checkPartialReserved(slug, entityType)
      -findStopWords(slug)
      -calculateLengthScore(length)
      -calculateWordScore(wordCount)
      -calculateKeywordScore(slug)
      -calculateReadabilityScore(slug)
      -calculateSpecialCharScore(slug)
      -getSeoRating(score)
      -getModelForEntity(entityType)
      -getCacheKey(type, params)
      -buildValidationResult(slug, isValid, errors, context)
      {static} +create()
    }
    class "EnumValidator\n<b>Validator untuk validasi nilai enum</b>" as Validators_EnumValidator {
      +enum(value, enumClass, data, error)
      +enum_array(value, enumClass, data, error)
      +not_in_enum(value, excludedCases, data, error)
      +in_enum(value, allowedCases, data, error)
      {static} +getEnumCases(enumClass)
      {static} +getEnumMessage(enumClass)
    }
    class "DateValidator\n<b>Validator untuk validasi tanggal dan waktu</b>" as Validators_DateValidator {
      +date_format(value, format, data, error)
      +after_date(value, minDate, data, error)
      +before_date(value, maxDate, data, error)
      +between_dates(value, dateRange, data, error)
      +working_day(value, param, data, error)
      +future_date(value, param, data, error)
      +past_date(value, param, data, error)
      +within_last_days(value, days, data, error)
      {static} +getSupportedFormats()
    }
    class "EntityValidator\n<b>Validator untuk validasi keberadaan entity di database</b>" as Validators_EntityValidator {
      #db : 
      +__construct(db)
      +exists(value, tableField, data, error)
      +not_exists(value, tableField, data, error)
      +exists_and_active(value, tableField, data, error)
      +belongs_to(value, params, data, error)
      +no_dependencies(value, params, data, error)
      +unique_in_scope(value, params, data, error)
    }
    class "FileValidator\n<b>Validator untuk validasi file upload</b>" as Validators_FileValidator {
      +uploaded_file(value, param, data, error)
      +file_extension(value, allowedExtensions, data, error)
      +file_mime(value, allowedMimes, data, error)
      +file_size(value, maxSize, data, error)
      +file_dimensions(value, dimensions, data, error)
      #getFileExtension(file)
      #getFileMimeType(file)
      #getFileSize(file)
      #getTempPath(file)
      #parseSize(size)
      #getUploadErrorMessage(errorCode)
    }
    class "ImageValidator\n<b>Validator khusus untuk validasi gambar</b>" as Validators_ImageValidator {
      +is_image(value, param, data, error)
      +image_ratio(value, ratio, data, error)
      +image_square(value, param, data, error)
      +image_landscape(value, param, data, error)
      +image_portrait(value, param, data, error)
      +image_max(value, maxDimensions, data, error)
      +image_min(value, minDimensions, data, error)
      +image_exact(value, dimensions, data, error)
      +image_web_optimized(value, maxSize, data, error)
      {static} +getSupportedFormats()
      {static} +getRecommendedDimensions()
    }
  }
  package Commands as Commands {
    class "TestProductFlow" as Commands_TestProductFlow {
      #group : 
      #name : 
      #description : 
      +run(params)
    }
  }
  Commands_TestProductFlow ..> Config_Database
  Commands_TestProductFlow ..> DTOs_Requests_Product_CreateProductRequest
  Commands_TestProductFlow ..> Enums_ProductStatus
  Config_Filters ..> Filters_CorsFilter
  Contracts_BadgeInterface ..> DTOs_BaseDTO
  Contracts_BadgeInterface ..> Entities_Badge
  Contracts_BadgeInterface <|-- Services_BadgeService
  Contracts_BaseInterface ..> DTOs_BaseDTO
  Contracts_BaseInterface ..> Repositories_BaseRepositoryInterface
  Contracts_BaseInterface <|-- Services_BaseService
  Contracts_CacheInterface <|-- Services_CacheService
  Contracts_MarketplaceBadgeInterface ..> DTOs_BaseDTO
  Contracts_MarketplaceBadgeInterface ..> Entities_MarketplaceBadge
  Contracts_ProductBulkInterface ..> DTOs_Requests_Product_ProductBulkActionRequest
  Contracts_ProductBulkInterface ..> DTOs_Responses_BulkActionResult
  Contracts_ProductBulkInterface ..> Enums_ProductBulkActionType
  Contracts_ProductBulkInterface ..> Enums_ProductStatus
  Contracts_ProductBulkInterface <|-- Services_Product_Concrete_ProductBulkService
  Contracts_ProductCRUDInterface ..> DTOs_Requests_Product_CreateProductRequest
  Contracts_ProductCRUDInterface ..> DTOs_Requests_Product_ProductDeleteRequest
  Contracts_ProductCRUDInterface ..> DTOs_Requests_Product_ProductQuickEditRequest
  Contracts_ProductCRUDInterface ..> DTOs_Requests_Product_UpdateProductRequest
  Contracts_ProductCRUDInterface ..> DTOs_Responses_ProductDetailResponse
  Contracts_ProductCRUDInterface ..> DTOs_Responses_ProductResponse
  Contracts_ProductCRUDInterface ..> Entities_Product
  Contracts_ProductCRUDInterface <|-- Services_Product_Concrete_ProductCRUDService
  Contracts_ProductQueryInterface ..> DTOs_Queries_ProductQuery
  Contracts_ProductQueryInterface ..> Enums_ProductStatus
  Contracts_ProductQueryInterface <|-- Services_Product_Concrete_ProductQueryService
  Contracts_ProductWorkflowInterface ..> DTOs_Requests_Product_ProductToggleStatusRequest
  Contracts_ProductWorkflowInterface ..> DTOs_Requests_Product_PublishProductRequest
  Contracts_ProductWorkflowInterface ..> DTOs_Responses_ProductResponse
  Contracts_ProductWorkflowInterface ..> Enums_ProductStatus
  Contracts_ProductWorkflowInterface <|-- Services_Product_Concrete_ProductWorkflowService
  Controllers_Api_BaseApi ..> Exceptions_AuthorizationException
  Controllers_Api_BaseApi ..> Exceptions_ValidationException
  Controllers_Auth ..> DTOs_Requests_Auth_LoginRequest
  Controllers_BaseAdmin ..> Config_Services
  Controllers_BaseAdmin ..> Exceptions_AuthorizationException
  Controllers_BaseAdmin ..> Exceptions_ValidationException
  Controllers_BaseController ..> DTOs_BaseDTO
  Controllers_BaseController ..> Exceptions_AuthorizationException
  Controllers_BaseController ..> Exceptions_ValidationException
  Controllers_BaseController <|-- Controllers_Api_BaseApi
  Controllers_BaseController <|-- Controllers_Auth
  Controllers_BaseController <|-- Controllers_BaseAdmin
  DTOs_BaseDTO ..> DTOs_BaseDTO
  DTOs_BaseDTO ..> Entities_BaseEntity
  DTOs_BaseDTO ..> Exceptions_ValidationException
  DTOs_BaseDTO <|-- DTOs_Requests_Auth_LoginRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Category_CreateCategoryRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Category_UpdateCategoryRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Link_BulkLinkUpdateRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Link_CreateLinkRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Link_UpdateLinkRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Marketplace_CreateMarketplaceRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Marketplace_UpdateMarketplaceRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_CreateProductRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_ProductBulkActionRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_ProductDeleteRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_ProductQuickEditRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_ProductToggleStatusRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_PublishProductRequest
  DTOs_BaseDTO <|-- DTOs_Requests_Product_UpdateProductRequest
  DTOs_BaseDTO <|-- DTOs_Requests_System_SystemHealthRequest
  DTOs_BaseDTO <|-- DTOs_Responses_BulkActionResult
  DTOs_BaseDTO <|-- DTOs_Responses_BulkActionStatus
  DTOs_Queries_ProductQuery ..> Enums_ProductStatus
  DTOs_Requests_Auth_LoginRequest ..> Exceptions_ValidationException
  DTOs_Requests_Category_CreateCategoryRequest ..> Exceptions_ValidationException
  DTOs_Requests_Category_CreateCategoryRequest ..> Validators_SlugValidator
  DTOs_Requests_Category_UpdateCategoryRequest ..> Exceptions_ValidationException
  DTOs_Requests_Link_BulkLinkUpdateRequest ..> Exceptions_ValidationException
  DTOs_Requests_Link_CreateLinkRequest ..> Exceptions_ValidationException
  DTOs_Requests_Link_UpdateLinkRequest ..> Exceptions_ValidationException
  DTOs_Requests_Marketplace_CreateMarketplaceRequest ..> Exceptions_ValidationException
  DTOs_Requests_Marketplace_CreateMarketplaceRequest ..> Validators_SlugValidator
  DTOs_Requests_Marketplace_UpdateMarketplaceRequest ..> Exceptions_ValidationException
  DTOs_Requests_Marketplace_UpdateMarketplaceRequest ..> Validators_SlugValidator
  DTOs_Requests_Product_CreateProductRequest ..> Enums_ImageSourceType
  DTOs_Requests_Product_CreateProductRequest ..> Enums_ProductStatus
  DTOs_Requests_Product_CreateProductRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_CreateProductRequest ..> Validators_SlugValidator
  DTOs_Requests_Product_ProductBulkActionRequest ..> Enums_ProductBulkActionType
  DTOs_Requests_Product_ProductBulkActionRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_ProductDeleteRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_ProductQuickEditRequest ..> Enums_ProductStatus
  DTOs_Requests_Product_ProductQuickEditRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_ProductToggleStatusRequest ..> Enums_ProductStatus
  DTOs_Requests_Product_ProductToggleStatusRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_PublishProductRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_UpdateProductRequest ..> Enums_ImageSourceType
  DTOs_Requests_Product_UpdateProductRequest ..> Enums_ProductStatus
  DTOs_Requests_Product_UpdateProductRequest ..> Exceptions_ValidationException
  DTOs_Requests_Product_UpdateProductRequest ..> Validators_SlugValidator
  DTOs_Requests_System_SystemHealthRequest ..> Exceptions_ValidationException
  DTOs_Responses_AdminResponse ..> Entities_Admin
  DTOs_Responses_AuditLogResponse ..> Entities_AuditLog
  DTOs_Responses_BulkActionStatus ..> DTOs_Requests_Product_ProductBulkActionRequest
  DTOs_Responses_BulkActionStatus ..> DTOs_Responses_BulkActionResult
  DTOs_Responses_BulkActionStatus ..> Enums_BulkActionStatusType
  DTOs_Responses_CategoryResponse ..> Entities_Category
  DTOs_Responses_LinkResponse ..> Entities_Link
  DTOs_Responses_MarketplaceResponse ..> Entities_Marketplace
  DTOs_Responses_ProductDetailResponse ..> Entities_Admin
  DTOs_Responses_ProductDetailResponse ..> Entities_Badge
  DTOs_Responses_ProductDetailResponse ..> Entities_Category
  DTOs_Responses_ProductDetailResponse ..> Entities_Link
  DTOs_Responses_ProductDetailResponse ..> Entities_Marketplace
  DTOs_Responses_ProductDetailResponse ..> Entities_MarketplaceBadge
  DTOs_Responses_ProductDetailResponse ..> Entities_Product
  DTOs_Responses_ProductResponse ..> Entities_Product
  DTOs_Responses_ProductResponse ..> Enums_ImageSourceType
  DTOs_Responses_ProductResponse ..> Enums_ProductStatus
  DTOs_Responses_ProductResponse <|-- DTOs_Responses_ProductDetailResponse
  Entities_BaseEntity ..> Entities_BaseEntity
  Entities_BaseEntity <|-- Entities_Admin
  Entities_BaseEntity <|-- Entities_Badge
  Entities_BaseEntity <|-- Entities_Category
  Entities_BaseEntity <|-- Entities_Link
  Entities_BaseEntity <|-- Entities_Marketplace
  Entities_BaseEntity <|-- Entities_MarketplaceBadge
  Entities_BaseEntity <|-- Entities_Product
  Entities_Link ..> Entities_Link
  Entities_Product ..> Enums_ImageSourceType
  Entities_Product ..> Enums_ProductStatus
  Entities_ProductBadge ..> Entities_ProductBadge
  Entities_Traits_StateMachineTrait ..> Exceptions_DomainException
  Enums_BulkActionStatusType "1" ..> "*" Enums_BulkActionStatusType
  Enums_BulkActionStatusType ..> Enums_BulkActionStatusType
  Enums_ProductStatus "1" ..> "*" Enums_ProductStatus
  Enums_ProductStatus ..> Enums_ProductStatus
  Exceptions_DomainException <|-- Exceptions_AdminNotFoundException
  Exceptions_DomainException <|-- Exceptions_AuthorizationException
  Exceptions_DomainException <|-- Exceptions_MarketplaceNotFoundException
  Exceptions_DomainException <|-- Exceptions_ProductNotFoundException
  Exceptions_DomainException <|-- Exceptions_ValidationException
  Exceptions_ValidationException ..> Entities_BaseEntity
  Exceptions_ValidationException ..> Exceptions_ValidationException
  Filters_AdminAuth ..> Config_Services
  Filters_AdminSessionCheck ..> Config_Services
  Filters_AdminSessionCheck ..> Exceptions_AdminNotFoundException
  Filters_AdminSessionCheck ..> Services_AuthService
  Filters_ApiAuthFilter ..> Config_Services
  Filters_CorsFilter ..> Config_Cors
  Models_AdminModel "1" ..> "*" Entities_Admin
  Models_AdminModel ..> Entities_Admin
  Models_AuditLogModel ..> Entities_AuditLog
  Models_BadgeModel "1" ..> "*" Entities_Badge
  Models_BadgeModel ..> Entities_Badge
  Models_BaseModel ..> Config_Services
  Models_BaseModel ..> Entities_BaseEntity
  Models_BaseModel <|-- Models_AdminModel
  Models_BaseModel <|-- Models_AuditLogModel
  Models_BaseModel <|-- Models_BadgeModel
  Models_BaseModel <|-- Models_CategoryModel
  Models_BaseModel <|-- Models_LinkModel
  Models_BaseModel <|-- Models_MarketplaceBadgeModel
  Models_BaseModel <|-- Models_MarketplaceModel
  Models_BaseModel <|-- Models_ProductBadgeModel
  Models_BaseModel <|-- Models_ProductModel
  Models_CategoryModel ..> Entities_Category
  Models_LinkModel ..> Entities_Link
  Models_MarketplaceBadgeModel "1" ..> "*" Entities_MarketplaceBadge
  Models_MarketplaceBadgeModel ..> Entities_MarketplaceBadge
  Models_MarketplaceModel "1" ..> "*" Entities_Marketplace
  Models_MarketplaceModel ..> Entities_Marketplace
  Models_ProductBadgeModel ..> Entities_ProductBadge
  Models_ProductModel ..> Entities_Product
  Models_ProductModel ..> Enums_ImageSourceType
  Models_ProductModel ..> Enums_ProductStatus
  Models_ProductModel ..> Models_CategoryModel
  Models_ProductModel ..> Models_LinkModel
  Repositories_BaseRepository ..> Contracts_CacheInterface
  Repositories_BaseRepository ..> DTOs_Queries_PaginationQuery
  Repositories_BaseRepository ..> Entities_BaseEntity
  Repositories_BaseRepository ..> Exceptions_DomainException
  Repositories_BaseRepository ..> Exceptions_ValidationException
  Repositories_BaseRepository <|-- Repositories_Concrete_AdminRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_AuditLogRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_BadgeRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_CategoryRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_LinkRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_MarketplaceBadgeRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_ProductBadgeRepository
  Repositories_BaseRepository <|-- Repositories_Concrete_ProductRepository
  Repositories_BaseRepositoryInterface ..> DTOs_Queries_PaginationQuery
  Repositories_BaseRepositoryInterface ..> Entities_BaseEntity
  Repositories_BaseRepositoryInterface <|-- Repositories_BaseRepository
  Repositories_Concrete_AdminRepository ..> Contracts_CacheInterface
  Repositories_Concrete_AdminRepository ..> Entities_Admin
  Repositories_Concrete_AdminRepository ..> Models_AdminModel
  Repositories_Concrete_AuditLogRepository ..> Contracts_CacheInterface
  Repositories_Concrete_AuditLogRepository ..> Entities_AuditLog
  Repositories_Concrete_AuditLogRepository ..> Models_AuditLogModel
  Repositories_Concrete_BadgeRepository ..> Contracts_CacheInterface
  Repositories_Concrete_BadgeRepository ..> DTOs_Queries_PaginationQuery
  Repositories_Concrete_BadgeRepository ..> Entities_Badge
  Repositories_Concrete_BadgeRepository ..> Exceptions_DomainException
  Repositories_Concrete_BadgeRepository ..> Exceptions_ValidationException
  Repositories_Concrete_BadgeRepository ..> Models_BadgeModel
  Repositories_Concrete_CategoryRepository ..> Contracts_CacheInterface
  Repositories_Concrete_CategoryRepository ..> Entities_BaseEntity
  Repositories_Concrete_CategoryRepository ..> Entities_Category
  Repositories_Concrete_CategoryRepository ..> Exceptions_DomainException
  Repositories_Concrete_CategoryRepository ..> Models_CategoryModel
  Repositories_Concrete_LinkRepository ..> Entities_Link
  Repositories_Concrete_LinkRepository ..> Models_LinkModel
  Repositories_Concrete_MarketplaceBadgeRepository ..> Contracts_CacheInterface
  Repositories_Concrete_MarketplaceBadgeRepository ..> Entities_MarketplaceBadge
  Repositories_Concrete_MarketplaceBadgeRepository ..> Models_MarketplaceBadgeModel
  Repositories_Concrete_MarketplaceRepository ..> Entities_Marketplace
  Repositories_Concrete_MarketplaceRepository ..> Exceptions_MarketplaceNotFoundException
  Repositories_Concrete_MarketplaceRepository ..> Exceptions_ValidationException
  Repositories_Concrete_MarketplaceRepository ..> Models_LinkModel
  Repositories_Concrete_MarketplaceRepository ..> Models_MarketplaceModel
  Repositories_Concrete_MarketplaceRepository ..> Services_AuditService
  Repositories_Concrete_MarketplaceRepository ..> Services_CacheService
  Repositories_Concrete_ProductBadgeRepository ..> Contracts_CacheInterface
  Repositories_Concrete_ProductBadgeRepository ..> DTOs_Queries_PaginationQuery
  Repositories_Concrete_ProductBadgeRepository ..> Entities_ProductBadge
  Repositories_Concrete_ProductBadgeRepository ..> Exceptions_DomainException
  Repositories_Concrete_ProductBadgeRepository ..> Models_ProductBadgeModel
  Repositories_Concrete_ProductRepository ..> Entities_Product
  Repositories_Concrete_ProductRepository ..> Enums_ProductStatus
  Repositories_Concrete_ProductRepository ..> Models_ProductModel
  Repositories_Interfaces_AdminRepositoryInterface ..> Entities_Admin
  Repositories_Interfaces_AdminRepositoryInterface <|-- Repositories_Concrete_AdminRepository
  Repositories_Interfaces_AuditLogRepositoryInterface ..> Entities_AuditLog
  Repositories_Interfaces_AuditLogRepositoryInterface <|-- Repositories_Concrete_AuditLogRepository
  Repositories_Interfaces_BadgeRepositoryInterface ..> DTOs_Queries_PaginationQuery
  Repositories_Interfaces_BadgeRepositoryInterface ..> Entities_Badge
  Repositories_Interfaces_BadgeRepositoryInterface <|-- Repositories_Concrete_BadgeRepository
  Repositories_Interfaces_CategoryRepositoryInterface ..> Entities_Category
  Repositories_Interfaces_CategoryRepositoryInterface <|-- Repositories_Concrete_CategoryRepository
  Repositories_Interfaces_LinkRepositoryInterface ..> Entities_Link
  Repositories_Interfaces_LinkRepositoryInterface <|-- Repositories_Concrete_LinkRepository
  Repositories_Interfaces_MarketplaceBadgeRepositoryInterface ..> Entities_MarketplaceBadge
  Repositories_Interfaces_MarketplaceBadgeRepositoryInterface <|-- Repositories_Concrete_MarketplaceBadgeRepository
  Repositories_Interfaces_MarketplaceRepositoryInterface ..> Entities_Marketplace
  Repositories_Interfaces_MarketplaceRepositoryInterface <|-- Repositories_Concrete_MarketplaceRepository
  Repositories_Interfaces_ProductBadgeRepositoryInterface ..> DTOs_Queries_PaginationQuery
  Repositories_Interfaces_ProductBadgeRepositoryInterface ..> Entities_ProductBadge
  Repositories_Interfaces_ProductBadgeRepositoryInterface <|-- Repositories_Concrete_ProductBadgeRepository
  Repositories_Interfaces_ProductRepositoryInterface ..> Entities_Product
  Repositories_Interfaces_ProductRepositoryInterface ..> Enums_ProductStatus
  Repositories_Interfaces_ProductRepositoryInterface <|-- Repositories_Concrete_ProductRepository
  Services_AdminService ..> Entities_Admin
  Services_AdminService ..> Entities_AuditLog
  Services_AdminService ..> Exceptions_AuthorizationException
  Services_AdminService ..> Exceptions_DomainException
  Services_AdminService ..> Exceptions_ValidationException
  Services_AdminService ..> Repositories_Interfaces_AdminRepositoryInterface
  Services_AdminService ..> Repositories_Interfaces_AuditLogRepositoryInterface
  Services_AdminService ..> Services_AuthService
  Services_AdminService ..> Services_TransactionService
  Services_AuditService ..> Entities_Admin
  Services_AuditService ..> Entities_AuditLog
  Services_AuditService ..> Entities_BaseEntity
  Services_AuditService ..> Models_AuditLogModel
  Services_AuthService ..> Entities_Admin
  Services_AuthService ..> Exceptions_DomainException
  Services_AuthService ..> Exceptions_ValidationException
  Services_AuthService ..> Repositories_Interfaces_AdminRepositoryInterface
  Services_AuthService ..> Services_AuditService
  Services_AuthService ..> Services_CacheService
  Services_AuthorizationService ..> Exceptions_AuthorizationException
  Services_AuthorizationService ..> Repositories_Interfaces_AdminRepositoryInterface
  Services_BadgeService ..> DTOs_BaseDTO
  Services_BadgeService ..> DTOs_Queries_PaginationQuery
  Services_BadgeService ..> Entities_Badge
  Services_BadgeService ..> Exceptions_DomainException
  Services_BadgeService ..> Exceptions_ValidationException
  Services_BadgeService ..> Repositories_Interfaces_BadgeRepositoryInterface
  Services_BadgeService ..> Services_AuditService
  Services_BaseService ..> Contracts_CacheInterface
  Services_BaseService ..> DTOs_BaseDTO
  Services_BaseService ..> Exceptions_AuthorizationException
  Services_BaseService ..> Exceptions_DomainException
  Services_BaseService ..> Exceptions_ValidationException
  Services_BaseService ..> Repositories_BaseRepositoryInterface
  Services_BaseService ..> Services_AuditService
  Services_BaseService <|-- Services_BadgeService
  Services_BaseService <|-- Services_Product_Concrete_ProductBulkService
  Services_BaseService <|-- Services_Product_Concrete_ProductCRUDService
  Services_BaseService <|-- Services_Product_Concrete_ProductQueryService
  Services_BaseService <|-- Services_Product_Concrete_ProductWorkflowService
  Services_CacheService ..> Config_Services
  Services_CategoryService ..> DTOs_Queries_PaginationQuery
  Services_CategoryService ..> DTOs_Requests_Category_CreateCategoryRequest
  Services_CategoryService ..> DTOs_Requests_Category_UpdateCategoryRequest
  Services_CategoryService ..> DTOs_Responses_BulkActionResult
  Services_CategoryService ..> DTOs_Responses_CategoryResponse
  Services_CategoryService ..> DTOs_Responses_CategoryTreeResponse
  Services_CategoryService ..> Entities_Category
  Services_CategoryService ..> Exceptions_DomainException
  Services_CategoryService ..> Exceptions_ValidationException
  Services_CategoryService ..> Repositories_Interfaces_CategoryRepositoryInterface
  Services_CategoryService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_CategoryService ..> Services_AuditService
  Services_CategoryService ..> Services_TransactionService
  Services_CategoryService ..> Validators_SlugValidator
  Services_LinkService ..> DTOs_Requests_Link_BulkLinkUpdateRequest
  Services_LinkService ..> DTOs_Requests_Link_CreateLinkRequest
  Services_LinkService ..> DTOs_Requests_Link_UpdateLinkRequest
  Services_LinkService ..> DTOs_Responses_LinkAnalyticsResponse
  Services_LinkService ..> DTOs_Responses_LinkResponse
  Services_LinkService ..> Entities_Link
  Services_LinkService ..> Exceptions_DomainException
  Services_LinkService ..> Exceptions_LinkNotFoundException
  Services_LinkService ..> Exceptions_ValidationException
  Services_LinkService ..> Models_AdminModel
  Services_LinkService ..> Models_LinkModel
  Services_LinkService ..> Models_MarketplaceBadgeModel
  Services_LinkService ..> Models_MarketplaceModel
  Services_LinkService ..> Models_ProductModel
  Services_LinkService ..> Services_AuditService
  Services_LinkService ..> Services_CacheService
  Services_LinkService ..> Services_ValidationService
  Services_MarketplaceService ..> DTOs_Requests_Marketplace_CreateMarketplaceRequest
  Services_MarketplaceService ..> DTOs_Requests_Marketplace_UpdateMarketplaceRequest
  Services_MarketplaceService ..> DTOs_Responses_MarketplaceResponse
  Services_MarketplaceService ..> Entities_Marketplace
  Services_MarketplaceService ..> Exceptions_DomainException
  Services_MarketplaceService ..> Exceptions_MarketplaceNotFoundException
  Services_MarketplaceService ..> Exceptions_ValidationException
  Services_MarketplaceService ..> Repositories_Interfaces_MarketplaceRepositoryInterface
  Services_MarketplaceService ..> Services_AuditService
  Services_MarketplaceService ..> Services_CacheService
  Services_MarketplaceService ..> Services_LinkService
  Services_MarketplaceService ..> Services_ValidationService
  Services_PaginationService ..> Config_Pager
  Services_PaginationService ..> DTOs_Queries_PaginationQuery
  Services_Product_Cache_ProductCacheInvalidator ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Cache_ProductCacheInvalidator ..> Services_CacheService
  Services_Product_Cache_ProductCacheKeyGenerator ..> DTOs_Queries_ProductQuery
  Services_Product_Cache_ProductCacheKeyGenerator ..> Enums_ProductStatus
  Services_Product_Cache_ProductCacheManager ..> Entities_Product
  Services_Product_Cache_ProductCacheManager ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Cache_ProductCacheManager ..> Services_CacheService
  Services_Product_Cache_ProductCacheManager ..> Services_Product_Cache_ProductCacheInvalidator
  Services_Product_Cache_ProductCacheManager ..> Services_Product_Cache_ProductCacheKeyGenerator
  Services_Product_Concrete_ProductBulkService ..> Contracts_CacheInterface
  Services_Product_Concrete_ProductBulkService ..> DTOs_BaseDTO
  Services_Product_Concrete_ProductBulkService ..> DTOs_Requests_Product_ProductBulkActionRequest
  Services_Product_Concrete_ProductBulkService ..> DTOs_Requests_Product_ProductDeleteRequest
  Services_Product_Concrete_ProductBulkService ..> DTOs_Requests_Product_PublishProductRequest
  Services_Product_Concrete_ProductBulkService ..> DTOs_Responses_BulkActionResult
  Services_Product_Concrete_ProductBulkService ..> Entities_Product
  Services_Product_Concrete_ProductBulkService ..> Enums_ProductBulkActionType
  Services_Product_Concrete_ProductBulkService ..> Enums_ProductStatus
  Services_Product_Concrete_ProductBulkService ..> Exceptions_AuthorizationException
  Services_Product_Concrete_ProductBulkService ..> Exceptions_DomainException
  Services_Product_Concrete_ProductBulkService ..> Exceptions_ProductNotFoundException
  Services_Product_Concrete_ProductBulkService ..> Exceptions_ValidationException
  Services_Product_Concrete_ProductBulkService ..> Repositories_Interfaces_AuditLogRepositoryInterface
  Services_Product_Concrete_ProductBulkService ..> Repositories_Interfaces_LinkRepositoryInterface
  Services_Product_Concrete_ProductBulkService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Concrete_ProductBulkService ..> Services_AuditService
  Services_Product_Concrete_ProductBulkService ..> Services_CacheService
  Services_Product_Concrete_ProductBulkService ..> Services_TransactionService
  Services_Product_Concrete_ProductBulkService ..> Validators_ProductValidator
  Services_Product_Concrete_ProductCRUDService ..> Contracts_CacheInterface
  Services_Product_Concrete_ProductCRUDService ..> DTOs_BaseDTO
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Requests_Product_CreateProductRequest
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Requests_Product_ProductDeleteRequest
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Requests_Product_ProductQuickEditRequest
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Requests_Product_UpdateProductRequest
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Responses_ProductDetailResponse
  Services_Product_Concrete_ProductCRUDService ..> DTOs_Responses_ProductResponse
  Services_Product_Concrete_ProductCRUDService ..> Entities_Product
  Services_Product_Concrete_ProductCRUDService ..> Enums_ProductStatus
  Services_Product_Concrete_ProductCRUDService ..> Exceptions_AuthorizationException
  Services_Product_Concrete_ProductCRUDService ..> Exceptions_CategoryNotFoundException
  Services_Product_Concrete_ProductCRUDService ..> Exceptions_DomainException
  Services_Product_Concrete_ProductCRUDService ..> Exceptions_ProductNotFoundException
  Services_Product_Concrete_ProductCRUDService ..> Exceptions_ValidationException
  Services_Product_Concrete_ProductCRUDService ..> Repositories_Interfaces_AuditLogRepositoryInterface
  Services_Product_Concrete_ProductCRUDService ..> Repositories_Interfaces_CategoryRepositoryInterface
  Services_Product_Concrete_ProductCRUDService ..> Repositories_Interfaces_LinkRepositoryInterface
  Services_Product_Concrete_ProductCRUDService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Concrete_ProductCRUDService ..> Services_AuditService
  Services_Product_Concrete_ProductCRUDService ..> Validators_ProductValidator
  Services_Product_Concrete_ProductQueryService ..> Contracts_CacheInterface
  Services_Product_Concrete_ProductQueryService ..> DTOs_BaseDTO
  Services_Product_Concrete_ProductQueryService ..> DTOs_Queries_PaginationQuery
  Services_Product_Concrete_ProductQueryService ..> DTOs_Queries_ProductQuery
  Services_Product_Concrete_ProductQueryService ..> DTOs_Responses_ProductResponse
  Services_Product_Concrete_ProductQueryService ..> Enums_ProductStatus
  Services_Product_Concrete_ProductQueryService ..> Repositories_Interfaces_CategoryRepositoryInterface
  Services_Product_Concrete_ProductQueryService ..> Repositories_Interfaces_LinkRepositoryInterface
  Services_Product_Concrete_ProductQueryService ..> Repositories_Interfaces_MarketplaceRepositoryInterface
  Services_Product_Concrete_ProductQueryService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Concrete_ProductQueryService ..> Services_AuditService
  Services_Product_Concrete_ProductWorkflowService ..> Contracts_CacheInterface
  Services_Product_Concrete_ProductWorkflowService ..> DTOs_BaseDTO
  Services_Product_Concrete_ProductWorkflowService ..> DTOs_Requests_Product_ProductToggleStatusRequest
  Services_Product_Concrete_ProductWorkflowService ..> DTOs_Requests_Product_PublishProductRequest
  Services_Product_Concrete_ProductWorkflowService ..> DTOs_Responses_ProductResponse
  Services_Product_Concrete_ProductWorkflowService ..> Enums_ProductStatus
  Services_Product_Concrete_ProductWorkflowService ..> Exceptions_DomainException
  Services_Product_Concrete_ProductWorkflowService ..> Exceptions_ProductNotFoundException
  Services_Product_Concrete_ProductWorkflowService ..> Exceptions_ValidationException
  Services_Product_Concrete_ProductWorkflowService ..> Repositories_Interfaces_AuditLogRepositoryInterface
  Services_Product_Concrete_ProductWorkflowService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_Product_Concrete_ProductWorkflowService ..> Services_AuditService
  Services_Product_Concrete_ProductWorkflowService ..> Validators_ProductValidator
  Services_Product_Factories_ProductResponseFactory ..> DTOs_Responses_BulkActionResult
  Services_Product_Factories_ProductResponseFactory ..> DTOs_Responses_ProductDetailResponse
  Services_Product_Factories_ProductResponseFactory ..> DTOs_Responses_ProductResponse
  Services_Product_Factories_ProductResponseFactory ..> Entities_BaseEntity
  Services_Product_Factories_ProductResponseFactory ..> Entities_Category
  Services_Product_Factories_ProductResponseFactory ..> Entities_Marketplace
  Services_Product_Factories_ProductResponseFactory ..> Entities_Product
  Services_Product_Factories_ProductResponseFactory ..> Enums_ProductBulkActionType
  Services_Product_ProductOrchestrator ..> Contracts_ProductBulkInterface
  Services_Product_ProductOrchestrator ..> Contracts_ProductCRUDInterface
  Services_Product_ProductOrchestrator ..> Contracts_ProductMaintenanceInterface
  Services_Product_ProductOrchestrator ..> Contracts_ProductQueryInterface
  Services_Product_ProductOrchestrator ..> Contracts_ProductWorkflowInterface
  Services_Product_ProductOrchestrator ..> DTOs_BaseDTO
  Services_Product_ProductOrchestrator ..> DTOs_Queries_ProductQuery
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_CreateProductRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_ProductBulkActionRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_ProductDeleteRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_ProductQuickEditRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_ProductToggleStatusRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_PublishProductRequest
  Services_Product_ProductOrchestrator ..> DTOs_Requests_Product_UpdateProductRequest
  Services_Product_ProductOrchestrator ..> DTOs_Responses_BulkActionResult
  Services_Product_ProductOrchestrator ..> DTOs_Responses_ProductDetailResponse
  Services_Product_ProductOrchestrator ..> DTOs_Responses_ProductResponse
  Services_Product_ProductOrchestrator ..> Entities_Product
  Services_Product_ProductOrchestrator ..> Enums_ProductBulkActionType
  Services_Product_ProductOrchestrator ..> Enums_ProductStatus
  Services_Product_ProductOrchestrator ..> Repositories_BaseRepositoryInterface
  Services_Product_Validators_ProductBusinessValidator ..> Enums_ImageSourceType
  Services_Product_Validators_ProductBusinessValidator ..> Enums_ProductStatus
  Services_Product_Validators_ProductBusinessValidator ..> Repositories_Interfaces_AuditLogRepositoryInterface
  Services_Product_Validators_ProductBusinessValidator ..> Repositories_Interfaces_CategoryRepositoryInterface
  Services_Product_Validators_ProductBusinessValidator ..> Repositories_Interfaces_LinkRepositoryInterface
  Services_Product_Validators_ProductBusinessValidator ..> Repositories_Interfaces_MarketplaceRepositoryInterface
  Services_Product_Validators_ProductBusinessValidator ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_RepositoryService ..> Config_Database
  Services_RepositoryService ..> Models_ProductModel
  Services_RepositoryService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_RepositoryService ..> Services_CacheService
  Services_ResponseFormatter ..> DTOs_Queries_PaginationQuery
  Services_ResponseFormatter ..> Exceptions_DomainException
  Services_ResponseFormatter ..> Services_PaginationService
  Services_TransactionService ..> Exceptions_InvalidArgumentException
  Services_ValidationService ..> Entities_Product
  Services_ValidationService ..> Enums_ProductStatus
  Services_ValidationService ..> Models_AdminModel
  Services_ValidationService ..> Models_CategoryModel
  Services_ValidationService ..> Models_LinkModel
  Services_ValidationService ..> Repositories_Concrete_LinkRepository
  Services_ValidationService ..> Repositories_Interfaces_LinkRepositoryInterface
  Services_ValidationService ..> Repositories_Interfaces_ProductRepositoryInterface
  Services_ValidationService ..> Services_RepositoryService
  Validators_EntityValidator ..> Config_Database
  Validators_FileValidator <|-- Validators_ImageValidator
  Validators_ProductValidator ..> DTOs_Requests_Product_PublishProductRequest
  Validators_ProductValidator ..> Entities_Product
  Validators_ProductValidator ..> Enums_ImageSourceType
  Validators_ProductValidator ..> Enums_ProductStatus
  Validators_ProductValidator ..> Models_CategoryModel
  Validators_ProductValidator ..> Models_LinkModel
  Validators_ProductValidator ..> Models_ProductModel
  Validators_ProductValidator ..> Services_CacheService
  Validators_SlugValidator ..> Config_Services
  Validators_SlugValidator ..> Models_CategoryModel
  Validators_SlugValidator ..> Models_MarketplaceModel
  Validators_SlugValidator ..> Models_ProductModel
  Validators_SlugValidator ..> Services_CacheService
@enduml